<html lang="en"><head><meta charset="utf8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>GumTree</title><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"><style type="text/css">/*
 * This file is part of GumTree.
 *
 * GumTree is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * GumTree is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public License
 * along with GumTree.  If not, see <http://www.gnu.org/licenses/>.
 *
 * Copyright 2011-2015 Jean-Rémy Falleri <jr.falleri@gmail.com>
 * Copyright 2011-2015 Floréal Morandat <florealm@gmail.com>
 */

.add {
	border: 1px solid black;
	background-color: MediumSeaGreen;
}

.del {
	border: 1px solid black;
	background-color: IndianRed;
}

.mv {
	border: 1px solid black;
	background-color: Plum;
}

.upd {
	border: 1px solid black;
	background-color: DarkOrange;
	font-weight: bold;
}

.cupd {
	font-weight: normal;
	color: DimGray;
}

.selected {
	background-color: Gold;
}

.marker {
	margin: 0;
	padding: 0;
}

div {
	margin: 0px;
	padding: 0px;
}

.pre-scrollable {
	margin: 0px;
	padding: 0px;
	font-size: 10pt;
	color: black;
	max-height: 90vh;
	background-color: white;
	border: 1px solid black;
	font-family: "Hack, Inconsolata", "Consolas", "Liberation Sans Regular", "DejaVu Sans Mono", monospace;
}

.tooltip-inner {
    max-width: none;
}
</style><script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script><script type="text/javascript">/*
 * This file is part of GumTree.
 *
 * GumTree is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * GumTree is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public License
 * along with GumTree.  If not, see <http://www.gnu.org/licenses/>.
 *
 * Copyright 2011-2015 Jean-Rémy Falleri <jr.falleri@gmail.com>
 * Copyright 2011-2015 Floréal Morandat <florealm@gmail.com>
 */

$(function(){
    let popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'))
    let popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
      return new bootstrap.Popover(popoverTriggerEl)
    })

    $("body").keypress(function (event) {
        switch (event.which) {
            case 116:
                $('html, body').animate({scrollTop: 0}, 100);
                break;
            case 98:
                $("html, body").animate({ scrollTop: $(document).height() }, 100);
                break;
            case 113:
                window.location = "/quit";
                break;
            case 108:
                window.location = "/list";
                break;
        }
    });
});
</script><script type="text/javascript">/*
 * This file is part of GumTree.
 *
 * GumTree is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * GumTree is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public License
 * along with GumTree.  If not, see <http://www.gnu.org/licenses/>.
 *
 * Copyright 2011-2015 Jean-Rémy Falleri <jr.falleri@gmail.com>
 * Copyright 2011-2015 Floréal Morandat <florealm@gmail.com>
 */

currentMapping = 0;

if (typeof String.prototype.startsWith != 'function') {
  String.prototype.startsWith = function (str){
    return this.slice(0, str.length) == str;
  };
}

function getMappedElement(eltId) {
	if (eltId.startsWith("move-src")) {
		return eltId.replace("src","dst");  	 	
  	}
  	else {
  		return eltId.replace("dst","src");
  	}
}

function nextMapping() {
	if (currentMapping == 0) {
		currentMapping = 1;
		return "#mapping-" + currentMapping.toString();
	} else {
		currentMapping++;
		
		if ($("#mapping-" + currentMapping.toString()).length > 0) {
			return "#mapping-" + currentMapping.toString();
		} else {
			currentMapping = 1;
			return "#mapping-" + currentMapping.toString();		
		}		
	}
}

function isSrc(eltId) {
	return eltId.startsWith("move-src");
}

$(function() {
    $("body").keypress(function (event) {
        switch(event.which) {
            case 110:
                const mapping = $(nextMapping());
                const pre = mapping.closest("pre");
                pre.animate({scrollTop: pre.scrollTop() + mapping.position().top - 200}, 100);
                break;
        }
    });

    // highlight
    $("span.mv.token, span.token.upd").click(function(event) {
        if ($(this).hasClass("selected")) {
            $("span.mv.token, span.token.upd").removeClass("selected");
        } else {
            $("span.mv.token, span.token.upd").removeClass("selected");
            const refElt = $("#" + getMappedElement($(this).attr("id")));
            $(this).addClass("selected");
            refElt.addClass("selected");
            const pre = refElt.closest("pre");
            console.log(pre);
            pre.animate({scrollTop: pre.scrollTop() + refElt.position().top - 200}, 100);
        }
        event.stopPropagation();
    });
    
    $("span.add.token, span.token.del").click(function(event) {
        $("span.mv.token, span.token.upd").removeClass("selected");
        event.stopPropagation();
    });

    // tooltip
    $("span.token").hover(
    	function (event) {
    		$(this).tooltip('show');
    		event.stopPropagation();
    	},
    	function (event) {
    		$(this).tooltip('hide');
    		event.stopPropagation();
    	}
    );
});
</script></head><body><div class="container-fluid"><div class="row"><div class="col"><div class="btn-toolbar justify-content-end"><div class="btn-group mr-2"><button class="btn btn-primary btn-sm" id="legend" data-bs-toggle="popover" data-bs-placement="bottom" data-bs-html="true" data-bs-content="<span class='del'>&nbsp;&nbsp;</span> deleted<br><span class='add'>&nbsp;&nbsp;</span> added<br><span class='mv'>&nbsp;&nbsp;</span> moved<br><span class='upd';>&nbsp;&nbsp;</span> updated<br>">Legend</button><button class="btn btn-primary btn-sm" id="shortcuts" data-bs-toggle="popover" data-bs-placement="bottom" data-bs-html="true" data-bs-content="<b>q</b> quit<br><b>l</b> list<br><b>n</b> next<br><b>t</b> top<br><b>b</b> bottom">Shortcuts</button></div><div class="btn-group"><a href="/list" class="btn btn-default btn-sm btn-primary">Back</a><a href="/quit" class="btn btn-default btn-sm btn-danger">Quit</a></div></div></div></div><div class="row"><div class="col-6"><h5>StarkExchange.sol</h5><pre class="pre-scrollable"><span class="marker" id="mapping-1"></span><span class="token upd" id="move-src-1" data-title="source_file/comment"><span class="cupd">/*
  Copyright 2019</span>,<span class="cupd">202</span>0<span class="cupd"> StarkWare Industries Ltd.

  Licensed under the Apache License, Version 2.0 (the "License").
  You may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  https://www.starkware.co/open-source-license/

  Unless required by applicable law or agreed to in writing,
  software distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions
  and limitations under the License.
*/</span></span>
pragma solidity ^<span class="marker" id="mapping-2"></span><span class="token upd" id="move-src-2" data-title="solidity_pragma_token/solidity_version"><span class="cupd">0.</span>5.2</span>;

<span class="marker" id="mapping-3"></span><span class="token del" data-title="source_file/import_directive">import "MainStorage.sol";</span>
import "MainDispatcher.sol";

contract StarkExchange is <span class="marker" id="mapping-4"></span><span class="token del" data-title="contract_declaration/inheritance_specifier">MainStorage</span><span class="marker" id="mapping-5"></span><span class="token del" data-title="contract_declaration/,">,</span> MainDispatcher {
    string public constant VERSION = "2.5.0";

    <span class="marker" id="mapping-6"></span><span class="token mv" id="move-src-3" data-title="contract_body/state_variable_declaration">uint256 constant <span class="marker" id="mapping-7"></span><span class="token upd" id="move-src-4" data-title="state_variable_declaration/identifier">SUBCONTR<span class="cupd">A</span><span class="cupd">C</span>T<span class="cupd">_</span>BITS</span> = <span class="marker" id="mapping-8"></span><span class="token upd" id="move-src-5" data-title="state_variable_declaration/number_literal">4</span>;</span>

    <span class="marker" id="mapping-9"></span><span class="token upd" id="move-src-6" data-title="contract_body/comment"><span class="cupd">// Salt for a </span>7<span class="cupd"> bit unique spread of all relevant selectors. Pre-ca</span><span class="cupd">l</span>c<span class="cupd">ulated.</span></span>
    // ---------- The following code was auto-generated. PLEASE DO NOT EDIT. ----------
    uint256 constant <span class="marker" id="mapping-10"></span><span class="token upd" id="move-src-7" data-title="state_variable_declaration/identifier"><span class="cupd">MA</span>GIC_SALT</span> = <span class="marker" id="mapping-11"></span><span class="token upd" id="move-src-8" data-title="state_variable_declaration/number_literal">45733</span>;
    uint256 constant <span class="marker" id="mapping-12"></span><span class="token upd" id="move-src-9" data-title="state_variable_declaration/identifier"><span class="cupd">IDX_MAP_</span>0</span> = <span class="marker" id="mapping-13"></span><span class="token upd" id="move-src-10" data-title="state_variable_declaration/number_literal"><span class="cupd">0x20</span>1<span class="cupd">2</span>2<span class="cupd">0</span>2<span class="cupd">3</span>0<span class="cupd">20</span><span class="cupd">1</span><span class="cupd">001000</span>22<span class="cupd">1</span>22<span class="cupd">0</span>2<span class="cupd">10</span>222<span class="cupd">00</span><span class="cupd">0</span><span class="cupd">0000</span>2<span class="cupd">03</span>030<span class="cupd">1</span><span class="cupd">02</span><span class="cupd">1</span>112212<span class="cupd">0</span><span class="cupd">2000</span><span class="cupd">0</span>3<span class="cupd">00</span>2</span>;
    uint256 constant <span class="marker" id="mapping-14"></span><span class="token upd" id="move-src-11" data-title="state_variable_declaration/identifier"><span class="cupd">IDX_MAP_</span>1</span> = <span class="marker" id="mapping-15"></span><span class="token upd" id="move-src-12" data-title="state_variable_declaration/number_literal"><span class="cupd">0x</span>2<span class="cupd">100</span><span class="cupd">00</span>3<span class="cupd">0</span>0<span class="cupd">2</span>2<span class="cupd">000</span>1<span class="cupd">000</span>3<span class="cupd">0</span><span class="cupd">00</span><span class="cupd">00</span><span class="cupd">0</span>3<span class="cupd">0</span><span class="cupd">0100</span>22<span class="cupd">0</span>22<span class="cupd">0</span>2<span class="cupd">0</span>3<span class="cupd">0</span><span class="cupd">0</span><span class="cupd">00200</span><span class="cupd">0</span><span class="cupd">0</span>1<span class="cupd">010</span>221<span class="cupd">000</span>111<span class="cupd">0</span>0</span>;
    // ---------- End of auto-generated code. ----------

    <span class="marker" id="mapping-16"></span><span class="token del" data-title="contract_body/function_definition">function validateSubContractIndex(<span class="marker" id="mapping-17"></span><span class="token del" data-title="function_definition/parameter">uint256 index</span>, <span class="marker" id="mapping-18"></span><span class="token del" data-title="function_definition/parameter">address subContract</span>) <span class="marker" id="mapping-19"></span><span class="token mv" id="move-src-13" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-20"></span><span class="token mv" id="move-src-14" data-title="function_definition/state_mutability">pure</span><span class="marker" id="mapping-21"></span><span class="token del" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-22"></span><span class="token del" data-title="function_body/variable_declaration_statement">string memory id = SubContractor(subContract).identify();</span>
        <span class="marker" id="mapping-23"></span><span class="token del" data-title="function_body/variable_declaration_statement">bytes32 hashed_expected_id = keccak256(abi.encodePacked(expectedIdByIndex(index)));</span>
        <span class="marker" id="mapping-24"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-25"></span><span class="token del" data-title="expression_statement/call_expression">require(
            <span class="marker" id="mapping-26"></span><span class="token del" data-title="call_expression/call_argument">hashed_expected_id == keccak256(abi.encodePacked(id))</span>,
            <span class="marker" id="mapping-27"></span><span class="token del" data-title="call_expression/call_argument"><span class="marker" id="mapping-28"></span><span class="token mv" id="move-src-15" data-title="call_argument/string_literal">"MISPLACED_INDEX_OR_BAD_CONTRACT_ID"</span></span>)</span>;</span>
    }</span></span>

    <span class="marker" id="mapping-29"></span><span class="token mv" id="move-src-16" data-title="contract_body/function_definition">function expectedIdByIndex(uint256 index)
        <span class="marker" id="mapping-30"></span><span class="token del" data-title="function_definition/visibility">private</span> pure returns (string memory id) {
        if (index == 1){
            id = "StarkWare_AllVerifiers_2020_1";
        } else <span class="marker" id="mapping-31"></span><span class="token mv" id="move-src-17" data-title="if_statement/if_statement">if (<span class="marker" id="mapping-32"></span><span class="token mv" id="move-src-18" data-title="if_statement/binary_expression">index == 2</span>)<span class="marker" id="mapping-33"></span><span class="token mv" id="move-src-19" data-title="if_statement/block_statement">{
            id = "StarkWare_TokensAndRamping_2020_1";
        }</span> else if (<span class="marker" id="mapping-34"></span><span class="token mv" id="move-src-20" data-title="if_statement/binary_expression">index == 3</span>){
            id = "StarkWare_StarkExState_2020_1";
        } else {
            revert("UNEXPECTED_INDEX");
        }</span>
    }</span>

    function <span class="marker" id="mapping-35"></span><span class="token upd" id="move-src-21" data-title="function_definition/identifier"><span class="cupd">g</span>etNum<span class="cupd">S</span>ubcontr<span class="cupd">a</span>cts</span>() internal pure returns (uint256) {
        return <span class="marker" id="mapping-36"></span><span class="token del" data-title="return_statement/number_literal">3</span>;
    }

    <span class="marker" id="mapping-37"></span><span class="token del" data-title="contract_body/function_definition">function getSubContract(<span class="marker" id="mapping-38"></span><span class="token del" data-title="function_definition/parameter">bytes4 selector</span>)
        <span class="marker" id="mapping-39"></span><span class="token mv" id="move-src-22" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-40"></span><span class="token mv" id="move-src-23" data-title="function_definition/state_mutability">view</span> <span class="marker" id="mapping-41"></span><span class="token del" data-title="function_definition/return_type_definition">returns (address)</span> <span class="marker" id="mapping-42"></span><span class="token del" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-43"></span><span class="token del" data-title="function_body/variable_declaration_statement">uint256 location = 0x7F &amp; uint256(keccak256(abi.encodePacked(selector, MAGIC_SALT)));</span>
        <span class="marker" id="mapping-44"></span><span class="token del" data-title="function_body/variable_declaration_statement"><span class="marker" id="mapping-45"></span><span class="token del" data-title="variable_declaration_statement/variable_declaration"><span class="marker" id="mapping-46"></span><span class="token mv" id="move-src-24" data-title="variable_declaration/type_name">uint256</span> subContractIdx</span>;</span>
        <span class="marker" id="mapping-47"></span><span class="token del" data-title="function_body/variable_declaration_statement"><span class="marker" id="mapping-48"></span><span class="token del" data-title="variable_declaration_statement/variable_declaration"><span class="marker" id="mapping-49"></span><span class="token mv" id="move-src-25" data-title="variable_declaration/type_name">uint256</span> offset</span> = <span class="marker" id="mapping-50"></span><span class="token del" data-title="variable_declaration_statement/binary_expression">SUBCONTRACT_BITS * location % 256</span>;</span>
        <span class="marker" id="mapping-51"></span><span class="token del" data-title="function_body/if_statement">if (location &lt; 64) {
            subContractIdx = (IDX_MAP_0 &gt;&gt; offset) &amp; 0xF;
        } else {
            subContractIdx = (IDX_MAP_1 &gt;&gt; offset) &amp; 0xF;
        }</span>
        <span class="marker" id="mapping-52"></span><span class="token del" data-title="function_body/return_statement">return subContracts[subContractIdx];</span>
    }</span></span>

    <span class="marker" id="mapping-53"></span><span class="token del" data-title="contract_body/function_definition">function setSubContractAddress(<span class="marker" id="mapping-54"></span><span class="token del" data-title="function_definition/parameter">uint256 index</span>, <span class="marker" id="mapping-55"></span><span class="token del" data-title="function_definition/parameter">address subContractAddress</span>) <span class="marker" id="mapping-56"></span><span class="token mv" id="move-src-26" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-57"></span><span class="token del" data-title="function_definition/function_body">{
        subContracts[index] = subContractAddress;
    }</span></span>

    function initializationSentinel()
        internal view {
        string memory REVERT_MSG = "INITIALIZATION_BLOCKED";
        // This initializer sets roots etc. It must not be applied twice.
        // I.e. it can run only when the state is still empty.
        require(vaultRoot == 0, REVERT_MSG);
        require(vaultTreeHeight == 0, REVERT_MSG);
        require(orderRoot == 0, REVERT_MSG);
        require(orderTreeHeight == 0, REVERT_MSG);
    }
}
</pre></div><div class="col-6"><h5>StarkExchange.sol</h5><pre class="pre-scrollable"><span class="marker" id="mapping-58"></span><span class="token upd" id="move-dst-1" data-title="source_file/comment"><span class="cupd">/*
  Copyright 2019</span>-<span class="cupd">202</span>1<span class="cupd"> StarkWare Industries Ltd.

  Licensed under the Apache License, Version 2.0 (the "License").
  You may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  https://www.starkware.co/open-source-license/

  Unless required by applicable law or agreed to in writing,
  software distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions
  and limitations under the License.
*/</span></span>
<span class="marker" id="mapping-59"></span><span class="token add" data-title="source_file/comment">// SPDX-License-Identifier: Apache-2.0.</span>
pragma solidity ^<span class="marker" id="mapping-60"></span><span class="token upd" id="move-dst-2" data-title="solidity_pragma_token/solidity_version"><span class="cupd">0.</span>6.11</span>;

import "MainDispatcher.sol";

contract StarkExchange is MainDispatcher {
    string public constant VERSION = "3.0.3";

    <span class="marker" id="mapping-61"></span><span class="token upd" id="move-dst-6" data-title="contract_body/comment"><span class="cupd">// Salt for a </span>8<span class="cupd"> bit unique spread of all relevant selectors. Pre-ca</span>c<span class="cupd">l</span><span class="cupd">ulated.</span></span>
    // ---------- The following code was auto-generated. PLEASE DO NOT EDIT. ----------
    <span class="marker" id="mapping-62"></span><span class="token mv" id="move-dst-3" data-title="contract_body/state_variable_declaration">uint256 constant <span class="marker" id="mapping-63"></span><span class="token upd" id="move-dst-4" data-title="state_variable_declaration/identifier">M<span class="cupd">A</span>GI<span class="cupd">C</span><span class="cupd">_</span>SALT</span> = <span class="marker" id="mapping-64"></span><span class="token upd" id="move-dst-5" data-title="state_variable_declaration/number_literal">20188</span>;</span>
    uint256 constant <span class="marker" id="mapping-65"></span><span class="token upd" id="move-dst-7" data-title="state_variable_declaration/identifier">IDX_<span class="cupd">MA</span>P_0</span> = <span class="marker" id="mapping-66"></span><span class="token upd" id="move-dst-8" data-title="state_variable_declaration/number_literal">0x110200000021000030000005000020015200500020500200002020220000</span>;
    uint256 constant <span class="marker" id="mapping-67"></span><span class="token upd" id="move-dst-9" data-title="state_variable_declaration/identifier"><span class="cupd">IDX_MAP_</span>1</span> = <span class="marker" id="mapping-68"></span><span class="token upd" id="move-dst-10" data-title="state_variable_declaration/number_literal"><span class="cupd">0x20</span>0<span class="cupd">2</span><span class="cupd">0</span>00<span class="cupd">3</span><span class="cupd">20</span>0<span class="cupd">1</span>33<span class="cupd">001000</span>0<span class="cupd">1</span><span class="cupd">0</span><span class="cupd">10</span><span class="cupd">00</span>2<span class="cupd">0</span>3<span class="cupd">0000</span><span class="cupd">03</span><span class="cupd">1</span>2<span class="cupd">02</span>0<span class="cupd">1</span>4<span class="cupd">0</span>5000<span class="cupd">2000</span>1<span class="cupd">0</span><span class="cupd">00</span>0</span>;
    uint256 constant <span class="marker" id="mapping-69"></span><span class="token upd" id="move-dst-11" data-title="state_variable_declaration/identifier"><span class="cupd">IDX_MAP_</span>2</span> = <span class="marker" id="mapping-70"></span><span class="token upd" id="move-dst-12" data-title="state_variable_declaration/number_literal"><span class="cupd">0x</span><span class="cupd">100</span>23<span class="cupd">00</span><span class="cupd">0</span><span class="cupd">2</span><span class="cupd">000</span><span class="cupd">000</span><span class="cupd">0</span>2<span class="cupd">00</span>322<span class="cupd">00</span>26155<span class="cupd">0</span><span class="cupd">0</span>25<span class="cupd">0100</span><span class="cupd">0</span><span class="cupd">0</span>1<span class="cupd">0</span><span class="cupd">0</span>1<span class="cupd">0</span>2<span class="cupd">00200</span>3<span class="cupd">0</span>2<span class="cupd">0</span><span class="cupd">010</span><span class="cupd">000</span><span class="cupd">0</span>30</span>;
    <span class="marker" id="mapping-71"></span><span class="token add" data-title="contract_body/state_variable_declaration"><span class="marker" id="mapping-72"></span><span class="token mv" id="move-dst-24" data-title="state_variable_declaration/type_name">uint256</span> constant IDX_MAP_3 = 0x2001022000000001031050500102200001020200300004010100002002;</span>
    // ---------- End of auto-generated code. ----------

    <span class="marker" id="mapping-73"></span><span class="token add" data-title="contract_body/function_definition">function getNumSubcontracts() <span class="marker" id="mapping-74"></span><span class="token mv" id="move-dst-26" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-75"></span><span class="token mv" id="move-dst-14" data-title="function_definition/state_mutability">pure</span> <span class="marker" id="mapping-76"></span><span class="token add" data-title="function_definition/override_specifier">override</span> <span class="marker" id="mapping-77"></span><span class="token add" data-title="function_definition/return_type_definition">returns (uint256)</span> <span class="marker" id="mapping-78"></span><span class="token add" data-title="function_definition/function_body">{
        return 6;
    }</span></span>

    function <span class="marker" id="mapping-79"></span><span class="token upd" id="move-dst-21" data-title="function_definition/identifier">ma<span class="cupd">g</span>ic<span class="cupd">S</span><span class="cupd">a</span>lt</span>() internal pure <span class="marker" id="mapping-80"></span><span class="token add" data-title="function_definition/override_specifier">override</span> returns(uint256) {
        return <span class="marker" id="mapping-81"></span><span class="token add" data-title="return_statement/identifier">MAGIC_SALT</span>;
    }

    <span class="marker" id="mapping-82"></span><span class="token add" data-title="contract_body/function_definition">function handlerMapSection(<span class="marker" id="mapping-83"></span><span class="token add" data-title="function_definition/parameter"><span class="marker" id="mapping-84"></span><span class="token mv" id="move-dst-25" data-title="parameter/type_name">uint256</span> section</span>) <span class="marker" id="mapping-85"></span><span class="token mv" id="move-dst-13" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-86"></span><span class="token mv" id="move-dst-23" data-title="function_definition/state_mutability">view</span> <span class="marker" id="mapping-87"></span><span class="token add" data-title="function_definition/override_specifier">override</span> <span class="marker" id="mapping-88"></span><span class="token add" data-title="function_definition/return_type_definition">returns(uint256)</span> <span class="marker" id="mapping-89"></span><span class="token add" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-90"></span><span class="token add" data-title="function_body/if_statement">if(section == 0) {
            return IDX_MAP_0;
        }
        else if(section == 1) {
            return IDX_MAP_1;
        }
        else if(section == 2) {
            return IDX_MAP_2;
        }
        else if(section == 3) {
            return IDX_MAP_3;
        }</span>
        <span class="marker" id="mapping-91"></span><span class="token add" data-title="function_body/revert_statement">revert<span class="marker" id="mapping-92"></span><span class="token add" data-title="revert_statement/parenthesized_expression">(<span class="marker" id="mapping-93"></span><span class="token mv" id="move-dst-15" data-title="parenthesized_expression/string_literal">"BAD_IDX_MAP_SECTION"</span>)</span>;</span>
    }</span></span>

    <span class="marker" id="mapping-94"></span><span class="token mv" id="move-dst-16" data-title="contract_body/function_definition">function expectedIdByIndex(uint256 index)
        <span class="marker" id="mapping-95"></span><span class="token mv" id="move-dst-22" data-title="function_definition/visibility">internal</span> pure <span class="marker" id="mapping-96"></span><span class="token add" data-title="function_definition/override_specifier">override</span> returns (string memory id) {
        if (index == 1) {
            id = "StarkWare_AllVerifiers_2020_1";
        } else <span class="marker" id="mapping-97"></span><span class="token add" data-title="if_statement/if_statement">if (<span class="marker" id="mapping-98"></span><span class="token mv" id="move-dst-18" data-title="if_statement/binary_expression">index == 2</span>) <span class="marker" id="mapping-99"></span><span class="token mv" id="move-dst-19" data-title="if_statement/block_statement">{
            id = "StarkWare_TokensAndRamping_2020_1";
        }</span> else <span class="marker" id="mapping-100"></span><span class="token add" data-title="if_statement/if_statement">if (<span class="marker" id="mapping-101"></span><span class="token mv" id="move-dst-20" data-title="if_statement/binary_expression">index == 3</span>) <span class="marker" id="mapping-102"></span><span class="token add" data-title="if_statement/block_statement">{
            id = "StarkWare_StarkExState_2021_1";
        }</span> else <span class="marker" id="mapping-103"></span><span class="token add" data-title="if_statement/if_statement">if (<span class="marker" id="mapping-104"></span><span class="token add" data-title="if_statement/binary_expression">index == 4</span>) <span class="marker" id="mapping-105"></span><span class="token add" data-title="if_statement/block_statement">{
            id = "StarkWare_ForcedActions_2020_1";
        }</span> else <span class="marker" id="mapping-106"></span><span class="token mv" id="move-dst-17" data-title="if_statement/if_statement">if (<span class="marker" id="mapping-107"></span><span class="token add" data-title="if_statement/binary_expression">index == 5</span>) <span class="marker" id="mapping-108"></span><span class="token add" data-title="if_statement/block_statement">{
            id = "StarkWare_OnchainVaults_2021_1";
        }</span> else if (<span class="marker" id="mapping-109"></span><span class="token add" data-title="if_statement/binary_expression">index == 6</span>) {
            id = "StarkWare_ProxyUtils_2021_1";
        } else {
            revert("UNEXPECTED_INDEX");
        }</span></span></span></span>
    }</span>

    function initializationSentinel() internal view <span class="marker" id="mapping-110"></span><span class="token add" data-title="function_definition/override_specifier">override</span> {
        string memory REVERT_MSG = "INITIALIZATION_BLOCKED";
        // This initializer sets roots etc. It must not be applied twice.
        // I.e. it can run only when the state is still empty.
        require(vaultRoot == 0, REVERT_MSG);
        require(vaultTreeHeight == 0, REVERT_MSG);
        require(orderRoot == 0, REVERT_MSG);
        require(orderTreeHeight == 0, REVERT_MSG);
    }
}
</pre></div></div></div></body></html>