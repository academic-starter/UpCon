<html lang="en"><head><meta charset="utf8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>GumTree</title><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"><style type="text/css">/*
 * This file is part of GumTree.
 *
 * GumTree is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * GumTree is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public License
 * along with GumTree.  If not, see <http://www.gnu.org/licenses/>.
 *
 * Copyright 2011-2015 Jean-Rémy Falleri <jr.falleri@gmail.com>
 * Copyright 2011-2015 Floréal Morandat <florealm@gmail.com>
 */

.add {
	border: 1px solid black;
	background-color: MediumSeaGreen;
}

.del {
	border: 1px solid black;
	background-color: IndianRed;
}

.mv {
	border: 1px solid black;
	background-color: Plum;
}

.upd {
	border: 1px solid black;
	background-color: DarkOrange;
	font-weight: bold;
}

.cupd {
	font-weight: normal;
	color: DimGray;
}

.selected {
	background-color: Gold;
}

.marker {
	margin: 0;
	padding: 0;
}

div {
	margin: 0px;
	padding: 0px;
}

.pre-scrollable {
	margin: 0px;
	padding: 0px;
	font-size: 10pt;
	color: black;
	max-height: 90vh;
	background-color: white;
	border: 1px solid black;
	font-family: "Hack, Inconsolata", "Consolas", "Liberation Sans Regular", "DejaVu Sans Mono", monospace;
}

.tooltip-inner {
    max-width: none;
}
</style><script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script><script type="text/javascript">/*
 * This file is part of GumTree.
 *
 * GumTree is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * GumTree is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public License
 * along with GumTree.  If not, see <http://www.gnu.org/licenses/>.
 *
 * Copyright 2011-2015 Jean-Rémy Falleri <jr.falleri@gmail.com>
 * Copyright 2011-2015 Floréal Morandat <florealm@gmail.com>
 */

$(function(){
    let popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'))
    let popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
      return new bootstrap.Popover(popoverTriggerEl)
    })

    $("body").keypress(function (event) {
        switch (event.which) {
            case 116:
                $('html, body').animate({scrollTop: 0}, 100);
                break;
            case 98:
                $("html, body").animate({ scrollTop: $(document).height() }, 100);
                break;
            case 113:
                window.location = "/quit";
                break;
            case 108:
                window.location = "/list";
                break;
        }
    });
});
</script><script type="text/javascript">/*
 * This file is part of GumTree.
 *
 * GumTree is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * GumTree is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public License
 * along with GumTree.  If not, see <http://www.gnu.org/licenses/>.
 *
 * Copyright 2011-2015 Jean-Rémy Falleri <jr.falleri@gmail.com>
 * Copyright 2011-2015 Floréal Morandat <florealm@gmail.com>
 */

currentMapping = 0;

if (typeof String.prototype.startsWith != 'function') {
  String.prototype.startsWith = function (str){
    return this.slice(0, str.length) == str;
  };
}

function getMappedElement(eltId) {
	if (eltId.startsWith("move-src")) {
		return eltId.replace("src","dst");  	 	
  	}
  	else {
  		return eltId.replace("dst","src");
  	}
}

function nextMapping() {
	if (currentMapping == 0) {
		currentMapping = 1;
		return "#mapping-" + currentMapping.toString();
	} else {
		currentMapping++;
		
		if ($("#mapping-" + currentMapping.toString()).length > 0) {
			return "#mapping-" + currentMapping.toString();
		} else {
			currentMapping = 1;
			return "#mapping-" + currentMapping.toString();		
		}		
	}
}

function isSrc(eltId) {
	return eltId.startsWith("move-src");
}

$(function() {
    $("body").keypress(function (event) {
        switch(event.which) {
            case 110:
                const mapping = $(nextMapping());
                const pre = mapping.closest("pre");
                pre.animate({scrollTop: pre.scrollTop() + mapping.position().top - 200}, 100);
                break;
        }
    });

    // highlight
    $("span.mv.token, span.token.upd").click(function(event) {
        if ($(this).hasClass("selected")) {
            $("span.mv.token, span.token.upd").removeClass("selected");
        } else {
            $("span.mv.token, span.token.upd").removeClass("selected");
            const refElt = $("#" + getMappedElement($(this).attr("id")));
            $(this).addClass("selected");
            refElt.addClass("selected");
            const pre = refElt.closest("pre");
            console.log(pre);
            pre.animate({scrollTop: pre.scrollTop() + refElt.position().top - 200}, 100);
        }
        event.stopPropagation();
    });
    
    $("span.add.token, span.token.del").click(function(event) {
        $("span.mv.token, span.token.upd").removeClass("selected");
        event.stopPropagation();
    });

    // tooltip
    $("span.token").hover(
    	function (event) {
    		$(this).tooltip('show');
    		event.stopPropagation();
    	},
    	function (event) {
    		$(this).tooltip('hide');
    		event.stopPropagation();
    	}
    );
});
</script></head><body><div class="container-fluid"><div class="row"><div class="col"><div class="btn-toolbar justify-content-end"><div class="btn-group mr-2"><button class="btn btn-primary btn-sm" id="legend" data-bs-toggle="popover" data-bs-placement="bottom" data-bs-html="true" data-bs-content="<span class='del'>&nbsp;&nbsp;</span> deleted<br><span class='add'>&nbsp;&nbsp;</span> added<br><span class='mv'>&nbsp;&nbsp;</span> moved<br><span class='upd';>&nbsp;&nbsp;</span> updated<br>">Legend</button><button class="btn btn-primary btn-sm" id="shortcuts" data-bs-toggle="popover" data-bs-placement="bottom" data-bs-html="true" data-bs-content="<b>q</b> quit<br><b>l</b> list<br><b>n</b> next<br><b>t</b> top<br><b>b</b> bottom">Shortcuts</button></div><div class="btn-group"><a href="/list" class="btn btn-default btn-sm btn-primary">Back</a><a href="/quit" class="btn btn-default btn-sm btn-danger">Quit</a></div></div></div></div><div class="row"><div class="col-6"><h5>0x20594f0b1f549d19b5dd81590d93bd131c657e01.etherscan.io-TrueUSD.sol</h5><pre class="pre-scrollable"><span class="marker" id="mapping-1"></span><span class="token upd" id="move-src-1" data-title="source_file/comment"><span class="cupd">/</span>/<span class="cupd"> </span>File:<span class="cupd"> </span>contracts/TrueCurrencies/TrueCoinReceiver.sol</span>

pragma solidity<span class="marker" id="mapping-2"></span><span class="token upd" id="move-src-2" data-title="solidity_pragma_token/solidity_version"><span class="cupd"> 0.</span>5<span class="cupd">.1</span>3</span>;

<span class="marker" id="mapping-3"></span><span class="token del" data-title="source_file/contract_declaration">contract TrueCoinReceiver <span class="marker" id="mapping-4"></span><span class="token del" data-title="contract_declaration/contract_body">{
    <span class="marker" id="mapping-5"></span><span class="token del" data-title="contract_body/function_definition">function tokenFallback( <span class="marker" id="mapping-6"></span><span class="token mv" id="move-src-3" data-title="function_definition/parameter">address from</span>, <span class="marker" id="mapping-7"></span><span class="token mv" id="move-src-4" data-title="function_definition/parameter">uint256 value</span> ) <span class="marker" id="mapping-8"></span><span class="token mv" id="move-src-5" data-title="function_definition/visibility">external</span>;</span>
}</span></span>

<span class="marker" id="mapping-9"></span><span class="token upd" id="move-src-6" data-title="source_file/comment"><span class="cupd">/</span>/<span class="cupd"> </span>F<span class="cupd">i</span><span class="cupd">l</span><span class="cupd">e</span>:<span class="cupd"> </span><span class="cupd">contract</span>s/T<span class="cupd">r</span>u<span class="cupd">e</span>R<span class="cupd">e</span>w<span class="cupd">ar</span>d/F<span class="cupd">i</span>n<span class="cupd">a</span><span class="cupd">n</span>ci<span class="cupd">a</span><span class="cupd">l</span>O<span class="cupd">pp</span><span class="cupd">o</span><span class="cupd">r</span><span class="cupd">t</span>un<span class="cupd">i</span><span class="cupd">t</span>y<span class="cupd">.</span><span class="cupd">s</span><span class="cupd">o</span>l</span>

pragma solidity<span class="marker" id="mapping-10"></span><span class="token upd" id="move-src-7" data-title="solidity_pragma_token/solidity_version"><span class="cupd"> 0.</span>5<span class="cupd">.1</span>3</span>;

<span class="marker" id="mapping-11"></span><span class="token upd" id="move-src-8" data-title="source_file/comment"><span class="cupd">/**
 * @title</span> Fi<span class="cupd">n</span>anc<span class="cupd">i</span><span class="cupd">a</span><span class="cupd">l</span>Opport<span class="cupd">u</span>nit<span class="cupd">y
 * @de</span>v Interface for<span class="cupd"> </span>third par<span class="cupd">t</span>i<span class="cupd">e</span>s to i<span class="cupd">m</span>p<span class="cupd">l</span>ement f<span class="cupd">i</span>nanc<span class="cupd">i</span>al opportuni<span class="cupd">t</span>ies
 *
 *<span class="cupd"> </span>-- Ove<span class="cupd">r</span>view --
 * T<span class="cupd">h</span><span class="cupd">e</span><span class="cupd"> </span>goal of <span class="cupd">this contrac</span>t i<span class="cupd">s</span> to <span class="cupd">a</span>llow anyon<span class="cupd">e</span> to creat<span class="cupd">e </span>an oppor<span class="cupd">tu</span>nity<span class="cupd"></span><span class="cupd">
</span> <span class="cupd">*</span> to<span class="cupd"> </span>earn interest on TUSD. depos<span class="cupd">i</span>t() "mints" yTUSD whcih is <span class="cupd">redee</span>mabl<span class="cupd">e</span><span class="cupd"></span>
 * fo<span class="cupd">r</span> som<span class="cupd">e </span>am<span class="cupd">o</span>unt of TU<span class="cupd">S</span>D. True<span class="cupd">U</span>SD w<span class="cupd">r</span>aps <span class="cupd">t</span>his contr<span class="cupd">a</span>ctwith Tru<span class="cupd">s</span>t<span class="cupd">To</span>ken
<span class="cupd"> *</span> As<span class="cupd">s</span>urance<span class="cupd">, which p</span>rovides protecti<span class="cupd">o</span>n fr<span class="cupd">o</span>m b<span class="cupd">u</span>gs and sy<span class="cupd">s</span>tem design flaws
 * T<span class="cupd">U</span>SD is a <span class="cupd">c</span>om<span class="cupd">p</span>liant stablecoin, therefore we do not allow transfers of
 *<span class="cupd"> </span>yT<span class="cupd">US</span>D, thus t<span class="cupd">h</span>er<span class="cupd">e</span><span class="cupd"> </span>are no tra<span class="cupd">nsfe</span>r<span class="cupd"> </span>functions
 *
 * -- tokenValue() --<span class="cupd"></span>
 <span class="cupd">* </span>Thi<span class="cupd">s</span> <span class="cupd">f</span>unction r<span class="cupd">e</span>tu<span class="cupd">r</span>ns the va<span class="cupd">l</span>ue in TUSD of 1 yTUS<span class="cupd">D</span>
 * This<span class="cupd"> </span>value s<span class="cupd">h</span>ould never decrease
 *
 * -- TUSD vs yTUSD --
<span class="cupd"> </span>* yTU<span class="cupd">S</span>D represents a fixed value whic<span class="cupd">h</span> is redeema<span class="cupd">b</span>le for some amount of TUSD
 * Think of yTUSD like c<span class="cupd">T</span><span class="cupd">U</span>SD, wh<span class="cupd">e</span>re cTokens are minted and increase in<span class="cupd"> v</span>alue <span class="cupd">v</span>er<span class="cupd">s</span>us
 * <span class="cupd">t</span>he<span class="cupd"> u</span>nderly<span class="cupd">in</span>g asset as interest is<span class="cupd"> </span>accrued
 *
 * -- totalSupply()<span class="cupd"> </span>--
 * This fu<span class="cupd">n</span>ction returns the tota<span class="cupd">l</span> <span class="cupd">s</span>upply of yTUSD issued by this contract
 * It is imp<span class="cupd">o</span>rta<span class="cupd">n</span>t to tra<span class="cupd">c</span>k this value accuratl<span class="cupd">e</span>y and add/de<span class="cupd">d</span>u<span class="cupd">ct </span>t<span class="cupd">h</span>e correct
 * amoun<span class="cupd">t</span> <span class="cupd">on</span> deposit/redemptions
 *
 * -- Assumptions -<span class="cupd">-</span>
 * - tokenValu<span class="cupd">e</span> can n<span class="cupd">e</span>ver dec<span class="cupd">re</span>ase
 * -<span class="cupd"> </span>total TUSD<span class="cupd"> </span>ow<span class="cupd">e</span>d <span class="cupd">t</span>o<span class="cupd"> </span>depositors = to<span class="cupd">ke</span>nValue() * totalSupply()
 */</span>
<span class="marker" id="mapping-12"></span><span class="token del" data-title="source_file/interface_declaration">interface FinancialOpportunity {

    /**
     * @dev Returns total supply of yTUSD in this contract
     *
     * @return total supply of yTUSD in this contract
    **/
    function totalSupply() external view returns (uint);

    /**
     * @dev Exchange rate between TUSD and yTUSD
     *
     * tokenValue should never decrease
     *
     * @return TUSD / yTUSD price ratio
     */
    function tokenValue() external view returns(uint);

    /**
     * @dev deposits TrueUSD and returns yTUSD minted
     *
     * We can think of deposit as a minting function which
     * will increase totalSupply of yTUSD based on the deposit
     *
     * @param from account to transferFrom
     * @param amount amount in TUSD to deposit
     * @return yTUSD minted from this deposit
     */
    function deposit(address from, uint amount) external returns(uint);

    /**
     * @dev Redeem yTUSD for TUSD and withdraw to account
     *
     * This function should use tokenValue to calculate
     * how much TUSD is owed. This function should burn yTUSD
     * after redemption
     *
     * This function must return value in TUSD
     *
     * @param to account to transfer TUSD for
     * @param amount amount in TUSD to withdraw from finOp
     * @return TUSD amount returned from this transaction
     */
    function redeem(address to, uint amount) external returns(uint);
}</span>

<span class="marker" id="mapping-13"></span><span class="token mv" id="move-src-9" data-title="source_file/comment"><span class="marker" id="mapping-14"></span><span class="token upd" id="move-src-10" data-title="source_file/comment"><span class="cupd">/</span>/<span class="cupd"> </span>Fil<span class="cupd">e</span>:<span class="cupd"> </span><span class="cupd">o</span>p<span class="cupd">e</span><span class="cupd">n</span>z<span class="cupd">e</span>ppel<span class="cupd">in</span>-soli<span class="cupd">d</span><span class="cupd">i</span>ty/co<span class="cupd">n</span><span class="cupd">t</span>racts/tok<span class="cupd">e</span>n/<span class="cupd">E</span>RC20/<span class="cupd">I</span>ERC20.sol</span></span>

pragma solidity ^<span class="marker" id="mapping-15"></span><span class="token upd" id="move-src-11" data-title="solidity_pragma_token/solidity_version"><span class="cupd">0.</span>5<span class="cupd">.0</span></span>;

<span class="marker" id="mapping-16"></span><span class="token mv" id="move-src-12" data-title="source_file/comment"><span class="marker" id="mapping-17"></span><span class="token upd" id="move-src-13" data-title="source_file/comment"><span class="cupd">/*</span>*<span class="cupd">
 * @dev</span> <span class="cupd">I</span><span class="cupd">n</span><span class="cupd">t</span><span class="cupd">e</span>rf<span class="cupd">a</span><span class="cupd">c</span><span class="cupd">e</span><span class="cupd"> of the</span> ERC20<span class="cupd"> </span><span class="cupd">s</span><span class="cupd">tan</span><span class="cupd">d</span><span class="cupd">a</span>r<span class="cupd">d</span><span class="cupd"> </span>a<span class="cupd">s</span> <span class="cupd">d</span>e<span class="cupd">f</span><span class="cupd">i</span><span class="cupd">n</span>e<span class="cupd">d</span> <span class="cupd">i</span><span class="cupd">n</span><span class="cupd"> </span><span class="cupd">th</span><span class="cupd">e</span> EIP<span class="cupd">.</span> <span class="cupd">D</span><span class="cupd">o</span><span class="cupd">e</span><span class="cupd">s</span><span class="cupd"> </span>n<span class="cupd">ot</span><span class="cupd"> in</span>cl<span class="cupd">ud</span><span class="cupd">e</span><span class="cupd"></span>
<span class="cupd"> </span><span class="cupd">*</span><span class="cupd"> th</span><span class="cupd">e</span><span class="cupd"> </span><span class="cupd">opti</span><span class="cupd">o</span><span class="cupd">na</span><span class="cupd">l</span> <span class="cupd">f</span><span class="cupd">u</span><span class="cupd">ncti</span><span class="cupd">o</span>n<span class="cupd">s</span>;<span class="cupd"> </span>to<span class="cupd"> </span>a<span class="cupd">c</span><span class="cupd">c</span>e<span class="cupd">s</span><span class="cupd">s</span> th<span class="cupd">e</span><span class="cupd">m</span><span class="cupd"> </span><span class="cupd">s</span><span class="cupd">e</span>e {ERC2<span class="cupd">0</span><span class="cupd">D</span><span class="cupd">e</span><span class="cupd">t</span>a<span class="cupd">i</span>le<span class="cupd">d}.
</span> */</span></span>
interface IERC20 {
    /**
     * @dev Returns the amount of tokens in existence.
     */
    function totalSupply() external view returns (uint256);

    /**
     * @dev Returns the amount of tokens owned by `account`.
     */
    function balanceOf(address account) external view returns (uint256);

    /**
     * @dev Moves `amount` tokens from the caller's account to `recipient`.
     *
     * Returns a boolean value indicating whether the operation succeeded.
     *
     * Emits a {Transfer} event.
     */
    function transfer(address recipient, uint256 amount) external returns (bool);

    /**
     * @dev Returns the remaining number of tokens that `spender` will be
     * allowed to spend on behalf of `owner` through {transferFrom}. This is
     * zero by default.
     *
     * This value changes when {approve} or {transferFrom} are called.
     */
    function allowance(address owner, address spender) external view returns (uint256);

    /**
     * @dev Sets `amount` as the allowance of `spender` over the caller's tokens.
     *
     * Returns a boolean value indicating whether the operation succeeded.
     *
     * IMPORTANT: Beware that changing an allowance with this method brings the risk
     * that someone may use both the old and the new allowance by unfortunate
     * transaction ordering. One possible solution to mitigate this race
     * condition is to first reduce the spender's allowance to 0 and set the
     * desired value afterwards:
     * https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729
     *
     * Emits an {Approval} event.
     */
    function approve(address spender, uint256 amount) external returns (bool);

    /**
     * @dev Moves `amount` tokens from `sender` to `recipient` using the
     * allowance mechanism. `amount` is then deducted from the caller's
     * allowance.
     *
     * Returns a boolean value indicating whether the operation succeeded.
     *
     * Emits a {Transfer} event.
     */
    function transferFrom(address sender, address recipient, uint256 amount) external returns (bool);

    /**
     * @dev Emitted when `value` tokens are moved from one account (`from`) to
     * another (`to`).
     *
     * Note that `value` may be zero.
     */
    event Transfer(address indexed from, address indexed to, uint256 value);

    /**
     * @dev Emitted when the allowance of a `spender` for an `owner` is set by
     * a call to {approve}. `value` is the new allowance.
     */
    event Approval(address indexed owner, address indexed spender, uint256 value);
}

<span class="marker" id="mapping-18"></span><span class="token mv" id="move-src-14" data-title="source_file/comment"><span class="marker" id="mapping-19"></span><span class="token upd" id="move-src-15" data-title="source_file/comment"><span class="cupd">/</span>/<span class="cupd"> </span>Fi<span class="cupd">l</span><span class="cupd">e</span>:<span class="cupd"> </span>@tr<span class="cupd">u</span>s<span class="cupd">t</span>t<span class="cupd">o</span>ke<span class="cupd">n</span>/<span class="cupd">re</span>gis<span class="cupd">t</span>ry/c<span class="cupd">o</span>n<span class="cupd">t</span><span class="cupd">r</span>acts/R<span class="cupd">e</span>gi<span class="cupd">s</span><span class="cupd">t</span>ry.sol</span></span>

pragma solidity ^<span class="marker" id="mapping-20"></span><span class="token upd" id="move-src-16" data-title="solidity_pragma_token/solidity_version"><span class="cupd">0.</span>5.13</span>;


<span class="marker" id="mapping-21"></span><span class="token del" data-title="source_file/interface_declaration">interface RegistryClone <span class="marker" id="mapping-22"></span><span class="token del" data-title="interface_declaration/contract_body">{
    <span class="marker" id="mapping-23"></span><span class="token del" data-title="contract_body/function_definition">function syncAttributeValue(<span class="marker" id="mapping-24"></span><span class="token mv" id="move-src-17" data-title="function_definition/parameter">address <span class="marker" id="mapping-25"></span><span class="token upd" id="move-src-18" data-title="parameter/identifier">_who</span></span>, <span class="marker" id="mapping-26"></span><span class="token del" data-title="function_definition/parameter"><span class="marker" id="mapping-27"></span><span class="token mv" id="move-src-19" data-title="parameter/type_name">bytes32</span> _attribute</span>, <span class="marker" id="mapping-28"></span><span class="token mv" id="move-src-20" data-title="function_definition/parameter">uint256 <span class="marker" id="mapping-29"></span><span class="token upd" id="move-src-21" data-title="parameter/identifier">_v<span class="cupd">alue</span></span></span>) <span class="marker" id="mapping-30"></span><span class="token del" data-title="function_definition/visibility">external</span>;</span>
}</span></span>

<span class="marker" id="mapping-31"></span><span class="token del" data-title="source_file/contract_declaration">contract Registry <span class="marker" id="mapping-32"></span><span class="token del" data-title="contract_declaration/contract_body">{
    <span class="marker" id="mapping-33"></span><span class="token del" data-title="contract_body/struct_declaration">struct AttributeData {
        <span class="marker" id="mapping-34"></span><span class="token mv" id="move-src-22" data-title="struct_declaration/struct_member">uint256 <span class="marker" id="mapping-35"></span><span class="token upd" id="move-src-23" data-title="struct_member/identifier">value</span>;</span>
        <span class="marker" id="mapping-36"></span><span class="token del" data-title="struct_declaration/struct_member">bytes32 notes;</span>
        <span class="marker" id="mapping-37"></span><span class="token del" data-title="struct_declaration/struct_member">address adminAddr;</span>
        <span class="marker" id="mapping-38"></span><span class="token del" data-title="struct_declaration/struct_member">uint256 timestamp;</span>
    }</span>
    
    // never remove any storage variables
    <span class="marker" id="mapping-39"></span><span class="token del" data-title="contract_body/state_variable_declaration">address public owner;</span>
    <span class="marker" id="mapping-40"></span><span class="token del" data-title="contract_body/state_variable_declaration">address public pendingOwner;</span>
    <span class="marker" id="mapping-41"></span><span class="token del" data-title="contract_body/state_variable_declaration">bool initialized;</span>

    // Stores arbitrary attributes for users. An example use case is an IERC20
    // token that requires its users to go through a KYC/AML check - in this case
    // a validator can set an account's "hasPassedKYC/AML" attribute to 1 to indicate
    // that account can use the token. This mapping stores that value (1, in the
    // example) as well as which validator last set the value and at what time,
    // so that e.g. the check can be renewed at appropriate intervals.
    <span class="marker" id="mapping-42"></span><span class="token del" data-title="contract_body/state_variable_declaration"><span class="marker" id="mapping-43"></span><span class="token del" data-title="state_variable_declaration/type_name">mapping(<span class="marker" id="mapping-44"></span><span class="token mv" id="move-src-24" data-title="type_name/primitive_type">address</span> =&gt; <span class="marker" id="mapping-45"></span><span class="token del" data-title="type_name/type_name">mapping(bytes32 =&gt; AttributeData)</span>)</span> attributes;</span>
    // The logic governing who is allowed to set what attributes is abstracted as
    // this accessManager, so that it may be replaced by the owner as needed
    <span class="marker" id="mapping-46"></span><span class="token del" data-title="contract_body/state_variable_declaration">bytes32 constant WRITE_PERMISSION = keccak256("canWriteTo-");</span>
    <span class="marker" id="mapping-47"></span><span class="token del" data-title="contract_body/state_variable_declaration">mapping(bytes32 =&gt; RegistryClone[]) subscribers;</span>

    <span class="marker" id="mapping-48"></span><span class="token del" data-title="contract_body/event_definition">event OwnershipTransferred(
        address indexed previousOwner,
        address indexed newOwner
    );</span>
    <span class="marker" id="mapping-49"></span><span class="token del" data-title="contract_body/event_definition">event SetAttribute(address indexed who, bytes32 attribute, uint256 value, bytes32 notes, address indexed adminAddr);</span>
    <span class="marker" id="mapping-50"></span><span class="token del" data-title="contract_body/event_definition">event SetManager(address indexed oldManager, address indexed newManager);</span>
    <span class="marker" id="mapping-51"></span><span class="token del" data-title="contract_body/event_definition">event StartSubscription(bytes32 indexed attribute, RegistryClone indexed subscriber);</span>
    <span class="marker" id="mapping-52"></span><span class="token del" data-title="contract_body/event_definition">event StopSubscription(bytes32 indexed attribute, RegistryClone indexed subscriber);</span>

    // Allows a write if either a) the writer is that Registry's owner, or
    // b) the writer is writing to attribute foo and that writer already has
    // the canWriteTo-foo attribute set (in that same Registry)
    <span class="marker" id="mapping-53"></span><span class="token del" data-title="contract_body/function_definition">function confirmWrite(<span class="marker" id="mapping-54"></span><span class="token del" data-title="function_definition/parameter"><span class="marker" id="mapping-55"></span><span class="token mv" id="move-src-25" data-title="parameter/type_name">bytes32</span> _attribute</span>, <span class="marker" id="mapping-56"></span><span class="token mv" id="move-src-26" data-title="function_definition/parameter">address <span class="marker" id="mapping-57"></span><span class="token upd" id="move-src-27" data-title="parameter/identifier">_adm<span class="cupd">i</span>n</span></span>) <span class="marker" id="mapping-58"></span><span class="token mv" id="move-src-28" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-59"></span><span class="token mv" id="move-src-29" data-title="function_definition/state_mutability">view</span> <span class="marker" id="mapping-60"></span><span class="token mv" id="move-src-30" data-title="function_definition/return_type_definition">returns (bool)</span> <span class="marker" id="mapping-61"></span><span class="token del" data-title="function_definition/function_body">{
        return (_admin == owner || hasAttribute(_admin, keccak256(abi.encodePacked(WRITE_PERMISSION ^ _attribute))));
    }</span></span>

    // Writes are allowed only if the accessManager approves
    <span class="marker" id="mapping-62"></span><span class="token del" data-title="contract_body/function_definition">function setAttribute(<span class="marker" id="mapping-63"></span><span class="token mv" id="move-src-31" data-title="function_definition/parameter">address <span class="marker" id="mapping-64"></span><span class="token upd" id="move-src-32" data-title="parameter/identifier">_who</span></span>, <span class="marker" id="mapping-65"></span><span class="token del" data-title="function_definition/parameter">bytes32 _attribute</span>, <span class="marker" id="mapping-66"></span><span class="token mv" id="move-src-33" data-title="function_definition/parameter">uint256 <span class="marker" id="mapping-67"></span><span class="token upd" id="move-src-34" data-title="parameter/identifier">_v<span class="cupd">a</span><span class="cupd">lue</span></span></span>, <span class="marker" id="mapping-68"></span><span class="token del" data-title="function_definition/parameter">bytes32 _notes</span>) <span class="marker" id="mapping-69"></span><span class="token del" data-title="function_definition/visibility">public</span> <span class="marker" id="mapping-70"></span><span class="token del" data-title="function_definition/function_body">{
        require(confirmWrite(_attribute, msg.sender));
        attributes[_who][_attribute] = AttributeData(_value, _notes, msg.sender, block.timestamp);
        emit SetAttribute(_who, _attribute, _value, _notes, msg.sender);

        RegistryClone[] storage targets = subscribers[_attribute];
        uint256 index = targets.length;
        while (index --&gt; 0) {
            targets[index].syncAttributeValue(_who, _attribute, _value);
        }
    }</span></span>

    <span class="marker" id="mapping-71"></span><span class="token del" data-title="contract_body/function_definition">function subscribe(<span class="marker" id="mapping-72"></span><span class="token del" data-title="function_definition/parameter">bytes32 _attribute</span>, <span class="marker" id="mapping-73"></span><span class="token del" data-title="function_definition/parameter">RegistryClone _syncer</span>) <span class="marker" id="mapping-74"></span><span class="token mv" id="move-src-35" data-title="function_definition/visibility">external</span> <span class="marker" id="mapping-75"></span><span class="token del" data-title="function_definition/modifier_invocation">onlyOwner</span> <span class="marker" id="mapping-76"></span><span class="token del" data-title="function_definition/function_body">{
        subscribers[_attribute].push(_syncer);
        emit StartSubscription(_attribute, _syncer);
    }</span></span>

    <span class="marker" id="mapping-77"></span><span class="token del" data-title="contract_body/function_definition">function unsubscribe(<span class="marker" id="mapping-78"></span><span class="token del" data-title="function_definition/parameter">bytes32 _attribute</span>, <span class="marker" id="mapping-79"></span><span class="token mv" id="move-src-36" data-title="function_definition/parameter">uint256 <span class="marker" id="mapping-80"></span><span class="token upd" id="move-src-37" data-title="parameter/identifier">_in<span class="cupd">d</span>ex</span></span>) <span class="marker" id="mapping-81"></span><span class="token mv" id="move-src-38" data-title="function_definition/visibility">external</span> <span class="marker" id="mapping-82"></span><span class="token del" data-title="function_definition/modifier_invocation">onlyOwner</span> <span class="marker" id="mapping-83"></span><span class="token del" data-title="function_definition/function_body">{
        uint256 length = subscribers[_attribute].length;
        require(_index &lt; length);
        emit StopSubscription(_attribute, subscribers[_attribute][_index]);
        subscribers[_attribute][_index] = subscribers[_attribute][length - 1];
        subscribers[_attribute].length = length - 1;
    }</span></span>

    <span class="marker" id="mapping-84"></span><span class="token del" data-title="contract_body/function_definition">function subscriberCount(<span class="marker" id="mapping-85"></span><span class="token del" data-title="function_definition/parameter">bytes32 _attribute</span>) <span class="marker" id="mapping-86"></span><span class="token del" data-title="function_definition/visibility">public</span> <span class="marker" id="mapping-87"></span><span class="token mv" id="move-src-39" data-title="function_definition/state_mutability">view</span> <span class="marker" id="mapping-88"></span><span class="token mv" id="move-src-40" data-title="function_definition/return_type_definition">returns (uint256)</span> <span class="marker" id="mapping-89"></span><span class="token del" data-title="function_definition/function_body">{
        return subscribers[_attribute].length;
    }</span></span>

    <span class="marker" id="mapping-90"></span><span class="token del" data-title="contract_body/function_definition">function setAttributeValue(<span class="marker" id="mapping-91"></span><span class="token del" data-title="function_definition/parameter">address _who</span>, <span class="marker" id="mapping-92"></span><span class="token del" data-title="function_definition/parameter">bytes32 _attribute</span>, <span class="marker" id="mapping-93"></span><span class="token del" data-title="function_definition/parameter">uint256 _value</span>) <span class="marker" id="mapping-94"></span><span class="token del" data-title="function_definition/visibility">public</span> <span class="marker" id="mapping-95"></span><span class="token del" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-96"></span><span class="token del" data-title="function_body/expression_statement">require(confirmWrite(_attribute, msg.sender));</span>
        <span class="marker" id="mapping-97"></span><span class="token mv" id="move-src-41" data-title="function_body/expression_statement"><span class="marker" id="mapping-98"></span><span class="token del" data-title="array_access/array_access">attributes[_who]</span><span class="marker" id="mapping-99"></span><span class="token mv" id="move-src-42" data-title="array_access/[">[</span><span class="marker" id="mapping-100"></span><span class="token upd" id="move-src-43" data-title="array_access/identifier"><span class="cupd">_</span><span class="cupd">a</span>ttribute</span>] = <span class="marker" id="mapping-101"></span><span class="token del" data-title="call_expression/identifier">AttributeData</span>(<span class="marker" id="mapping-102"></span><span class="token upd" id="move-src-44" data-title="call_argument/identifier">_v<span class="cupd">a</span>lue</span>, ""<span class="marker" id="mapping-103"></span><span class="token del" data-title="call_expression/,">,</span> <span class="marker" id="mapping-104"></span><span class="token del" data-title="call_expression/call_argument">msg.sender</span><span class="marker" id="mapping-105"></span><span class="token del" data-title="call_expression/,">,</span> <span class="marker" id="mapping-106"></span><span class="token del" data-title="call_expression/call_argument">block.timestamp</span>);</span>
        <span class="marker" id="mapping-107"></span><span class="token del" data-title="function_body/emit_statement">emit SetAttribute(_who, _attribute, _value, "", msg.sender);</span>
        <span class="marker" id="mapping-108"></span><span class="token del" data-title="function_body/variable_declaration_statement">RegistryClone[] storage targets = subscribers[_attribute];</span>
        <span class="marker" id="mapping-109"></span><span class="token del" data-title="function_body/variable_declaration_statement">uint256 index = targets.length;</span>
        <span class="marker" id="mapping-110"></span><span class="token del" data-title="function_body/while_statement">while (index --&gt; 0) {
            targets[index].syncAttributeValue(_who, _attribute, _value);
        }</span>
    }</span></span>

    // Returns true if the uint256 value stored for this attribute is non-zero
    <span class="marker" id="mapping-111"></span><span class="token mv" id="move-src-45" data-title="contract_body/function_definition">function <span class="marker" id="mapping-112"></span><span class="token upd" id="move-src-46" data-title="function_definition/identifier">h<span class="cupd">a</span>sAtt<span class="cupd">r</span>ibute</span>(address <span class="marker" id="mapping-113"></span><span class="token upd" id="move-src-47" data-title="parameter/identifier">_who</span>, <span class="marker" id="mapping-114"></span><span class="token del" data-title="function_definition/parameter">bytes32 _attribute</span>) public <span class="marker" id="mapping-115"></span><span class="token mv" id="move-src-48" data-title="function_definition/state_mutability">view</span> returns (bool) {
        <span class="marker" id="mapping-116"></span><span class="token del" data-title="function_body/return_statement">return attributes[_who][_attribute].value != 0;</span>
    }</span>


    // Returns the exact value of the attribute, as well as its metadata
    <span class="marker" id="mapping-117"></span><span class="token del" data-title="contract_body/function_definition">function getAttribute(address _who, bytes32 _attribute) public view returns (uint256, bytes32, address, uint256) {
        AttributeData memory data = attributes[_who][_attribute];
        return (data.value, data.notes, data.adminAddr, data.timestamp);
    }</span>

    <span class="marker" id="mapping-118"></span><span class="token mv" id="move-src-49" data-title="contract_body/function_definition">function <span class="marker" id="mapping-119"></span><span class="token upd" id="move-src-50" data-title="function_definition/identifier">getAttri<span class="cupd">b</span>uteV<span class="cupd">al</span>ue</span>(address <span class="marker" id="mapping-120"></span><span class="token upd" id="move-src-51" data-title="parameter/identifier">_who</span><span class="marker" id="mapping-121"></span><span class="token del" data-title="function_definition/,">,</span> <span class="marker" id="mapping-122"></span><span class="token del" data-title="function_definition/parameter">bytes32 _attribute</span>) public view returns (uint256) {
        return <span class="marker" id="mapping-123"></span><span class="token del" data-title="return_statement/member_expression">attributes[_who][_attribute].value</span>;
    }</span>

    <span class="marker" id="mapping-124"></span><span class="token del" data-title="contract_body/function_definition">function getAttributeAdminAddr(address _who, bytes32 _attribute) public view returns (address) {
        return attributes[_who][_attribute].adminAddr;
    }</span>

    <span class="marker" id="mapping-125"></span><span class="token mv" id="move-src-52" data-title="contract_body/function_definition">function <span class="marker" id="mapping-126"></span><span class="token upd" id="move-src-53" data-title="function_definition/identifier">ge<span class="cupd">t</span>A<span class="cupd">t</span>trib<span class="cupd">u</span>teTimestamp</span>(<span class="marker" id="mapping-127"></span><span class="token del" data-title="function_definition/parameter">address _who</span><span class="marker" id="mapping-128"></span><span class="token del" data-title="function_definition/,">,</span> <span class="marker" id="mapping-129"></span><span class="token del" data-title="function_definition/parameter">bytes32 _attribute</span>) public view returns (uint256) {
        return <span class="marker" id="mapping-130"></span><span class="token del" data-title="return_statement/member_expression">attributes[_who][_attribute].timestamp</span>;
    }</span>

    <span class="marker" id="mapping-131"></span><span class="token del" data-title="contract_body/function_definition">function syncAttribute(<span class="marker" id="mapping-132"></span><span class="token del" data-title="function_definition/parameter">bytes32 _attribute</span>, <span class="marker" id="mapping-133"></span><span class="token del" data-title="function_definition/parameter">uint256 _startIndex</span>, <span class="marker" id="mapping-134"></span><span class="token del" data-title="function_definition/parameter"><span class="marker" id="mapping-135"></span><span class="token mv" id="move-src-54" data-title="parameter/type_name">address<span class="marker" id="mapping-136"></span><span class="token del" data-title="type_name/[">[</span><span class="marker" id="mapping-137"></span><span class="token del" data-title="type_name/]">]</span></span> calldata _addresses</span>) <span class="marker" id="mapping-138"></span><span class="token del" data-title="function_definition/visibility">external</span> <span class="marker" id="mapping-139"></span><span class="token del" data-title="function_definition/function_body">{
        RegistryClone[] storage targets = subscribers[_attribute];
        uint256 index = targets.length;
        while (index --&gt; _startIndex) {
            RegistryClone target = targets[index];
            for (uint256 i = _addresses.length; i --&gt; 0; ) {
                address who = _addresses[i];
                target.syncAttributeValue(who, _attribute, attributes[who][_attribute].value);
            }
        }
    }</span></span>

    <span class="marker" id="mapping-140"></span><span class="token del" data-title="contract_body/function_definition">function reclaimEther(address payable _to) external onlyOwner {
        _to.transfer(address(this).balance);
    }</span>

    <span class="marker" id="mapping-141"></span><span class="token del" data-title="contract_body/function_definition">function reclaimToken(IERC20 token, address _to) external onlyOwner {
        uint256 balance = token.balanceOf(address(this));
        token.transfer(_to, balance);
    }</span>

   /**
    * @dev Throws if called by any account other than the owner.
    */
    <span class="marker" id="mapping-142"></span><span class="token del" data-title="contract_body/modifier_definition">modifier onlyOwner() {
        require(msg.sender == owner, "only Owner");
        _;
    }</span>

    /**
    * @dev Modifier throws if called by any account other than the pendingOwner.
    */
    <span class="marker" id="mapping-143"></span><span class="token del" data-title="contract_body/modifier_definition">modifier onlyPendingOwner() {
        require(msg.sender == pendingOwner);
        _;
    }</span>

    /**
    * @dev Allows the current owner to set the pendingOwner address.
    * @param newOwner The address to transfer ownership to.
    */
    <span class="marker" id="mapping-144"></span><span class="token del" data-title="contract_body/function_definition">function transferOwnership(address newOwner) public onlyOwner {
        pendingOwner = newOwner;
    }</span>

    /**
    * @dev Allows the pendingOwner address to finalize the transfer.
    */
    <span class="marker" id="mapping-145"></span><span class="token del" data-title="contract_body/function_definition">function claimOwnership() public onlyPendingOwner {
        emit OwnershipTransferred(owner, pendingOwner);
        owner = pendingOwner;
        pendingOwner = address(0);
    }</span>
}</span></span>

<span class="marker" id="mapping-146"></span><span class="token upd" id="move-src-55" data-title="source_file/comment"><span class="cupd">/</span>/<span class="cupd"> </span>F<span class="cupd">i</span>l<span class="cupd">e</span>:<span class="cupd"> </span><span class="cupd">co</span><span class="cupd">n</span><span class="cupd">tract</span><span class="cupd">s</span>/T<span class="cupd">r</span><span class="cupd">ue</span>Cu<span class="cupd">r</span><span class="cupd">r</span><span class="cupd">e</span><span class="cupd">n</span><span class="cupd">c</span><span class="cupd">i</span><span class="cupd">e</span><span class="cupd">s/</span>m<span class="cupd">o</span><span class="cupd">d</span>ul<span class="cupd">a</span><span class="cupd">r</span><span class="cupd">ERC20/</span>I<span class="cupd">n</span><span class="cupd">s</span><span class="cupd">ta</span><span class="cupd">n</span><span class="cupd">t</span><span class="cupd">i</span><span class="cupd">a</span><span class="cupd">t</span><span class="cupd">a</span><span class="cupd">b</span><span class="cupd">l</span><span class="cupd">eOwnable.sol</span></span>

pragma solidity<span class="marker" id="mapping-147"></span><span class="token upd" id="move-src-56" data-title="solidity_pragma_token/solidity_version"><span class="cupd"> 0.</span>5<span class="cupd">.1</span>3</span>;


<span class="marker" id="mapping-148"></span><span class="token upd" id="move-src-57" data-title="source_file/comment"><span class="cupd">/**
 * </span><span class="cupd">@</span><span class="cupd">t</span><span class="cupd">i</span>t<span class="cupd">le</span><span class="cupd"> </span><span class="cupd">I</span><span class="cupd">n</span><span class="cupd">st</span><span class="cupd">a</span><span class="cupd">nt</span><span class="cupd">i</span><span class="cupd">a</span><span class="cupd">t</span>a<span class="cupd">b</span><span class="cupd">l</span>eO<span class="cupd">w</span><span class="cupd">n</span><span class="cupd">a</span>b<span class="cupd">le</span><span class="cupd"></span>
<span class="cupd"> </span>*<span class="cupd"> @</span><span class="cupd">d</span>ev <span class="cupd">T</span><span class="cupd">h</span>e<span class="cupd"> </span><span class="cupd">I</span><span class="cupd">n</span><span class="cupd">s</span><span class="cupd">t</span><span class="cupd">a</span><span class="cupd">n</span><span class="cupd">t</span><span class="cupd">ia</span>t<span class="cupd">ab</span>l<span class="cupd">e</span>Owna<span class="cupd">b</span><span class="cupd">l</span>e<span class="cupd"> </span><span class="cupd">c</span><span class="cupd">o</span><span class="cupd">n</span><span class="cupd">t</span>r<span class="cupd">a</span><span class="cupd">c</span><span class="cupd">t </span><span class="cupd">h</span><span class="cupd">a</span><span class="cupd">s</span> <span class="cupd">a</span><span class="cupd">n</span><span class="cupd"> </span><span class="cupd">own</span><span class="cupd">e</span>r<span class="cupd"> </span>ad<span class="cupd">d</span><span class="cupd">r</span><span class="cupd">e</span>s<span class="cupd">s</span><span class="cupd">,</span> <span class="cupd">an</span>d<span class="cupd"> </span><span class="cupd">p</span>r<span class="cupd">o</span>v<span class="cupd">i</span><span class="cupd">des</span><span class="cupd"> </span><span class="cupd">b</span><span class="cupd">a</span>s<span class="cupd">i</span><span class="cupd">c</span> <span class="cupd">a</span>u<span class="cupd">t</span>h<span class="cupd">o</span>r<span class="cupd">izati</span><span class="cupd">o</span><span class="cupd">n</span><span class="cupd"> c</span><span class="cupd">o</span><span class="cupd">nt</span><span class="cupd">r</span><span class="cupd">o</span><span class="cupd">l</span><span class="cupd">
</span> *<span class="cupd"> </span><span class="cupd">f</span><span class="cupd">u</span>n<span class="cupd">c</span><span class="cupd">ti</span>o<span class="cupd">n</span>s<span class="cupd">, th</span><span class="cupd">i</span>s <span class="cupd">s</span><span class="cupd">im</span><span class="cupd">p</span><span class="cupd">l</span><span class="cupd">i</span><span class="cupd">f</span><span class="cupd">i</span><span class="cupd">e</span><span class="cupd">s </span><span class="cupd">the implementat</span><span class="cupd">ion </span>of<span class="cupd"> "</span><span class="cupd">u</span><span class="cupd">s</span><span class="cupd">er</span><span class="cupd"> </span><span class="cupd">pe</span><span class="cupd">rm</span><span class="cupd">i</span><span class="cupd">s</span><span class="cupd">s</span><span class="cupd">i</span>o<span class="cupd">ns</span><span class="cupd">"</span><span class="cupd">.</span>
 */</span>
<span class="marker" id="mapping-149"></span><span class="token del" data-title="source_file/contract_declaration">contract InstantiatableOwnable <span class="marker" id="mapping-150"></span><span class="token del" data-title="contract_declaration/contract_body">{
    <span class="marker" id="mapping-151"></span><span class="token del" data-title="contract_body/state_variable_declaration">address public owner;</span>

    <span class="marker" id="mapping-152"></span><span class="token del" data-title="contract_body/event_definition">event OwnershipTransferred(
        address indexed previousOwner,
        address indexed newOwner
    );</span>

    /**
     * @dev The InstantiatableOwnable constructor sets the original `owner` of the contract to the sender
     * account.
     */
    <span class="marker" id="mapping-153"></span><span class="token del" data-title="contract_body/constructor_definition">constructor() public {
        owner = msg.sender;
    }</span>

    /**
     * @dev Throws if called by any account other than the owner.
     */
    <span class="marker" id="mapping-154"></span><span class="token del" data-title="contract_body/modifier_definition">modifier onlyOwner() {
        require(msg.sender == owner);
        _;
    }</span>

    /**
     * @dev Allows the current owner to transfer control of the contract to a newOwner.
     * @param newOwner The address to transfer ownership to.
     */
    <span class="marker" id="mapping-155"></span><span class="token del" data-title="contract_body/function_definition">function transferOwnership(<span class="marker" id="mapping-156"></span><span class="token mv" id="move-src-58" data-title="function_definition/parameter">address <span class="marker" id="mapping-157"></span><span class="token upd" id="move-src-59" data-title="parameter/identifier">n<span class="cupd">e</span>wOwner</span></span>) <span class="marker" id="mapping-158"></span><span class="token mv" id="move-src-60" data-title="function_definition/visibility">public</span> <span class="marker" id="mapping-159"></span><span class="token del" data-title="function_definition/modifier_invocation">onlyOwner</span> <span class="marker" id="mapping-160"></span><span class="token del" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-161"></span><span class="token mv" id="move-src-61" data-title="function_body/expression_statement">require(<span class="marker" id="mapping-162"></span><span class="token upd" id="move-src-62" data-title="binary_expression/identifier">n<span class="cupd">e</span>wOw<span class="cupd">n</span><span class="cupd">er</span></span> != address(0));</span>
        <span class="marker" id="mapping-163"></span><span class="token del" data-title="function_body/emit_statement">emit OwnershipTransferred(<span class="marker" id="mapping-164"></span><span class="token mv" id="move-src-63" data-title="emit_statement/call_argument">owner</span>, <span class="marker" id="mapping-165"></span><span class="token del" data-title="emit_statement/call_argument">newOwner</span>);</span>
        <span class="marker" id="mapping-166"></span><span class="token del" data-title="function_body/expression_statement">owner = newOwner;</span>
    }</span></span>
}</span></span>

<span class="marker" id="mapping-167"></span><span class="token del" data-title="source_file/comment">// File: contracts/TrueCurrencies/modularERC20/Claimable.sol</span>

pragma solidity<span class="marker" id="mapping-168"></span><span class="token upd" id="move-src-64" data-title="solidity_pragma_token/solidity_version"><span class="cupd"> 0.</span>5<span class="cupd">.1</span>3</span>;



<span class="marker" id="mapping-169"></span><span class="token upd" id="move-src-65" data-title="source_file/comment"><span class="cupd">/**
 * @title</span> <span class="cupd">Clai</span>mab<span class="cupd">l</span><span class="cupd">e
 * @dev</span> <span class="cupd">E</span><span class="cupd">xt</span>ensi<span class="cupd">o</span>n for<span class="cupd"> </span>t<span class="cupd">h</span>e In<span class="cupd">s</span>tantiat<span class="cupd">a</span>bleOwn<span class="cupd">a</span>ble<span class="cupd"> </span>contract<span class="cupd">,</span> whe<span class="cupd">r</span>e th<span class="cupd">e own</span>ersh<span class="cupd">i</span>p need<span class="cupd">s t</span>o<span class="cupd"> </span>b<span class="cupd">e cla</span><span class="cupd">i</span>me<span class="cupd">d.
</span> * This <span class="cupd">a</span>ll<span class="cupd">o</span><span class="cupd">ws </span><span class="cupd">t</span>h<span class="cupd">e</span> new<span class="cupd"> </span>ow<span class="cupd">ner </span>to ac<span class="cupd">c</span>ep<span class="cupd">t</span> <span class="cupd">t</span><span class="cupd">he </span>transf<span class="cupd">er.</span>
 */</span>
<span class="marker" id="mapping-170"></span><span class="token del" data-title="source_file/contract_declaration">contract Claimable is <span class="marker" id="mapping-171"></span><span class="token del" data-title="contract_declaration/inheritance_specifier">InstantiatableOwnable</span> <span class="marker" id="mapping-172"></span><span class="token del" data-title="contract_declaration/contract_body">{
    <span class="marker" id="mapping-173"></span><span class="token del" data-title="contract_body/state_variable_declaration">address public pendingOwner;</span>

    /**
     * @dev Modifier throws if called by any account other than the pendingOwner.
     */
    <span class="marker" id="mapping-174"></span><span class="token mv" id="move-src-66" data-title="contract_body/modifier_definition">modifier onlyPendingOwner() {
        require(msg.sender == pendingOwner);
        _;
    }</span>

    /**
     * @dev Allows the current owner to set the pendingOwner address.
     * @param newOwner The address to transfer ownership to.
     */
    <span class="marker" id="mapping-175"></span><span class="token del" data-title="contract_body/function_definition">function transferOwnership(address newOwner) public onlyOwner {
        pendingOwner = newOwner;
    }</span>

    /**
     * @dev Allows the pendingOwner address to finalize the transfer.
     */
    <span class="marker" id="mapping-176"></span><span class="token del" data-title="contract_body/function_definition">function claimOwnership() public onlyPendingOwner {
        emit OwnershipTransferred(owner, pendingOwner);
        owner = pendingOwner;
        pendingOwner = address(0);
    }</span>
}</span></span>

<span class="marker" id="mapping-177"></span><span class="token del" data-title="source_file/comment">// File: openzeppelin-solidity/contracts/math/SafeMath.sol</span>

<span class="marker" id="mapping-178"></span><span class="token mv" id="move-src-67" data-title="source_file/pragma_directive">pragma solidity ^<span class="marker" id="mapping-179"></span><span class="token upd" id="move-src-68" data-title="solidity_pragma_token/solidity_version"><span class="cupd">0.</span>5.0</span>;</span>

<span class="marker" id="mapping-180"></span><span class="token mv" id="move-src-69" data-title="source_file/comment">/**
 * @dev Wrappers over Solidity's arithmetic operations with added overflow
 * checks.
 *
 * Arithmetic operations in Solidity wrap on overflow. This can easily result
 * in bugs, because programmers usually assume that an overflow raises an
 * error, which is the standard behavior in high level programming languages.
 * `SafeMath` restores this intuition by reverting the transaction when an
 * operation overflows.
 *
 * Using this library instead of the unchecked operations eliminates an entire
 * class of bugs, so it's recommended to use it always.
 */</span>
<span class="marker" id="mapping-181"></span><span class="token mv" id="move-src-70" data-title="source_file/library_declaration">library SafeMath {
    <span class="marker" id="mapping-182"></span><span class="token upd" id="move-src-71" data-title="contract_body/comment"><span class="cupd">/**
     * @dev Returns the addition of two unsigned integers, reverting on
     * overflow.
     *
     * Counterpart to Solidity's `+` operator.
     *
     * Requirements:
</span><span class="cupd">     * - Addition cannot overflow.</span>
     */</span>
    function add(uint256 a, uint256 b) internal pure returns (uint256) {
        uint256 c = a + b;
        require(c &gt;= a, "SafeMath: addition overflow");

        return c;
    }

    <span class="marker" id="mapping-183"></span><span class="token upd" id="move-src-72" data-title="contract_body/comment"><span class="cupd">/**
     * @dev Returns the subtraction of two unsigned integers, reverting on
     * overflow (when the result is negative).
     *
     * Counterpart to Solidity's `-` operator.
     *
     * Requirements:
</span><span class="cupd">     * - Subtraction cannot overflow.</span>
     */</span>
    function sub(uint256 a, uint256 b) internal pure returns (uint256) {
        return sub(a, b, "SafeMath: subtraction overflow");
    }

    <span class="marker" id="mapping-184"></span><span class="token upd" id="move-src-73" data-title="contract_body/comment"><span class="cupd">/**
     * @dev Returns the subtraction of two unsigned integers, reverting with custom message on
     * overflow (when the result is negative).
     *
     * Counterpart to Solidity's `-` operator.
     *
     * Requirements:
</span><span class="cupd">     * - Subtraction cannot overflow.</span>
     *
     * _Available since v2.4.0._
     */</span>
    function sub(uint256 a, uint256 b, string memory errorMessage) internal pure returns (uint256) {
        require(b &lt;= a, errorMessage);
        uint256 c = a - b;

        return c;
    }

    <span class="marker" id="mapping-185"></span><span class="token upd" id="move-src-74" data-title="contract_body/comment"><span class="cupd">/**
     * @dev Returns the multiplication of two unsigned integers, reverting on
     * overflow.
     *
     * Counterpart to Solidity's `*` operator.
     *
     * Requirements:
</span><span class="cupd">     * - Multiplication cannot overflow.</span>
     */</span>
    function mul(uint256 a, uint256 b) internal pure returns (uint256) {
        // Gas optimization: this is cheaper than requiring 'a' not being zero, but the
        // benefit is lost if 'b' is also tested.
        // See: https://github.com/OpenZeppelin/openzeppelin-contracts/pull/522
        if (a == 0) {
            return 0;
        }

        uint256 c = a * b;
        require(c / a == b, "SafeMath: multiplication overflow");

        return c;
    }

    <span class="marker" id="mapping-186"></span><span class="token upd" id="move-src-75" data-title="contract_body/comment"><span class="cupd">/**
     * @dev Returns the integer division of two unsigned integers. Reverts on
     * division by zero. The result is rounded towards zero.
     *
     * Counterpart to Solidity's `/` operator. Note: this function uses a
     * `revert` opcode (which leaves remaining gas untouched) while Solidity
     * uses an invalid opcode to revert (consuming all remaining gas).
     *
     * Requirements:</span><span class="cupd">
     * - The divisor cannot be zero</span>.
     */</span>
    function div(uint256 a, uint256 b) internal pure returns (uint256) {
        return div(a, b, "SafeMath: division by zero");
    }

    <span class="marker" id="mapping-187"></span><span class="token upd" id="move-src-76" data-title="contract_body/comment"><span class="cupd">/**
     * @dev Returns the integer division of two unsigned integers. Reverts with custom message on
     * division by zero. The result is rounded towards zero.
     *
     * Counterpart to Solidity's `/` operator. Note: this function uses a
     * `revert` opcode (which leaves remaining gas untouched) while Solidity
     * uses an invalid opcode to revert (consuming all remaining gas).
     *
     * Requirements:</span><span class="cupd">
     * - The divisor cannot be zer</span>o.
     *
     * _Available since v2.4.0._
     */</span>
    function div(uint256 a, uint256 b, string memory errorMessage) internal pure returns (uint256) {
        <span class="marker" id="mapping-188"></span><span class="token del" data-title="function_body/comment">// Solidity only automatically asserts when dividing by 0</span>
        require(b &gt; 0, errorMessage);
        uint256 c = a / b;
        // assert(a == b * c + a % b); // There is no case in which this doesn't hold

        return c;
    }

    <span class="marker" id="mapping-189"></span><span class="token upd" id="move-src-77" data-title="contract_body/comment"><span class="cupd">/**
     * @dev Returns the remainder of dividing two unsigned integers. (unsigned integer modulo),
     * Reverts when dividing by zero.
     *
     * Counterpart to Solidity's `%` operator. This function uses a `revert`
     * opcode (which leaves remaining gas untouched) while Solidity uses an
     * invalid opcode to revert (consuming all remaining gas).
     *
     * Requirements:</span><span class="cupd">
     * - The divisor cannot be zero</span>.
     */</span>
    function mod(uint256 a, uint256 b) internal pure returns (uint256) {
        return mod(a, b, "SafeMath: modulo by zero");
    }

    <span class="marker" id="mapping-190"></span><span class="token upd" id="move-src-78" data-title="contract_body/comment"><span class="cupd">/**
     * @dev Returns the remainder of dividing two unsigned integers. (unsigned integer modulo),
     * Reverts with custom message when dividing by zero.
     *
     * Counterpart to Solidity's `%` operator. This function uses a `revert`
     * opcode (which leaves remaining gas untouched) while Solidity uses an
     * invalid opcode to revert (consuming all remaining gas).
     *
     * Requirements:</span><span class="cupd">
     * - The divisor cannot be zer</span>o.
     *
     * _Available since v2.4.0._
     */</span>
    function mod(uint256 a, uint256 b, string memory errorMessage) internal pure returns (uint256) {
        require(b != 0, errorMessage);
        return a % b;
    }
}</span>

<span class="marker" id="mapping-191"></span><span class="token del" data-title="source_file/comment">// File: contracts/TrueCurrencies/modularERC20/BalanceSheet.sol</span>

pragma solidity<span class="marker" id="mapping-192"></span><span class="token upd" id="move-src-79" data-title="solidity_pragma_token/solidity_version"><span class="cupd"> 0.</span>5<span class="cupd">.1</span>3</span>;



<span class="marker" id="mapping-193"></span><span class="token upd" id="move-src-80" data-title="source_file/comment"><span class="cupd">/</span>/<span class="cupd"> </span>A<span class="cupd"> </span>w<span class="cupd">r</span><span class="cupd">a</span>pp<span class="cupd">e</span><span class="cupd">r</span><span class="cupd"> </span><span class="cupd">a</span><span class="cupd">r</span><span class="cupd">o</span><span class="cupd">u</span><span class="cupd">n</span><span class="cupd">d </span><span class="cupd">the</span><span class="cupd"> ba</span><span class="cupd">l</span><span class="cupd">a</span><span class="cupd">n</span>ceO<span class="cupd">f m</span><span class="cupd">a</span>ppi<span class="cupd">n</span>g.</span>
<span class="marker" id="mapping-194"></span><span class="token del" data-title="source_file/contract_declaration">contract BalanceSheet is <span class="marker" id="mapping-195"></span><span class="token del" data-title="contract_declaration/inheritance_specifier">Claimable</span> <span class="marker" id="mapping-196"></span><span class="token del" data-title="contract_declaration/contract_body">{
    <span class="marker" id="mapping-197"></span><span class="token del" data-title="contract_body/using_directive">using SafeMath for uint256;</span>

    <span class="marker" id="mapping-198"></span><span class="token mv" id="move-src-81" data-title="contract_body/state_variable_declaration">mapping (address =&gt; uint256) <span class="marker" id="mapping-199"></span><span class="token del" data-title="state_variable_declaration/visibility">public</span> <span class="marker" id="mapping-200"></span><span class="token upd" id="move-src-82" data-title="state_variable_declaration/identifier"><span class="cupd">balance</span>Of</span>;</span>

    <span class="marker" id="mapping-201"></span><span class="token del" data-title="contract_body/function_definition">function addBalance(<span class="marker" id="mapping-202"></span><span class="token mv" id="move-src-83" data-title="function_definition/parameter">address <span class="marker" id="mapping-203"></span><span class="token upd" id="move-src-84" data-title="parameter/identifier">_<span class="cupd">a</span>ddr</span></span>, <span class="marker" id="mapping-204"></span><span class="token del" data-title="function_definition/parameter">uint256 _value</span>) <span class="marker" id="mapping-205"></span><span class="token del" data-title="function_definition/visibility">public</span> <span class="marker" id="mapping-206"></span><span class="token del" data-title="function_definition/modifier_invocation">onlyOwner</span> <span class="marker" id="mapping-207"></span><span class="token del" data-title="function_definition/function_body">{
        balanceOf[_addr] = balanceOf[_addr].add(_value);
    }</span></span>

    <span class="marker" id="mapping-208"></span><span class="token del" data-title="contract_body/function_definition">function subBalance(<span class="marker" id="mapping-209"></span><span class="token mv" id="move-src-85" data-title="function_definition/parameter">address <span class="marker" id="mapping-210"></span><span class="token upd" id="move-src-86" data-title="parameter/identifier">_<span class="cupd">a</span>ddr</span></span>, <span class="marker" id="mapping-211"></span><span class="token del" data-title="function_definition/parameter">uint256 _value</span>) <span class="marker" id="mapping-212"></span><span class="token mv" id="move-src-87" data-title="function_definition/visibility">public</span> <span class="marker" id="mapping-213"></span><span class="token mv" id="move-src-88" data-title="function_definition/modifier_invocation">onlyOwner</span> <span class="marker" id="mapping-214"></span><span class="token del" data-title="function_definition/function_body">{
        balanceOf[_addr] = balanceOf[_addr].sub(_value);
    }</span></span>

    <span class="marker" id="mapping-215"></span><span class="token del" data-title="contract_body/function_definition">function setBalance(<span class="marker" id="mapping-216"></span><span class="token mv" id="move-src-89" data-title="function_definition/parameter">address <span class="marker" id="mapping-217"></span><span class="token upd" id="move-src-90" data-title="parameter/identifier">_addr</span></span>, <span class="marker" id="mapping-218"></span><span class="token del" data-title="function_definition/parameter">uint256 _value</span>) <span class="marker" id="mapping-219"></span><span class="token mv" id="move-src-91" data-title="function_definition/visibility">public</span> <span class="marker" id="mapping-220"></span><span class="token mv" id="move-src-92" data-title="function_definition/modifier_invocation">onlyOwner</span> <span class="marker" id="mapping-221"></span><span class="token del" data-title="function_definition/function_body">{
        balanceOf[_addr] = _value;
    }</span></span>
}</span></span>

<span class="marker" id="mapping-222"></span><span class="token del" data-title="source_file/comment">// File: contracts/TrueCurrencies/modularERC20/AllowanceSheet.sol</span>

pragma solidity<span class="marker" id="mapping-223"></span><span class="token upd" id="move-src-93" data-title="solidity_pragma_token/solidity_version"><span class="cupd"> 0.</span>5<span class="cupd">.1</span>3</span>;



<span class="marker" id="mapping-224"></span><span class="token upd" id="move-src-94" data-title="source_file/comment"><span class="cupd">/</span>/<span class="cupd"> </span>A<span class="cupd"> </span><span class="cupd">w</span><span class="cupd">r</span><span class="cupd">a</span><span class="cupd">p</span>p<span class="cupd">e</span><span class="cupd">r</span><span class="cupd"> </span><span class="cupd">a</span><span class="cupd">r</span><span class="cupd">o</span><span class="cupd">un</span><span class="cupd">d</span><span class="cupd"> </span><span class="cupd">t</span><span class="cupd">he </span><span class="cupd">a</span><span class="cupd">ll</span><span class="cupd">o</span><span class="cupd">w</span><span class="cupd">an</span><span class="cupd">c</span><span class="cupd">e</span>O<span class="cupd">f</span><span class="cupd"> </span><span class="cupd">m</span><span class="cupd">a</span><span class="cupd">p</span><span class="cupd">p</span><span class="cupd">i</span><span class="cupd">n</span>g.</span>
<span class="marker" id="mapping-225"></span><span class="token del" data-title="source_file/contract_declaration">contract AllowanceSheet is <span class="marker" id="mapping-226"></span><span class="token del" data-title="contract_declaration/inheritance_specifier">Claimable</span> <span class="marker" id="mapping-227"></span><span class="token del" data-title="contract_declaration/contract_body">{
    <span class="marker" id="mapping-228"></span><span class="token del" data-title="contract_body/using_directive">using SafeMath for uint256;</span>

    <span class="marker" id="mapping-229"></span><span class="token mv" id="move-src-95" data-title="contract_body/state_variable_declaration">mapping (address =&gt; mapping (address =&gt; uint256)) <span class="marker" id="mapping-230"></span><span class="token del" data-title="state_variable_declaration/visibility">public</span> <span class="marker" id="mapping-231"></span><span class="token upd" id="move-src-96" data-title="state_variable_declaration/identifier"><span class="cupd">allowance</span>Of</span>;</span>

    <span class="marker" id="mapping-232"></span><span class="token del" data-title="contract_body/function_definition">function addAllowance(<span class="marker" id="mapping-233"></span><span class="token mv" id="move-src-97" data-title="function_definition/parameter">address <span class="marker" id="mapping-234"></span><span class="token upd" id="move-src-98" data-title="parameter/identifier">_tok<span class="cupd">e</span>nHolder</span></span>, <span class="marker" id="mapping-235"></span><span class="token mv" id="move-src-99" data-title="function_definition/parameter">address <span class="marker" id="mapping-236"></span><span class="token upd" id="move-src-100" data-title="parameter/identifier">_<span class="cupd">s</span>pen<span class="cupd">d</span>er</span></span>, <span class="marker" id="mapping-237"></span><span class="token del" data-title="function_definition/parameter">uint256 _value</span>) <span class="marker" id="mapping-238"></span><span class="token del" data-title="function_definition/visibility">public</span> <span class="marker" id="mapping-239"></span><span class="token del" data-title="function_definition/modifier_invocation">onlyOwner</span> <span class="marker" id="mapping-240"></span><span class="token del" data-title="function_definition/function_body">{
        allowanceOf[_tokenHolder][_spender] = allowanceOf[_tokenHolder][_spender].add(_value);
    }</span></span>

    <span class="marker" id="mapping-241"></span><span class="token del" data-title="contract_body/function_definition">function subAllowance(<span class="marker" id="mapping-242"></span><span class="token del" data-title="function_definition/parameter">address _tokenHolder</span>, <span class="marker" id="mapping-243"></span><span class="token mv" id="move-src-101" data-title="function_definition/parameter">address <span class="marker" id="mapping-244"></span><span class="token upd" id="move-src-102" data-title="parameter/identifier">_s<span class="cupd">p</span><span class="cupd">en</span>der</span></span>, <span class="marker" id="mapping-245"></span><span class="token del" data-title="function_definition/parameter">uint256 _value</span>) <span class="marker" id="mapping-246"></span><span class="token del" data-title="function_definition/visibility">public</span> <span class="marker" id="mapping-247"></span><span class="token del" data-title="function_definition/modifier_invocation">onlyOwner</span> <span class="marker" id="mapping-248"></span><span class="token del" data-title="function_definition/function_body">{
        allowanceOf[_tokenHolder][_spender] = allowanceOf[_tokenHolder][_spender].sub(_value);
    }</span></span>

    <span class="marker" id="mapping-249"></span><span class="token del" data-title="contract_body/function_definition">function setAllowance(<span class="marker" id="mapping-250"></span><span class="token mv" id="move-src-103" data-title="function_definition/parameter">address <span class="marker" id="mapping-251"></span><span class="token upd" id="move-src-104" data-title="parameter/identifier">_<span class="cupd">t</span>okenHolder</span></span>, <span class="marker" id="mapping-252"></span><span class="token mv" id="move-src-105" data-title="function_definition/parameter">address <span class="marker" id="mapping-253"></span><span class="token upd" id="move-src-106" data-title="parameter/identifier">_spender</span></span>, <span class="marker" id="mapping-254"></span><span class="token del" data-title="function_definition/parameter">uint256 _value</span>) <span class="marker" id="mapping-255"></span><span class="token del" data-title="function_definition/visibility">public</span> <span class="marker" id="mapping-256"></span><span class="token mv" id="move-src-107" data-title="function_definition/modifier_invocation">onlyOwner</span> <span class="marker" id="mapping-257"></span><span class="token del" data-title="function_definition/function_body">{
        allowanceOf[_tokenHolder][_spender] = _value;
    }</span></span>
}</span></span>

<span class="marker" id="mapping-258"></span><span class="token del" data-title="source_file/comment">// File: contracts/TrueCurrencies/ProxyStorage.sol</span>

pragma solidity<span class="marker" id="mapping-259"></span><span class="token upd" id="move-src-108" data-title="solidity_pragma_token/solidity_version"><span class="cupd"> 0.</span>5<span class="cupd">.1</span>3</span>;





<span class="marker" id="mapping-260"></span><span class="token upd" id="move-src-109" data-title="source_file/comment"><span class="cupd">/*</span><span class="cupd"></span>
<span class="cupd">D</span>ef<span class="cupd">i</span><span class="cupd">n</span><span class="cupd">es</span><span class="cupd"> t</span><span class="cupd">h</span><span class="cupd">e</span><span class="cupd"> </span><span class="cupd">st</span><span class="cupd">o</span><span class="cupd">r</span><span class="cupd">a</span><span class="cupd">g</span><span class="cupd">e</span> la<span class="cupd">y</span>o<span class="cupd">u</span><span class="cupd">t</span><span class="cupd"> </span>o<span class="cupd">f</span> <span class="cupd">t</span><span class="cupd">h</span><span class="cupd">e</span><span class="cupd"> t</span>o<span class="cupd">k</span><span class="cupd">en</span><span class="cupd"> </span>im<span class="cupd">pl</span>e<span class="cupd">m</span>e<span class="cupd">n</span><span class="cupd">t</span><span class="cupd">a</span><span class="cupd">t</span><span class="cupd">i</span>o<span class="cupd">n</span> c<span class="cupd">o</span>n<span class="cupd">tr</span>a<span class="cupd">c</span><span class="cupd">t.</span> <span class="cupd">A</span>n<span class="cupd">y</span> <span class="cupd">n</span>ewl<span class="cupd">y</span><span class="cupd"> </span><span class="cupd">d</span><span class="cupd">e</span>c<span class="cupd">l</span>a<span class="cupd">r</span><span class="cupd">ed</span>
<span class="cupd">stat</span>e<span class="cupd"> </span>va<span class="cupd">r</span><span class="cupd">i</span>a<span class="cupd">b</span>l<span class="cupd">e</span>s <span class="cupd">i</span><span class="cupd">n</span> <span class="cupd">f</span>u<span class="cupd">t</span><span class="cupd">u</span><span class="cupd">r</span><span class="cupd">e</span><span class="cupd"> </span>up<span class="cupd">gr</span><span class="cupd">ad</span><span class="cupd">e</span><span class="cupd">s</span> s<span class="cupd">ho</span><span class="cupd">ul</span>d <span class="cupd">be</span> a<span class="cupd">p</span>p<span class="cupd">en</span><span class="cupd">d</span><span class="cupd">e</span><span class="cupd">d</span><span class="cupd"> </span><span class="cupd">t</span><span class="cupd">o</span> <span class="cupd">t</span><span class="cupd">he</span> <span class="cupd">b</span><span class="cupd">o</span>tto<span class="cupd">m</span>.<span class="cupd"> </span>N<span class="cupd">e</span>v<span class="cupd">e</span><span class="cupd">r </span>rem<span class="cupd">o</span><span class="cupd">v</span><span class="cupd">e </span><span class="cupd">s</span><span class="cupd">t</span><span class="cupd">a</span><span class="cupd">t</span>e<span class="cupd"> </span><span class="cupd">v</span><span class="cupd">a</span><span class="cupd">r</span>i<span class="cupd">a</span><span class="cupd">b</span><span class="cupd">l</span>e<span class="cupd">s</span><span class="cupd"></span><span class="cupd">
</span>f<span class="cupd">rom</span> <span class="cupd">t</span><span class="cupd">h</span>is<span class="cupd"> </span><span class="cupd">l</span><span class="cupd">i</span><span class="cupd">s</span><span class="cupd">t</span>
 */</span>
<span class="marker" id="mapping-261"></span><span class="token mv" id="move-src-110" data-title="source_file/contract_declaration">contract ProxyStorage {
    address public owner;
    address public pendingOwner;

    bool initialized;

    <span class="marker" id="mapping-262"></span><span class="token del" data-title="contract_body/state_variable_declaration">BalanceSheet balances_Deprecated;</span>
    <span class="marker" id="mapping-263"></span><span class="token del" data-title="contract_body/state_variable_declaration">AllowanceSheet allowances_Deprecated;</span>

    uint256 <span class="marker" id="mapping-264"></span><span class="token upd" id="move-src-111" data-title="state_variable_declaration/identifier"><span class="cupd">totalSupply</span>_</span>;

    bool private paused_Deprecated = false;
    address private globalPause_Deprecated;

    uint256 public burnMin = 0;
    uint256 public burnMax = 0;

    <span class="marker" id="mapping-265"></span><span class="token del" data-title="contract_body/state_variable_declaration">Registry public registry;</span>

    string name_Deprecated;
    string symbol_Deprecated;

    <span class="marker" id="mapping-266"></span><span class="token del" data-title="contract_body/state_variable_declaration">uint[] gasRefundPool_Deprecated;</span>
    uint256 private redemptionAddressCount_Deprecated;
    uint256 <span class="marker" id="mapping-267"></span><span class="token del" data-title="state_variable_declaration/visibility">public</span> <span class="marker" id="mapping-268"></span><span class="token upd" id="move-src-112" data-title="state_variable_declaration/identifier"><span class="cupd">minimumGasPriceForFutureRefunds</span></span>;

    <span class="marker" id="mapping-269"></span><span class="token del" data-title="contract_body/state_variable_declaration">mapping (address =&gt; uint256) _balanceOf;</span>
    <span class="marker" id="mapping-270"></span><span class="token del" data-title="contract_body/state_variable_declaration">mapping (address =&gt; mapping (address =&gt; uint256)) _allowance;</span>
    mapping (bytes32 =&gt; mapping (address =&gt; uint256)) <span class="marker" id="mapping-271"></span><span class="token upd" id="move-src-113" data-title="state_variable_declaration/identifier"><span class="cupd">attributes</span></span>;

    <span class="marker" id="mapping-272"></span><span class="token mv" id="move-src-114" data-title="contract_body/comment"><span class="marker" id="mapping-273"></span><span class="token upd" id="move-src-115" data-title="contract_body/comment"><span class="cupd">/</span>/<span class="cupd"> </span><span class="cupd">r</span><span class="cupd">e</span>w<span class="cupd">a</span><span class="cupd">r</span><span class="cupd">d</span><span class="cupd"> </span><span class="cupd">to</span><span class="cupd">ke</span><span class="cupd">n</span><span class="cupd"> </span><span class="cupd">s</span><span class="cupd">t</span><span class="cupd">o</span><span class="cupd">r</span><span class="cupd">a</span><span class="cupd">ge</span></span></span>
    <span class="marker" id="mapping-274"></span><span class="token del" data-title="contract_body/state_variable_declaration"><span class="marker" id="mapping-275"></span><span class="token del" data-title="state_variable_declaration/type_name">mapping(<span class="marker" id="mapping-276"></span><span class="token mv" id="move-src-116" data-title="type_name/primitive_type">address</span> =&gt; <span class="marker" id="mapping-277"></span><span class="token del" data-title="type_name/type_name">FinancialOpportunity</span>)</span> finOps;</span>
    mapping(address =&gt; mapping(address =&gt; uint256)) <span class="marker" id="mapping-278"></span><span class="token upd" id="move-src-117" data-title="state_variable_declaration/identifier"><span class="cupd">finOpBalances</span></span>;
    mapping(address =&gt; uint256) <span class="marker" id="mapping-279"></span><span class="token upd" id="move-src-118" data-title="state_variable_declaration/identifier"><span class="cupd">finOpSupply</span></span>;

    <span class="marker" id="mapping-280"></span><span class="token del" data-title="contract_body/comment">// true reward allocation</span>
    <span class="marker" id="mapping-281"></span><span class="token del" data-title="contract_body/comment">// proportion: 1000 = 100%</span>
    struct RewardAllocation { <span class="marker" id="mapping-282"></span><span class="token del" data-title="struct_declaration/struct_member">uint proportion;</span> address finOp; }
    mapping(address =&gt; RewardAllocation[]) <span class="marker" id="mapping-283"></span><span class="token upd" id="move-src-119" data-title="state_variable_declaration/identifier"><span class="cupd">_rewardDistribution</span></span>;
    uint256 <span class="marker" id="mapping-284"></span><span class="token upd" id="move-src-120" data-title="state_variable_declaration/identifier"><span class="cupd">maxRewardProportion</span></span> = 1000;

    <span class="marker" id="mapping-285"></span><span class="token del" data-title="contract_body/comment">/* Additionally, we have several keccak-based storage locations.
     * If you add more keccak-based storage mappings, such as mappings, you must document them here.
     * If the length of the keccak input is the same as an existing mapping, it is possible there could be a preimage collision.
     * A preimage collision can be used to attack the contract by treating one storage location as another,
     * which would always be a critical issue.
     * Carefully examine future keccak-based storage to ensure there can be no preimage collisions.
     *******************************************************************************************************
     ** length     input                                                         usage
     *******************************************************************************************************
     ** 19         "trueXXX.proxy.owner"                                         Proxy Owner
     ** 27         "trueXXX.pending.proxy.owner"                                 Pending Proxy Owner
     ** 28         "trueXXX.proxy.implementation"                                Proxy Implementation
     ** 32         uint256(11)                                                   gasRefundPool_Deprecated
     ** 64         uint256(address),uint256(14)                                  balanceOf
     ** 64         uint256(address),keccak256(uint256(address),uint256(15))      allowance
     ** 64         uint256(address),keccak256(bytes32,uint256(16))               attributes
    **/</span>
}</span>

<span class="marker" id="mapping-286"></span><span class="token del" data-title="source_file/comment">// File: contracts/TrueCurrencies/HasOwner.sol</span>

pragma solidity<span class="marker" id="mapping-287"></span><span class="token upd" id="move-src-121" data-title="solidity_pragma_token/solidity_version"><span class="cupd"> 0.</span>5<span class="cupd">.1</span>3</span>;


<span class="marker" id="mapping-288"></span><span class="token upd" id="move-src-122" data-title="source_file/comment"><span class="cupd">/**
 * @title</span> HasOw<span class="cupd">n</span>e<span class="cupd">r
 * @dev </span>The <span class="cupd">H</span>asOwn<span class="cupd">e</span>r contrac<span class="cupd">t i</span>s<span class="cupd"> </span>a<span class="cupd"> c</span>opy of<span class="cupd"> </span>Claim<span class="cupd">a</span>b<span class="cupd">l</span><span class="cupd">e</span><span class="cupd"> Contra</span><span class="cupd">ct</span> <span class="cupd">b</span>y Zeppelin.
 and<span class="cupd"> </span>prov<span class="cupd">i</span><span class="cupd">d</span>es ba<span class="cupd">s</span>ic<span class="cupd"> a</span>ut<span class="cupd">h</span>or<span class="cupd">i</span><span class="cupd">z</span>a<span class="cupd">t</span><span class="cupd">i</span>on contr<span class="cupd">ol funct</span><span class="cupd">i</span>o<span class="cupd">n</span>s<span class="cupd">. Inhe</span><span class="cupd">r</span><span class="cupd">i</span>t<span class="cupd">s</span> sto<span class="cupd">ra</span>ge <span class="cupd">l</span><span class="cupd">a</span><span class="cupd">y</span><span class="cupd">ou</span>t<span class="cupd"> </span><span class="cupd">o</span>f<span class="cupd"></span><span class="cupd">
</span> Pr<span class="cupd">o</span>x<span class="cupd">yS</span>to<span class="cupd">rage.</span>
 */</span>
<span class="marker" id="mapping-289"></span><span class="token mv" id="move-src-123" data-title="source_file/contract_declaration">contract <span class="marker" id="mapping-290"></span><span class="token upd" id="move-src-124" data-title="contract_declaration/identifier">H<span class="cupd">a</span>s<span class="cupd">Own</span>er</span> is ProxyStorage {

    <span class="marker" id="mapping-291"></span><span class="token mv" id="move-src-125" data-title="contract_body/event_definition">event OwnershipTransferred(
        address indexed previousOwner,
        address indexed newOwner
    );</span>

    <span class="marker" id="mapping-292"></span><span class="token upd" id="move-src-126" data-title="contract_body/comment"><span class="cupd">/**
   </span><span class="cupd"> * @dev</span> <span class="cupd">s</span><span class="cupd">e</span>t<span class="cupd">s</span> <span class="cupd">th</span><span class="cupd">e </span><span class="cupd">o</span><span class="cupd">r</span>i<span class="cupd">g</span><span class="cupd">i</span><span class="cupd">n</span>a<span class="cupd">l</span> <span class="cupd">`</span><span class="cupd">owne</span>r<span class="cupd">`</span><span class="cupd"> </span><span class="cupd">of t</span>h<span class="cupd">e contract</span> t<span class="cupd">o</span> th<span class="cupd">e</span> sende<span class="cupd">r
</span>  <span class="cupd">  </span><span class="cupd">*</span> <span class="cupd">a</span>t <span class="cupd">c</span>on<span class="cupd">s</span>truc<span class="cupd">t</span><span class="cupd">i</span>o<span class="cupd">n</span>. Mu<span class="cupd">st </span>th<span class="cupd">e</span>n be r<span class="cupd">e</span>i<span class="cupd">n</span>i<span class="cupd">t</span>ializ<span class="cupd">ed
 </span><span class="cupd">  </span> */</span>
    <span class="marker" id="mapping-293"></span><span class="token mv" id="move-src-127" data-title="contract_body/constructor_definition">constructor() public {
        owner = msg.sender;
        emit OwnershipTransferred(address(0), owner);
    }</span>

    <span class="marker" id="mapping-294"></span><span class="token upd" id="move-src-128" data-title="contract_body/comment"><span class="cupd">/**
   </span><span class="cupd"> * @dev</span> <span class="cupd">T</span><span class="cupd">h</span><span class="cupd">ro</span>w<span class="cupd">s</span> <span class="cupd">if</span><span class="cupd"> </span><span class="cupd">c</span>al<span class="cupd">l</span><span class="cupd">e</span><span class="cupd">d</span> b<span class="cupd">y</span><span class="cupd"> </span>an<span class="cupd">y</span> <span class="cupd">a</span><span class="cupd">c</span><span class="cupd">c</span><span class="cupd">o</span>u<span class="cupd">nt</span> <span class="cupd">oth</span>er th<span class="cupd">an</span> t<span class="cupd">he</span> o<span class="cupd">w</span><span class="cupd">n</span>er<span class="cupd">.
  </span><span class="cupd">  </span>*/</span>
    <span class="marker" id="mapping-295"></span><span class="token mv" id="move-src-129" data-title="contract_body/modifier_definition">modifier onlyOwner() {
        require(msg.sender == owner, "only Owner");
        _;
    }</span>

    <span class="marker" id="mapping-296"></span><span class="token upd" id="move-src-130" data-title="contract_body/comment"><span class="cupd">/**
   </span><span class="cupd"> * @dev</span> Modifier <span class="cupd">throws if called by any account other than the</span> pending<span class="cupd">Owner.
  </span><span class="cupd">  </span>*/</span>
    <span class="marker" id="mapping-297"></span><span class="token del" data-title="contract_body/modifier_definition">modifier onlyPendingOwner() {
        require(msg.sender == pendingOwner);
        _;
    }</span>

    <span class="marker" id="mapping-298"></span><span class="token upd" id="move-src-131" data-title="contract_body/comment"><span class="cupd">/**
   </span><span class="cupd"> * @dev</span> Al<span class="cupd">l</span><span class="cupd">ows</span> t<span class="cupd">h</span><span class="cupd">e</span><span class="cupd"> </span><span class="cupd">c</span>urr<span class="cupd">ent </span>ow<span class="cupd">ner </span>t<span class="cupd">o</span> s<span class="cupd">e</span>t <span class="cupd">the pendingOwne</span>r addres<span class="cupd">s.
  </span> <span class="cupd"> </span>* @param newOwner The address to transfer ownership to.
 <span class="cupd">  </span> */</span>
    <span class="marker" id="mapping-299"></span><span class="token mv" id="move-src-132" data-title="contract_body/function_definition">function transferOwnership(address newOwner) public onlyOwner {
        pendingOwner = newOwner;
    }</span>

    <span class="marker" id="mapping-300"></span><span class="token upd" id="move-src-133" data-title="contract_body/comment"><span class="cupd">/**
   </span><span class="cupd"> * @dev Allows the</span><span class="cupd"> pendingOwner addres</span><span class="cupd">s</span> t<span class="cupd">o</span> f<span class="cupd">i</span>nali<span class="cupd">z</span><span class="cupd">e</span> <span class="cupd">the</span><span class="cupd"> </span><span class="cupd">transfe</span><span class="cupd">r.
  </span><span class="cupd">  </span>*/</span>
    function claimOwnership() public onlyPendingOwner {
        emit OwnershipTransferred(owner, pendingOwner);
        owner = pendingOwner;
        pendingOwner = address(0);
    }
}</span>

<span class="marker" id="mapping-301"></span><span class="token del" data-title="source_file/comment">// File: contracts/TrueCurrencies/ReclaimerToken.sol</span>

<span class="marker" id="mapping-302"></span><span class="token del" data-title="source_file/pragma_directive">pragma solidity 0.5.13;</span>


<span class="marker" id="mapping-303"></span><span class="token mv" id="move-src-134" data-title="source_file/contract_declaration">contract ReclaimerToken is <span class="marker" id="mapping-304"></span><span class="token upd" id="move-src-135" data-title="user_defined_type/identifier">HasOwner</span> {
    <span class="marker" id="mapping-305"></span><span class="token upd" id="move-src-136" data-title="contract_body/comment"><span class="cupd">/**
   </span><span class="cupd"> </span><span class="cupd">*@dev send all eth balance in the contract to another address
  </span><span class="cupd"> </span> */</span>
    function reclaimEther(address payable _to) external onlyOwner {
        _to.transfer(address(this).balance);
    }

    <span class="marker" id="mapping-306"></span><span class="token upd" id="move-src-137" data-title="contract_body/comment"><span class="cupd">/**
   </span><span class="cupd"> </span><span class="cupd">*@dev send all token balance of an arbi</span><span class="cupd">tary erc20 token
  </span><span class="cupd">  in the contract to another address
 </span><span class="cupd"> </span>  */</span>
    function reclaimToken(IERC20 token, address _to) external onlyOwner {
        uint256 balance = token.balanceOf(address(this));
        token.transfer(_to, balance);
    }

    <span class="marker" id="mapping-307"></span><span class="token del" data-title="contract_body/comment">/**
    *@dev allows owner of the contract to gain ownership of any contract that the contract currently owns
    */</span>
    <span class="marker" id="mapping-308"></span><span class="token del" data-title="contract_body/function_definition">function reclaimContract(<span class="marker" id="mapping-309"></span><span class="token del" data-title="function_definition/parameter">InstantiatableOwnable _ownable</span>) <span class="marker" id="mapping-310"></span><span class="token mv" id="move-src-138" data-title="function_definition/visibility">external</span> <span class="marker" id="mapping-311"></span><span class="token del" data-title="function_definition/modifier_invocation">onlyOwner</span> <span class="marker" id="mapping-312"></span><span class="token del" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-313"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-314"></span><span class="token del" data-title="expression_statement/call_expression"><span class="marker" id="mapping-315"></span><span class="token del" data-title="call_expression/member_expression">_ownable.transferOwnership</span>(<span class="marker" id="mapping-316"></span><span class="token mv" id="move-src-139" data-title="call_expression/call_argument">owner</span>)</span>;</span>
    }</span></span>
}</span>

<span class="marker" id="mapping-317"></span><span class="token del" data-title="source_file/comment">// File: contracts/TrueCurrencies/modularERC20/InitializableOwnable.sol</span>

<span class="marker" id="mapping-318"></span><span class="token del" data-title="source_file/pragma_directive">pragma solidity 0.5.13;</span>


<span class="marker" id="mapping-319"></span><span class="token del" data-title="source_file/comment">/**
 * @title InitializableOwnable
 * @dev The InitializableOwnable contract has an owner address, and provides basic authorization control
 * functions, this simplifies the implementation of "user permissions".
 */</span>
<span class="marker" id="mapping-320"></span><span class="token del" data-title="source_file/contract_declaration">contract InitializableOwnable <span class="marker" id="mapping-321"></span><span class="token del" data-title="contract_declaration/contract_body">{
    <span class="marker" id="mapping-322"></span><span class="token del" data-title="contract_body/state_variable_declaration">address public owner;</span>
    <span class="marker" id="mapping-323"></span><span class="token mv" id="move-src-140" data-title="contract_body/state_variable_declaration"><span class="marker" id="mapping-324"></span><span class="token mv" id="move-src-141" data-title="state_variable_declaration/type_name">bool</span> <span class="marker" id="mapping-325"></span><span class="token upd" id="move-src-142" data-title="state_variable_declaration/identifier"><span class="cupd">c</span>onf<span class="cupd">i</span>gur<span class="cupd">ed</span></span> <span class="marker" id="mapping-326"></span><span class="token del" data-title="state_variable_declaration/=">=</span> <span class="marker" id="mapping-327"></span><span class="token del" data-title="state_variable_declaration/boolean_literal">false</span>;</span>

    <span class="marker" id="mapping-328"></span><span class="token del" data-title="contract_body/event_definition">event OwnershipTransferred(
        address indexed previousOwner,
        address indexed newOwner
    );</span>

    /**
     * @dev The InitializableOwnable constructor sets the original `owner` of the contract to the sender
     * account.
     */
    <span class="marker" id="mapping-329"></span><span class="token del" data-title="contract_body/function_definition">function _configure() <span class="marker" id="mapping-330"></span><span class="token mv" id="move-src-143" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-331"></span><span class="token del" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-332"></span><span class="token del" data-title="function_body/expression_statement">require(!configured);</span>
        <span class="marker" id="mapping-333"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-334"></span><span class="token del" data-title="expression_statement/assignment_expression">owner = <span class="marker" id="mapping-335"></span><span class="token mv" id="move-src-144" data-title="assignment_expression/member_expression">msg.sender</span></span>;</span>
        <span class="marker" id="mapping-336"></span><span class="token del" data-title="function_body/expression_statement">configured = true;</span>
    }</span></span>

    /**
     * @dev Throws if called by any account other than the owner.
     */
    <span class="marker" id="mapping-337"></span><span class="token del" data-title="contract_body/modifier_definition">modifier onlyOwner() {
        require(msg.sender == owner);
        _;
    }</span>

    /**
     * @dev Allows the current owner to transfer control of the contract to a newOwner.
     * @param newOwner The address to transfer ownership to.
     */
    <span class="marker" id="mapping-338"></span><span class="token del" data-title="contract_body/function_definition">function transferOwnership(<span class="marker" id="mapping-339"></span><span class="token del" data-title="function_definition/parameter">address newOwner</span>) <span class="marker" id="mapping-340"></span><span class="token del" data-title="function_definition/visibility">public</span> <span class="marker" id="mapping-341"></span><span class="token del" data-title="function_definition/modifier_invocation">onlyOwner</span> <span class="marker" id="mapping-342"></span><span class="token del" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-343"></span><span class="token mv" id="move-src-145" data-title="function_body/expression_statement">require(<span class="marker" id="mapping-344"></span><span class="token upd" id="move-src-146" data-title="binary_expression/identifier">n<span class="cupd">e</span>wOwner</span> != address(0));</span>
        <span class="marker" id="mapping-345"></span><span class="token del" data-title="function_body/emit_statement">emit OwnershipTransferred(owner, newOwner);</span>
        <span class="marker" id="mapping-346"></span><span class="token del" data-title="function_body/expression_statement">owner = newOwner;</span>
    }</span></span>
}</span></span>

<span class="marker" id="mapping-347"></span><span class="token del" data-title="source_file/comment">// File: contracts/TrueCurrencies/modularERC20/InitializableClaimable.sol</span>

<span class="marker" id="mapping-348"></span><span class="token del" data-title="source_file/pragma_directive">pragma solidity 0.5.13;</span>



<span class="marker" id="mapping-349"></span><span class="token del" data-title="source_file/comment">/**
 * @title InitializableOwnable
 * @dev Extension for the InstantiatableOwnable contract, where the ownership needs to be claimed.
 * This allows the new owner to accept the transfer.
 */</span>
<span class="marker" id="mapping-350"></span><span class="token del" data-title="source_file/contract_declaration">contract InitializableClaimable is InitializableOwnable {
    address public pendingOwner;

    /**
     * @dev Modifier throws if called by any account other than the pendingOwner.
     */
    modifier onlyPendingOwner() {
        require(msg.sender == pendingOwner);
        _;
    }

    /**
     * @dev Allows the current owner to set the pendingOwner address.
     * @param newOwner The address to transfer ownership to.
     */
    function transferOwnership(address newOwner) public onlyOwner {
        pendingOwner = newOwner;
    }

    /**
     * @dev Allows the pendingOwner address to finalize the transfer.
     */
    function claimOwnership() public onlyPendingOwner {
        emit OwnershipTransferred(owner, pendingOwner);
        owner = pendingOwner;
        pendingOwner = address(0);
    }
}</span>

<span class="marker" id="mapping-351"></span><span class="token del" data-title="source_file/comment">// File: contracts/TrueCurrencies/modularERC20/ModularBasicToken.sol</span>

<span class="marker" id="mapping-352"></span><span class="token del" data-title="source_file/pragma_directive">pragma solidity 0.5.13;</span>





<span class="marker" id="mapping-353"></span><span class="token del" data-title="source_file/comment">// Fork of OpenZeppelin's BasicToken</span>
<span class="marker" id="mapping-354"></span><span class="token del" data-title="source_file/comment">/**
 * @title Basic token
 * @dev Basic version of StandardToken, with no allowances.
 */</span>
<span class="marker" id="mapping-355"></span><span class="token del" data-title="source_file/contract_declaration">contract ModularBasicToken is <span class="marker" id="mapping-356"></span><span class="token del" data-title="contract_declaration/inheritance_specifier">HasOwner</span> <span class="marker" id="mapping-357"></span><span class="token del" data-title="contract_declaration/contract_body">{
    <span class="marker" id="mapping-358"></span><span class="token del" data-title="contract_body/using_directive">using SafeMath for uint256;</span>

    <span class="marker" id="mapping-359"></span><span class="token del" data-title="contract_body/event_definition">event Transfer(address indexed from, address indexed to, uint256 value);</span>

    /**
    * @dev total number of tokens in existence
    */
    <span class="marker" id="mapping-360"></span><span class="token del" data-title="contract_body/function_definition">function totalSupply() public view returns (uint256) {
        return totalSupply_;
    }</span>

    <span class="marker" id="mapping-361"></span><span class="token del" data-title="contract_body/function_definition">function balanceOf(address _who) public view returns (uint256) {
        return _getBalance(_who);
    }</span>

    <span class="marker" id="mapping-362"></span><span class="token del" data-title="contract_body/function_definition">function _getBalance(<span class="marker" id="mapping-363"></span><span class="token del" data-title="function_definition/parameter">address _who</span>) <span class="marker" id="mapping-364"></span><span class="token mv" id="move-src-147" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-365"></span><span class="token del" data-title="function_definition/state_mutability">view</span> <span class="marker" id="mapping-366"></span><span class="token del" data-title="function_definition/return_type_definition">returns (uint256)</span> <span class="marker" id="mapping-367"></span><span class="token del" data-title="function_definition/function_body">{
        return _balanceOf[_who];
    }</span></span>

    <span class="marker" id="mapping-368"></span><span class="token del" data-title="contract_body/function_definition">function _addBalance(<span class="marker" id="mapping-369"></span><span class="token del" data-title="function_definition/parameter">address _who</span>, <span class="marker" id="mapping-370"></span><span class="token del" data-title="function_definition/parameter">uint256 _value</span>) <span class="marker" id="mapping-371"></span><span class="token mv" id="move-src-148" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-372"></span><span class="token del" data-title="function_definition/return_type_definition">returns (uint256 priorBalance)</span> <span class="marker" id="mapping-373"></span><span class="token del" data-title="function_definition/function_body">{
        priorBalance = _balanceOf[_who];
        _balanceOf[_who] = priorBalance.add(_value);
    }</span></span>

    <span class="marker" id="mapping-374"></span><span class="token del" data-title="contract_body/function_definition">function _subBalance(<span class="marker" id="mapping-375"></span><span class="token del" data-title="function_definition/parameter">address _who</span>, <span class="marker" id="mapping-376"></span><span class="token del" data-title="function_definition/parameter">uint256 _value</span>) <span class="marker" id="mapping-377"></span><span class="token mv" id="move-src-149" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-378"></span><span class="token del" data-title="function_definition/return_type_definition">returns (uint256 result)</span> <span class="marker" id="mapping-379"></span><span class="token del" data-title="function_definition/function_body">{
        result = _balanceOf[_who].sub(_value);
        _balanceOf[_who] = result;
    }</span></span>

    <span class="marker" id="mapping-380"></span><span class="token del" data-title="contract_body/function_definition">function _setBalance(<span class="marker" id="mapping-381"></span><span class="token del" data-title="function_definition/parameter">address _who</span>, <span class="marker" id="mapping-382"></span><span class="token del" data-title="function_definition/parameter">uint256 _value</span>) <span class="marker" id="mapping-383"></span><span class="token mv" id="move-src-150" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-384"></span><span class="token del" data-title="function_definition/function_body">{
        _balanceOf[_who] = _value;
    }</span></span>
}</span></span>

<span class="marker" id="mapping-385"></span><span class="token del" data-title="source_file/comment">// File: contracts/TrueCurrencies/modularERC20/ModularStandardToken.sol</span>

<span class="marker" id="mapping-386"></span><span class="token del" data-title="source_file/pragma_directive">pragma solidity 0.5.13;</span>




<span class="marker" id="mapping-387"></span><span class="token del" data-title="source_file/comment">/**
 * @title Standard ERC20 token
 *
 * @dev Implementation of the basic standard token.
 * @dev https://github.com/ethereum/EIPs/issues/20
 * @dev Based on code by FirstBlood: https://github.com/Firstbloodio/token/blob/master/smart_contract/FirstBloodToken.sol
 */</span>
<span class="marker" id="mapping-388"></span><span class="token del" data-title="source_file/contract_declaration">contract ModularStandardToken is <span class="marker" id="mapping-389"></span><span class="token del" data-title="contract_declaration/inheritance_specifier">ModularBasicToken</span> <span class="marker" id="mapping-390"></span><span class="token del" data-title="contract_declaration/contract_body">{
    <span class="marker" id="mapping-391"></span><span class="token mv" id="move-src-151" data-title="contract_body/using_directive">using SafeMath for uint256;</span>

    <span class="marker" id="mapping-392"></span><span class="token del" data-title="contract_body/event_definition">event Approval(
        address indexed owner,
        address indexed spender,
        uint256 value
    );</span>

    <span class="marker" id="mapping-393"></span><span class="token mv" id="move-src-152" data-title="contract_body/state_variable_declaration"><span class="marker" id="mapping-394"></span><span class="token mv" id="move-src-153" data-title="state_variable_declaration/type_name">uint256</span> <span class="marker" id="mapping-395"></span><span class="token del" data-title="state_variable_declaration/constant">constant</span> <span class="marker" id="mapping-396"></span><span class="token upd" id="move-src-154" data-title="state_variable_declaration/identifier">INFINITE_ALLOWANCE</span> <span class="marker" id="mapping-397"></span><span class="token del" data-title="state_variable_declaration/=">=</span> <span class="marker" id="mapping-398"></span><span class="token del" data-title="state_variable_declaration/number_literal">0xfe00000000000000000000000000000000000000000000000000000000000000</span>;</span>

    /**
     * @dev Approve the passed address to spend the specified amount of tokens on behalf of msg.sender.
     *
     * Beware that changing an allowance with this method brings the risk that someone may use both the old
     * and the new allowance by unfortunate transaction ordering. One possible solution to mitigate this
     * race condition is to first reduce the spender's allowance to 0 and set the desired value afterwards:
     * https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729
     * @param _spender The address which will spend the funds.
     * @param _value The amount of tokens to be spent.
     */
    <span class="marker" id="mapping-399"></span><span class="token mv" id="move-src-155" data-title="contract_body/function_definition">function <span class="marker" id="mapping-400"></span><span class="token upd" id="move-src-156" data-title="function_definition/identifier">approve</span>(<span class="marker" id="mapping-401"></span><span class="token del" data-title="function_definition/parameter">address _spender</span><span class="marker" id="mapping-402"></span><span class="token del" data-title="function_definition/,">,</span> <span class="marker" id="mapping-403"></span><span class="token del" data-title="function_definition/parameter">uint256 _value</span>) <span class="marker" id="mapping-404"></span><span class="token mv" id="move-src-157" data-title="function_definition/visibility">public</span> <span class="marker" id="mapping-405"></span><span class="token mv" id="move-src-158" data-title="function_definition/return_type_definition">returns (bool)</span> {
        <span class="marker" id="mapping-406"></span><span class="token upd" id="move-src-159" data-title="call_expression/identifier"><span class="cupd">_</span>approveAllArgs</span>(<span class="marker" id="mapping-407"></span><span class="token del" data-title="call_expression/call_argument">_spender</span><span class="marker" id="mapping-408"></span><span class="token mv" id="move-src-160" data-title="call_expression/,">,</span> <span class="marker" id="mapping-409"></span><span class="token del" data-title="call_expression/call_argument">_value</span><span class="marker" id="mapping-410"></span><span class="token del" data-title="call_expression/,">,</span> msg.sender);
        <span class="marker" id="mapping-411"></span><span class="token mv" id="move-src-161" data-title="function_body/return_statement">return true;</span>
    }</span>

    <span class="marker" id="mapping-412"></span><span class="token del" data-title="contract_body/function_definition">function _approveAllArgs(
        address _spender,
        uint256 _value,
        address _tokenHolder
    ) internal {
        _setAllowance(_tokenHolder, _spender, _value);
        emit Approval(_tokenHolder, _spender, _value);
    }</span>

    /**
     * @dev Increase the amount of tokens that an owner allowed to a spender.
     *
     * approve should be called when allowed[_spender] == 0. To increment
     * allowed value is better to use this function to avoid 2 calls (and wait until
     * the first transaction is mined)
     * From MonolithDAO Token.sol
     * @param _spender The address which will spend the funds.
     * @param _addedValue The amount of tokens to increase the allowance by.
     */
    <span class="marker" id="mapping-413"></span><span class="token mv" id="move-src-162" data-title="contract_body/function_definition">function <span class="marker" id="mapping-414"></span><span class="token upd" id="move-src-163" data-title="function_definition/identifier">inc<span class="cupd">r</span>e<span class="cupd">a</span><span class="cupd">s</span>eAllowance</span>(<span class="marker" id="mapping-415"></span><span class="token del" data-title="function_definition/parameter">address _spender</span>, <span class="marker" id="mapping-416"></span><span class="token del" data-title="function_definition/parameter">uint256 _addedValue</span>)
        public
        returns (bool)
    {
        <span class="marker" id="mapping-417"></span><span class="token upd" id="move-src-164" data-title="call_expression/identifier"><span class="cupd">_</span>inc<span class="cupd">r</span>e<span class="cupd">a</span><span class="cupd">s</span><span class="cupd">e</span>AllowanceAllArgs</span>(<span class="marker" id="mapping-418"></span><span class="token mv" id="move-src-165" data-title="call_expression/call_argument"><span class="marker" id="mapping-419"></span><span class="token upd" id="move-src-166" data-title="call_argument/identifier">_s<span class="cupd">p</span><span class="cupd">en</span>der</span></span>, <span class="marker" id="mapping-420"></span><span class="token del" data-title="call_expression/call_argument">_addedValue</span>, <span class="marker" id="mapping-421"></span><span class="token del" data-title="call_expression/call_argument">msg.sender</span>);
        <span class="marker" id="mapping-422"></span><span class="token mv" id="move-src-167" data-title="function_body/return_statement">return true;</span>
    }</span>

    <span class="marker" id="mapping-423"></span><span class="token del" data-title="contract_body/function_definition">function _increaseAllowanceAllArgs(
        address _spender,
        uint256 _addedValue,
        address _tokenHolder
    ) internal {
        _addAllowance(_tokenHolder, _spender, _addedValue);
        emit Approval(
            _tokenHolder,
            _spender,
            _getAllowance(_tokenHolder, _spender)
        );
    }</span>

    /**
     * @dev Decrease the amount of tokens that an owner allowed to a spender.
     *
     * approve should be called when allowed[_spender] == 0. To decrement
     * allowed value is better to use this function to avoid 2 calls (and wait until
     * the first transaction is mined)
     * From MonolithDAO Token.sol
     * @param _spender The address which will spend the funds.
     * @param _subtractedValue The amount of tokens to decrease the allowance by.
     */
    <span class="marker" id="mapping-424"></span><span class="token del" data-title="contract_body/function_definition">function decreaseAllowance(<span class="marker" id="mapping-425"></span><span class="token del" data-title="function_definition/parameter">address _spender</span>, <span class="marker" id="mapping-426"></span><span class="token del" data-title="function_definition/parameter">uint256 _subtractedValue</span>)
        <span class="marker" id="mapping-427"></span><span class="token del" data-title="function_definition/visibility">public</span>
        <span class="marker" id="mapping-428"></span><span class="token mv" id="move-src-168" data-title="function_definition/return_type_definition">returns (bool)</span>
    <span class="marker" id="mapping-429"></span><span class="token del" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-430"></span><span class="token del" data-title="function_body/expression_statement">_decreaseAllowanceAllArgs(_spender, _subtractedValue, msg.sender);</span>
        <span class="marker" id="mapping-431"></span><span class="token mv" id="move-src-169" data-title="function_body/return_statement">return true;</span>
    }</span></span>

    <span class="marker" id="mapping-432"></span><span class="token del" data-title="contract_body/function_definition">function _decreaseAllowanceAllArgs(
        <span class="marker" id="mapping-433"></span><span class="token del" data-title="function_definition/parameter">address _spender</span>,
        <span class="marker" id="mapping-434"></span><span class="token del" data-title="function_definition/parameter">uint256 _subtractedValue</span>,
        <span class="marker" id="mapping-435"></span><span class="token del" data-title="function_definition/parameter">address _tokenHolder</span>
    ) <span class="marker" id="mapping-436"></span><span class="token mv" id="move-src-170" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-437"></span><span class="token del" data-title="function_definition/function_body">{
        uint256 oldValue = _getAllowance(_tokenHolder, _spender);
        uint256 newValue;
        if (_subtractedValue &gt; oldValue) {
            newValue = 0;
        } else {
            newValue = oldValue - _subtractedValue;
        }
        _setAllowance(_tokenHolder, _spender, newValue);
        emit Approval(_tokenHolder, _spender, newValue);
    }</span></span>

    <span class="marker" id="mapping-438"></span><span class="token del" data-title="contract_body/function_definition">function allowance(address _who, address _spender)
        public
        view
        returns (uint256)
    {
        return _getAllowance(_who, _spender);
    }</span>

    <span class="marker" id="mapping-439"></span><span class="token del" data-title="contract_body/function_definition">function _getAllowance(address _who, address _spender)
        internal
        view
        returns (uint256 value)
    {
        return _allowance[_who][_spender];
    }</span>

    <span class="marker" id="mapping-440"></span><span class="token del" data-title="contract_body/function_definition">function _addAllowance(address _who, address _spender, uint256 _value)
        internal
    {
        _allowance[_who][_spender] = _allowance[_who][_spender].add(_value);
    }</span>

    <span class="marker" id="mapping-441"></span><span class="token del" data-title="contract_body/function_definition">function _subAllowance(address _who, address _spender, uint256 _value)
        internal
        returns (uint256 newAllowance)
    {
        newAllowance = _allowance[_who][_spender].sub(_value);
        if (newAllowance &lt; INFINITE_ALLOWANCE) {
            _allowance[_who][_spender] = newAllowance;
        }
    }</span>

    <span class="marker" id="mapping-442"></span><span class="token del" data-title="contract_body/function_definition">function _setAllowance(<span class="marker" id="mapping-443"></span><span class="token del" data-title="function_definition/parameter">address _who</span>, <span class="marker" id="mapping-444"></span><span class="token del" data-title="function_definition/parameter">address _spender</span>, <span class="marker" id="mapping-445"></span><span class="token del" data-title="function_definition/parameter">uint256 _value</span>)
        <span class="marker" id="mapping-446"></span><span class="token mv" id="move-src-171" data-title="function_definition/visibility">internal</span>
    <span class="marker" id="mapping-447"></span><span class="token del" data-title="function_definition/function_body">{
        _allowance[_who][_spender] = _value;
    }</span></span>
}</span></span>

<span class="marker" id="mapping-448"></span><span class="token del" data-title="source_file/comment">// File: contracts/TrueCurrencies/modularERC20/ModularBurnableToken.sol</span>

<span class="marker" id="mapping-449"></span><span class="token del" data-title="source_file/pragma_directive">pragma solidity 0.5.13;</span>


<span class="marker" id="mapping-450"></span><span class="token del" data-title="source_file/comment">/**
 * @title Burnable Token
 * @dev Token that can be irreversibly burned (destroyed).
 */</span>
<span class="marker" id="mapping-451"></span><span class="token del" data-title="source_file/contract_declaration">contract ModularBurnableToken is <span class="marker" id="mapping-452"></span><span class="token del" data-title="contract_declaration/inheritance_specifier">ModularStandardToken</span> <span class="marker" id="mapping-453"></span><span class="token del" data-title="contract_declaration/contract_body">{
    <span class="marker" id="mapping-454"></span><span class="token mv" id="move-src-172" data-title="contract_body/event_definition">event Burn(address indexed burner, uint256 value);</span>
    <span class="marker" id="mapping-455"></span><span class="token mv" id="move-src-173" data-title="contract_body/event_definition">event Mint(address indexed to, uint256 value);</span>
    <span class="marker" id="mapping-456"></span><span class="token mv" id="move-src-174" data-title="contract_body/state_variable_declaration">uint256 constant CENT = 10 ** 16;</span>

    <span class="marker" id="mapping-457"></span><span class="token del" data-title="contract_body/function_definition">function burn(uint256 _value) external {
        _burnAllArgs(msg.sender, _value - _value % CENT);
    }</span>

    <span class="marker" id="mapping-458"></span><span class="token mv" id="move-src-175" data-title="contract_body/function_definition">function <span class="marker" id="mapping-459"></span><span class="token upd" id="move-src-176" data-title="function_definition/identifier"><span class="cupd">_</span>burnAllArgs</span>(address <span class="marker" id="mapping-460"></span><span class="token upd" id="move-src-177" data-title="parameter/identifier">_from</span>, uint256 <span class="marker" id="mapping-461"></span><span class="token upd" id="move-src-178" data-title="parameter/identifier">_v<span class="cupd">a</span>lue</span>) internal {
        <span class="marker" id="mapping-462"></span><span class="token del" data-title="function_body/comment">// no need to require value &lt;= totalSupply, since that would imply the</span>
        <span class="marker" id="mapping-463"></span><span class="token del" data-title="function_body/comment">// sender's balance is greater than the totalSupply, which *should* be an assertion failure</span>
        <span class="marker" id="mapping-464"></span><span class="token del" data-title="function_body/expression_statement">_subBalance(_from, _value);</span>
        <span class="marker" id="mapping-465"></span><span class="token upd" id="move-src-179" data-title="assignment_expression/identifier"><span class="cupd">totalSupply</span>_</span> = <span class="marker" id="mapping-466"></span><span class="token upd" id="move-src-180" data-title="member_expression/identifier"><span class="cupd">totalSupply</span>_</span>.<span class="marker" id="mapping-467"></span><span class="token upd" id="move-src-181" data-title="member_expression/identifier">sub</span>(<span class="marker" id="mapping-468"></span><span class="token upd" id="move-src-182" data-title="call_argument/identifier">_v<span class="cupd">a</span>lue</span>);
        <span class="marker" id="mapping-469"></span><span class="token del" data-title="function_body/emit_statement">emit Burn(_from, _value);</span>
        emit Transfer(<span class="marker" id="mapping-470"></span><span class="token mv" id="move-src-183" data-title="emit_statement/call_argument"><span class="marker" id="mapping-471"></span><span class="token upd" id="move-src-184" data-title="call_argument/identifier">_from</span></span><span class="marker" id="mapping-472"></span><span class="token mv" id="move-src-185" data-title="emit_statement/,">,</span> address(0), <span class="marker" id="mapping-473"></span><span class="token del" data-title="emit_statement/call_argument">_value</span>);
    }</span>
}</span></span>

<span class="marker" id="mapping-474"></span><span class="token del" data-title="source_file/comment">// File: contracts/TrueCurrencies/BurnableTokenWithBounds.sol</span>

<span class="marker" id="mapping-475"></span><span class="token del" data-title="source_file/pragma_directive">pragma solidity 0.5.13;</span>


<span class="marker" id="mapping-476"></span><span class="token del" data-title="source_file/comment">/**
 * @title Burnable Token WithBounds
 * @dev Burning functions as redeeming money from the system. The platform will keep track of who burns coins,
 * and will send them back the equivalent amount of money (rounded down to the nearest cent).
 */</span>
<span class="marker" id="mapping-477"></span><span class="token mv" id="move-src-186" data-title="source_file/contract_declaration">contract BurnableTokenWithBounds is <span class="marker" id="mapping-478"></span><span class="token del" data-title="contract_declaration/inheritance_specifier">ModularBurnableToken</span> {

    <span class="marker" id="mapping-479"></span><span class="token mv" id="move-src-187" data-title="contract_body/event_definition">event SetBurnBounds(uint256 newMin, uint256 newMax);</span>

    <span class="marker" id="mapping-480"></span><span class="token mv" id="move-src-188" data-title="contract_body/function_definition">function <span class="marker" id="mapping-481"></span><span class="token upd" id="move-src-189" data-title="function_definition/identifier">_burnAllArgs</span>(<span class="marker" id="mapping-482"></span><span class="token del" data-title="function_definition/parameter">address _burner</span>, <span class="marker" id="mapping-483"></span><span class="token del" data-title="function_definition/parameter">uint256 _value</span>) <span class="marker" id="mapping-484"></span><span class="token del" data-title="function_definition/visibility">internal</span> {
        require(<span class="marker" id="mapping-485"></span><span class="token del" data-title="call_argument/binary_expression">_value &gt;= burnMin</span>, "below min burn bound");
        require(<span class="marker" id="mapping-486"></span><span class="token del" data-title="call_argument/binary_expression">_value &lt;= burnMax</span>, "exceeds max burn bound");
        <span class="marker" id="mapping-487"></span><span class="token del" data-title="call_expression/member_expression">super._burnAllArgs</span>(<span class="marker" id="mapping-488"></span><span class="token del" data-title="call_expression/call_argument">_burner</span>, <span class="marker" id="mapping-489"></span><span class="token del" data-title="call_expression/call_argument">_value</span>);
    }</span>

    <span class="marker" id="mapping-490"></span><span class="token upd" id="move-src-190" data-title="contract_body/comment"><span class="cupd">/</span>/Chang<span class="cupd">e</span><span class="cupd"> </span><span class="cupd">t</span><span class="cupd">he</span><span class="cupd"> </span>minim<span class="cupd">u</span>m<span class="cupd"> </span>a<span class="cupd">n</span>d<span class="cupd"> </span>m<span class="cupd">a</span>xim<span class="cupd">u</span><span class="cupd">m </span><span class="cupd">a</span>m<span class="cupd">ount </span>that<span class="cupd"> </span>c<span class="cupd">a</span>n<span class="cupd"> b</span><span class="cupd">e</span><span class="cupd"> </span><span class="cupd">burned </span><span class="cupd">a</span><span class="cupd">t o</span><span class="cupd">n</span>ce.<span class="cupd"> </span>B<span class="cupd">urn</span>ing</span>
    <span class="marker" id="mapping-491"></span><span class="token upd" id="move-src-191" data-title="contract_body/comment"><span class="cupd">/</span>/may<span class="cupd"> </span>b<span class="cupd">e</span><span class="cupd"> </span>d<span class="cupd">i</span>sabl<span class="cupd">ed </span><span class="cupd">b</span>y<span class="cupd"> </span><span class="cupd">s</span><span class="cupd">e</span><span class="cupd">t</span>t<span class="cupd">in</span>g<span class="cupd"> </span><span class="cupd">b</span><span class="cupd">o</span><span class="cupd">t</span>h<span class="cupd"> </span>to<span class="cupd"> </span>0<span class="cupd"> </span>(this<span class="cupd"> </span><span class="cupd">w</span><span class="cupd">i</span>ll<span class="cupd"> </span><span class="cupd">n</span><span class="cupd">o</span><span class="cupd">t </span>b<span class="cupd">e </span>do<span class="cupd">ne</span><span class="cupd"> </span><span class="cupd">u</span><span class="cupd">n</span>d<span class="cupd">e</span><span class="cupd">r </span>no<span class="cupd">r</span>mal</span>
    <span class="marker" id="mapping-492"></span><span class="token upd" id="move-src-192" data-title="contract_body/comment"><span class="cupd">/</span>/op<span class="cupd">e</span><span class="cupd">r</span><span class="cupd">a</span><span class="cupd">t</span>i<span class="cupd">o</span><span class="cupd">n</span><span class="cupd">, </span>b<span class="cupd">u</span><span class="cupd">t</span> w<span class="cupd">e </span>c<span class="cupd">a</span><span class="cupd">n</span>'<span class="cupd">t a</span>dd<span class="cupd"> </span>ch<span class="cupd">e</span>ck<span class="cupd">s to </span>d<span class="cupd">i</span><span class="cupd">s</span><span class="cupd">a</span>llo<span class="cupd">w</span><span class="cupd"> </span><span class="cupd">it</span><span class="cupd"> </span><span class="cupd">with</span>o<span class="cupd">u</span><span class="cupd">t </span>l<span class="cupd">o</span><span class="cupd">s</span><span class="cupd">i</span><span class="cupd">n</span><span class="cupd">g</span><span class="cupd"> </span><span class="cupd">a</span><span class="cupd"> </span><span class="cupd">l</span><span class="cupd">o</span><span class="cupd">t</span><span class="cupd"> </span>of</span>
    <span class="marker" id="mapping-493"></span><span class="token upd" id="move-src-193" data-title="contract_body/comment"><span class="cupd">/</span>/<span class="cupd">f</span><span class="cupd">lexibility since burning could also be as good as disabled</span></span>
    <span class="marker" id="mapping-494"></span><span class="token mv" id="move-src-194" data-title="contract_body/comment"><span class="marker" id="mapping-495"></span><span class="token upd" id="move-src-195" data-title="contract_body/comment"><span class="cupd">/</span>/by<span class="cupd"> </span><span class="cupd">s</span>e<span class="cupd">t</span><span class="cupd">t</span><span class="cupd">in</span>g<span class="cupd"> </span>th<span class="cupd">e</span><span class="cupd"> </span>mi<span class="cupd">n</span>im<span class="cupd">u</span>m<span class="cupd"> </span><span class="cupd">e</span>x<span class="cupd">tr</span><span class="cupd">e</span><span class="cupd">m</span><span class="cupd">e</span>ly h<span class="cupd">i</span><span class="cupd">g</span><span class="cupd">h</span>,<span class="cupd"> </span><span class="cupd">a</span><span class="cupd">n</span>d<span class="cupd"> </span>w<span class="cupd">e</span><span class="cupd"> </span>d<span class="cupd">o</span><span class="cupd">n</span>'<span class="cupd">t </span>w<span class="cupd">a</span><span class="cupd">nt </span><span class="cupd">to</span><span class="cupd"> </span>lock</span></span>
    <span class="marker" id="mapping-496"></span><span class="token del" data-title="contract_body/comment">//in any particular cap for the minimum)</span>
    function setBurnBounds(uint256 _min, uint256 _max) external onlyOwner {
        require(_min &lt;= _max, "min &gt; max");
        burnMin = _min;
        burnMax = _max;
        emit SetBurnBounds(_min, _max);
    }
}</span>

<span class="marker" id="mapping-497"></span><span class="token del" data-title="source_file/comment">// File: contracts/TrueCurrencies/GasRefundToken.sol</span>

<span class="marker" id="mapping-498"></span><span class="token del" data-title="source_file/pragma_directive">pragma solidity 0.5.13;</span>


<span class="marker" id="mapping-499"></span><span class="token del" data-title="source_file/comment">/**
@title Gas Refund Token
Allow any user to sponsor gas refunds for transfer and mints. Utilitzes the gas refund mechanism in EVM
Each time an non-empty storage slot is set to 0, evm refund 15,000 to the sender
of the transaction.
*/</span>
<span class="marker" id="mapping-500"></span><span class="token del" data-title="source_file/contract_declaration">contract GasRefundToken is <span class="marker" id="mapping-501"></span><span class="token del" data-title="contract_declaration/inheritance_specifier">ProxyStorage</span> <span class="marker" id="mapping-502"></span><span class="token del" data-title="contract_declaration/contract_body">{

    /**
      A buffer of "Sheep" runs from 0xffff...fffe down
      They suicide when you call them, if you are their parent
    */

    <span class="marker" id="mapping-503"></span><span class="token del" data-title="contract_body/function_definition">function sponsorGas2() <span class="marker" id="mapping-504"></span><span class="token del" data-title="function_definition/visibility">external</span> <span class="marker" id="mapping-505"></span><span class="token del" data-title="function_definition/function_body">{
        /**
        Deploy (9 bytes)
          PC Assembly       Opcodes                                       Stack
          00 PUSH1(27)      60 1b                                         1b
          02 DUP1           80                                            1b 1b
          03 PUSH1(9)       60 09                                         1b 1b 09
          05 RETURNDATASIZE 3d                                            1b 1b 09 00
          06 CODECOPY       39                                            1b
          07 RETURNDATASIZE 3d                                            1b 00
          08 RETURN         f3
        Sheep (27 bytes = 3 + 20 + 4)
          PC Assembly       Opcodes                                       Stack
          00 RETURNDATASIZE 3d                                            00
          01 CALLER         33                                            00 caller
          02 PUSH20(me)     73 memememememememememememememememememememe   00 caller me
          17 XOR            18                                            00 invalid
          18 PC             58                                            00 invalid 18
          19 JUMPI          57                                            00
          1a SELFDESTRUCT   ff
        */
        <span class="marker" id="mapping-506"></span><span class="token del" data-title="function_body/assembly_statement">assembly {
            <span class="marker" id="mapping-507"></span><span class="token del" data-title="assembly_statement/yul_function_call">mstore(0, or(0x601b8060093d393df33d33730000000000000000000000000000000000000000, address))</span>
            <span class="marker" id="mapping-508"></span><span class="token del" data-title="assembly_statement/yul_function_call">mstore(32,   0x185857ff00000000000000000000000000000000000000000000000000000000)</span>
            <span class="marker" id="mapping-509"></span><span class="token del" data-title="assembly_statement/yul_variable_declaration">let offset := sload(0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff)</span>
            <span class="marker" id="mapping-510"></span><span class="token del" data-title="assembly_statement/yul_variable_declaration">let location := sub(0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe, offset)</span>
            <span class="marker" id="mapping-511"></span><span class="token del" data-title="assembly_statement/yul_function_call">sstore(location, create(0, 0, 0x24))</span>
            <span class="marker" id="mapping-512"></span><span class="token del" data-title="assembly_statement/yul_assignment">location := sub(location, 1)</span>
            <span class="marker" id="mapping-513"></span><span class="token del" data-title="assembly_statement/yul_function_call">sstore(location, create(0, 0, 0x24))</span>
            <span class="marker" id="mapping-514"></span><span class="token del" data-title="assembly_statement/yul_assignment">location := sub(location, 1)</span>
            <span class="marker" id="mapping-515"></span><span class="token del" data-title="assembly_statement/yul_function_call">sstore(location, create(0, 0, 0x24))</span>
            <span class="marker" id="mapping-516"></span><span class="token del" data-title="assembly_statement/yul_function_call"><span class="marker" id="mapping-517"></span><span class="token del" data-title="yul_function_call/yul_evm_builtin">sstore</span>(0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff, <span class="marker" id="mapping-518"></span><span class="token del" data-title="yul_function_call/yul_function_call"><span class="marker" id="mapping-519"></span><span class="token mv" id="move-src-196" data-title="yul_function_call/yul_evm_builtin">add</span>(<span class="marker" id="mapping-520"></span><span class="token del" data-title="yul_function_call/yul_path">offset</span>, 3)</span>)</span>
        }</span>
    }</span></span>

    /**
    @dev refund 39,000 gas
    @dev costs slightly more than 16,100 gas
    */
    <span class="marker" id="mapping-521"></span><span class="token del" data-title="contract_body/function_definition">function gasRefund39() internal {
        assembly {
            let offset := sload(0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff)
            if gt(offset, 0) {
              let location := sub(0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff,offset)
              sstore(0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff, sub(offset, 1))
              let sheep := sload(location)
              pop(call(gas, sheep, 0, 0, 0, 0, 0))
              sstore(location, 0)
            }
        }
    }</span>

    <span class="marker" id="mapping-522"></span><span class="token del" data-title="contract_body/function_definition">function sponsorGas() external {
        uint256 refundPrice = minimumGasPriceForFutureRefunds;
        require(refundPrice &gt; 0);
        assembly {
            let offset := sload(0xfffff)
            let result := add(offset, 9)
            sstore(0xfffff, result)
            let position := add(offset, 0x100000)
            sstore(position, refundPrice)
            position := add(position, 1)
            sstore(position, refundPrice)
            position := add(position, 1)
            sstore(position, refundPrice)
            position := add(position, 1)
            sstore(position, refundPrice)
            position := add(position, 1)
            sstore(position, refundPrice)
            position := add(position, 1)
            sstore(position, refundPrice)
            position := add(position, 1)
            sstore(position, refundPrice)
            position := add(position, 1)
            sstore(position, refundPrice)
            position := add(position, 1)
            sstore(position, refundPrice)
        }
    }</span>

    <span class="marker" id="mapping-523"></span><span class="token del" data-title="contract_body/function_definition">function minimumGasPriceForRefund() public view returns (uint256 result) {
        assembly {
            let offset := sload(0xfffff)
            let location := add(offset, 0xfffff)
            result := add(sload(location), 1)
        }
    }</span>

    /**
    @dev refund 30,000 gas
    @dev costs slightly more than 15,400 gas
    */
    <span class="marker" id="mapping-524"></span><span class="token del" data-title="contract_body/function_definition">function gasRefund30() internal {
        assembly {
            let offset := sload(0xfffff)
            if gt(offset, 1) {
                let location := add(offset, 0xfffff)
                if gt(gasprice,sload(location)) {
                    sstore(location, 0)
                    location := sub(location, 1)
                    sstore(location, 0)
                    sstore(0xfffff, sub(offset, 2))
                }
            }
        }
    }</span>

    /**
    @dev refund 15,000 gas
    @dev costs slightly more than 10,200 gas
    */
    <span class="marker" id="mapping-525"></span><span class="token del" data-title="contract_body/function_definition">function gasRefund15() internal {
        assembly {
            let offset := sload(0xfffff)
            if gt(offset, 1) {
                let location := add(offset, 0xfffff)
                if gt(gasprice,sload(location)) {
                    sstore(location, 0)
                    sstore(0xfffff, sub(offset, 1))
                }
            }
        }
    }</span>

    /**
    *@dev Return the remaining sponsored gas slots
    */
    <span class="marker" id="mapping-526"></span><span class="token del" data-title="contract_body/function_definition">function remainingGasRefundPool() public view returns (uint length) {
        assembly {
            length := sload(0xfffff)
        }
    }</span>

    <span class="marker" id="mapping-527"></span><span class="token del" data-title="contract_body/function_definition">function gasRefundPool(uint256 _index) public view returns (uint256 gasPrice) {
        assembly {
            gasPrice := sload(add(0x100000, _index))
        }
    }</span>

    <span class="marker" id="mapping-528"></span><span class="token del" data-title="contract_body/state_variable_declaration">bytes32 constant CAN_SET_FUTURE_REFUND_MIN_GAS_PRICE = "canSetFutureRefundMinGasPrice";</span>

    <span class="marker" id="mapping-529"></span><span class="token del" data-title="contract_body/function_definition">function setMinimumGasPriceForFutureRefunds(uint256 _minimumGasPriceForFutureRefunds) public {
        require(registry.hasAttribute(msg.sender, CAN_SET_FUTURE_REFUND_MIN_GAS_PRICE));
        minimumGasPriceForFutureRefunds = _minimumGasPriceForFutureRefunds;
    }</span>
}</span></span>

<span class="marker" id="mapping-530"></span><span class="token del" data-title="source_file/comment">// File: contracts/TrueCurrencies/CompliantDepositTokenWithHook.sol</span>

<span class="marker" id="mapping-531"></span><span class="token del" data-title="source_file/pragma_directive">pragma solidity 0.5.13;</span>







<span class="marker" id="mapping-532"></span><span class="token del" data-title="source_file/contract_declaration">contract CompliantDepositTokenWithHook is <span class="marker" id="mapping-533"></span><span class="token mv" id="move-src-197" data-title="contract_declaration/inheritance_specifier">ReclaimerToken</span>, <span class="marker" id="mapping-534"></span><span class="token del" data-title="contract_declaration/inheritance_specifier">RegistryClone</span>, <span class="marker" id="mapping-535"></span><span class="token mv" id="move-src-198" data-title="contract_declaration/inheritance_specifier">BurnableTokenWithBounds</span>, <span class="marker" id="mapping-536"></span><span class="token del" data-title="contract_declaration/inheritance_specifier">GasRefundToken</span> <span class="marker" id="mapping-537"></span><span class="token del" data-title="contract_declaration/contract_body">{

    <span class="marker" id="mapping-538"></span><span class="token del" data-title="contract_body/state_variable_declaration">bytes32 constant IS_REGISTERED_CONTRACT = "isRegisteredContract";</span>
    <span class="marker" id="mapping-539"></span><span class="token del" data-title="contract_body/state_variable_declaration">bytes32 constant IS_DEPOSIT_ADDRESS = "isDepositAddress";</span>
    <span class="marker" id="mapping-540"></span><span class="token mv" id="move-src-199" data-title="contract_body/state_variable_declaration">uint256 constant REDEMPTION_ADDRESS_COUNT = 0x100000;</span>
    <span class="marker" id="mapping-541"></span><span class="token del" data-title="contract_body/state_variable_declaration">bytes32 constant IS_BLACKLISTED = "isBlacklisted";</span>

    <span class="marker" id="mapping-542"></span><span class="token del" data-title="contract_body/function_definition">function canBurn() <span class="marker" id="mapping-543"></span><span class="token del" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-544"></span><span class="token mv" id="move-src-200" data-title="function_definition/state_mutability">pure</span> <span class="marker" id="mapping-545"></span><span class="token del" data-title="function_definition/return_type_definition">returns (bytes32)</span>;</span>

    /**
    * @dev transfer token for a specified address
    * @param _to The address to transfer to.
    * @param _value The amount to be transferred.
    */
    <span class="marker" id="mapping-546"></span><span class="token del" data-title="contract_body/function_definition">function transfer(address _to, uint256 _value) public returns (bool) {
        _transferAllArgs(msg.sender, _to, _value);
        return true;
    }</span>

    /**
     * @dev Transfer tokens from one address to another
     * @param _from address The address which you want to send tokens from
     * @param _to address The address which you want to transfer to
     * @param _value uint256 the amount of tokens to be transferred
     */
    <span class="marker" id="mapping-547"></span><span class="token del" data-title="contract_body/function_definition">function transferFrom(<span class="marker" id="mapping-548"></span><span class="token del" data-title="function_definition/parameter"><span class="marker" id="mapping-549"></span><span class="token mv" id="move-src-201" data-title="parameter/type_name">address</span> _from</span>, <span class="marker" id="mapping-550"></span><span class="token del" data-title="function_definition/parameter">address _to</span>, <span class="marker" id="mapping-551"></span><span class="token del" data-title="function_definition/parameter">uint256 _value</span>) <span class="marker" id="mapping-552"></span><span class="token del" data-title="function_definition/visibility">public</span> <span class="marker" id="mapping-553"></span><span class="token del" data-title="function_definition/return_type_definition">returns (bool)</span> <span class="marker" id="mapping-554"></span><span class="token del" data-title="function_definition/function_body">{
        _transferFromAllArgs(_from, _to, _value, msg.sender);
        return true;
    }</span></span>

    <span class="marker" id="mapping-555"></span><span class="token del" data-title="contract_body/function_definition">function _burnFromAllowanceAllArgs(<span class="marker" id="mapping-556"></span><span class="token del" data-title="function_definition/parameter">address _from</span>, <span class="marker" id="mapping-557"></span><span class="token del" data-title="function_definition/parameter">address _to</span>, <span class="marker" id="mapping-558"></span><span class="token del" data-title="function_definition/parameter">uint256 _value</span>, <span class="marker" id="mapping-559"></span><span class="token del" data-title="function_definition/parameter">address _spender</span>) <span class="marker" id="mapping-560"></span><span class="token mv" id="move-src-202" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-561"></span><span class="token del" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-562"></span><span class="token del" data-title="function_body/expression_statement">_requireCanTransferFrom(_spender, _from, _to);</span>
        <span class="marker" id="mapping-563"></span><span class="token del" data-title="function_body/expression_statement">_requireOnlyCanBurn(_to);</span>
        <span class="marker" id="mapping-564"></span><span class="token mv" id="move-src-203" data-title="function_body/expression_statement">require(<span class="marker" id="mapping-565"></span><span class="token del" data-title="call_argument/binary_expression">_value &gt;= burnMin</span>, "below min burn bound");</span>
        <span class="marker" id="mapping-566"></span><span class="token mv" id="move-src-204" data-title="function_body/expression_statement">require(<span class="marker" id="mapping-567"></span><span class="token del" data-title="binary_expression/identifier">_value</span> <span class="marker" id="mapping-568"></span><span class="token del" data-title="binary_expression/<=">&lt;=</span> <span class="marker" id="mapping-569"></span><span class="token del" data-title="binary_expression/identifier">burnMax</span>, "exceeds max burn bound");</span>
        <span class="marker" id="mapping-570"></span><span class="token del" data-title="function_body/if_statement">if (0 == _subBalance(_from, _value)) {
            if (0 != _subAllowance(_from, _spender, _value)) {
                gasRefund15();
            }
            // else no refund
        } else {
            if (0 == _subAllowance(_from, _spender, _value)) {
                gasRefund15();
            } else {
                gasRefund39();
            }
        }</span>
        <span class="marker" id="mapping-571"></span><span class="token del" data-title="function_body/emit_statement">emit Transfer(_from, _to, _value);</span>
        <span class="marker" id="mapping-572"></span><span class="token del" data-title="function_body/expression_statement">totalSupply_ = totalSupply_.sub(_value);</span>
        <span class="marker" id="mapping-573"></span><span class="token del" data-title="function_body/emit_statement">emit Burn(_to, _value);</span>
        <span class="marker" id="mapping-574"></span><span class="token del" data-title="function_body/emit_statement">emit Transfer(_to, address(0), _value);</span>
    }</span></span>

    <span class="marker" id="mapping-575"></span><span class="token del" data-title="contract_body/function_definition">function _burnFromAllArgs(<span class="marker" id="mapping-576"></span><span class="token del" data-title="function_definition/parameter">address _from</span>, <span class="marker" id="mapping-577"></span><span class="token del" data-title="function_definition/parameter">address _to</span>, <span class="marker" id="mapping-578"></span><span class="token del" data-title="function_definition/parameter">uint256 _value</span>) <span class="marker" id="mapping-579"></span><span class="token del" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-580"></span><span class="token del" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-581"></span><span class="token del" data-title="function_body/expression_statement">_requireCanTransfer(_from, _to);</span>
        <span class="marker" id="mapping-582"></span><span class="token del" data-title="function_body/expression_statement">_requireOnlyCanBurn(_to);</span>
        <span class="marker" id="mapping-583"></span><span class="token mv" id="move-src-205" data-title="function_body/expression_statement">require(<span class="marker" id="mapping-584"></span><span class="token mv" id="move-src-206" data-title="binary_expression/identifier"><span class="marker" id="mapping-585"></span><span class="token upd" id="move-src-207" data-title="binary_expression/identifier">_value</span></span> &gt;= <span class="marker" id="mapping-586"></span><span class="token del" data-title="binary_expression/identifier">burnMin</span>, "below min burn bound");</span>
        <span class="marker" id="mapping-587"></span><span class="token mv" id="move-src-208" data-title="function_body/expression_statement">require(<span class="marker" id="mapping-588"></span><span class="token del" data-title="call_argument/binary_expression">_value &lt;= burnMax</span>, "exceeds max burn bound");</span>
        <span class="marker" id="mapping-589"></span><span class="token del" data-title="function_body/if_statement">if (0 == _subBalance(_from, _value)) {
            gasRefund15();
        } else {
            gasRefund30();
        }</span>
        <span class="marker" id="mapping-590"></span><span class="token del" data-title="function_body/emit_statement">emit Transfer(_from, _to, _value);</span>
        <span class="marker" id="mapping-591"></span><span class="token del" data-title="function_body/expression_statement">totalSupply_ = totalSupply_.sub(_value);</span>
        <span class="marker" id="mapping-592"></span><span class="token del" data-title="function_body/emit_statement">emit Burn(_to, _value);</span>
        <span class="marker" id="mapping-593"></span><span class="token del" data-title="function_body/emit_statement">emit Transfer(_to, address(0), _value);</span>
    }</span></span>

    <span class="marker" id="mapping-594"></span><span class="token del" data-title="contract_body/function_definition">function _transferFromAllArgs(<span class="marker" id="mapping-595"></span><span class="token del" data-title="function_definition/parameter">address _from</span>, <span class="marker" id="mapping-596"></span><span class="token del" data-title="function_definition/parameter">address _to</span>, <span class="marker" id="mapping-597"></span><span class="token del" data-title="function_definition/parameter">uint256 _value</span>, <span class="marker" id="mapping-598"></span><span class="token del" data-title="function_definition/parameter">address _spender</span>) <span class="marker" id="mapping-599"></span><span class="token del" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-600"></span><span class="token del" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-601"></span><span class="token del" data-title="function_body/if_statement">if (<span class="marker" id="mapping-602"></span><span class="token mv" id="move-src-209" data-title="if_statement/binary_expression">uint256(<span class="marker" id="mapping-603"></span><span class="token del" data-title="type_cast_expression/call_argument">_to</span>) &lt; REDEMPTION_ADDRESS_COUNT</span>) <span class="marker" id="mapping-604"></span><span class="token del" data-title="if_statement/block_statement">{
            _value -= _value % CENT;
            _burnFromAllowanceAllArgs(_from, _to, _value, _spender);
        }</span> else <span class="marker" id="mapping-605"></span><span class="token del" data-title="if_statement/block_statement">{
            bool hasHook;
            address originalTo = _to;
            (_to, hasHook) = _requireCanTransferFrom(_spender, _from, _to);
            if (0 == _addBalance(_to, _value)) {
                if (0 == _subAllowance(_from, _spender, _value)) {
                    if (0 != _subBalance(_from, _value)) {
                        gasRefund30();
                    }
                    // else do not refund
                } else {
                    if (0 == _subBalance(_from, _value)) {
                        gasRefund30();
                    } else {
                        gasRefund39();
                    }
                }
            } else {
                if (0 == _subAllowance(_from, _spender, _value)) {
                    if (0 != _subBalance(_from, _value)) {
                        gasRefund15();
                    }
                    // else do not refund
                } else {
                    if (0 == _subBalance(_from, _value)) {
                        gasRefund15();
                    } else {
                        gasRefund39();
                    }
                }

            }
            emit Transfer(_from, originalTo, _value);
            if (originalTo != _to) {
                emit Transfer(originalTo, _to, _value);
                if (hasHook) {
                    TrueCoinReceiver(_to).tokenFallback(originalTo, _value);
                }
            } else {
                if (hasHook) {
                    TrueCoinReceiver(_to).tokenFallback(_from, _value);
                }
            }
        }</span></span>
    }</span></span>

    <span class="marker" id="mapping-606"></span><span class="token del" data-title="contract_body/function_definition">function _transferAllArgs(<span class="marker" id="mapping-607"></span><span class="token del" data-title="function_definition/parameter">address _from</span>, <span class="marker" id="mapping-608"></span><span class="token del" data-title="function_definition/parameter">address _to</span>, <span class="marker" id="mapping-609"></span><span class="token del" data-title="function_definition/parameter">uint256 _value</span>) <span class="marker" id="mapping-610"></span><span class="token del" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-611"></span><span class="token del" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-612"></span><span class="token del" data-title="function_body/if_statement">if (<span class="marker" id="mapping-613"></span><span class="token mv" id="move-src-210" data-title="if_statement/binary_expression">uint256(<span class="marker" id="mapping-614"></span><span class="token upd" id="move-src-211" data-title="call_argument/identifier">_to</span>) <span class="marker" id="mapping-615"></span><span class="token del" data-title="binary_expression/<">&lt;</span> <span class="marker" id="mapping-616"></span><span class="token del" data-title="binary_expression/identifier">REDEMPTION_ADDRESS_COUNT</span></span>) <span class="marker" id="mapping-617"></span><span class="token del" data-title="if_statement/block_statement">{
            _value -= _value % CENT;
            _burnFromAllArgs(_from, _to, _value);
        }</span> else <span class="marker" id="mapping-618"></span><span class="token del" data-title="if_statement/block_statement">{
            bool hasHook;
            address finalTo;
            (finalTo, hasHook) = _requireCanTransfer(_from, _to);
            if (0 == _subBalance(_from, _value)) {
                if (0 == _addBalance(finalTo, _value)) {
                    gasRefund30();
                }
                // else do not refund
            } else {
                if (0 == _addBalance(finalTo, _value)) {
                    gasRefund39();
                } else {
                    gasRefund30();
                }
            }
            emit Transfer(_from, _to, _value);
            if (finalTo != _to) {
                emit Transfer(_to, finalTo, _value);
                if (hasHook) {
                    TrueCoinReceiver(finalTo).tokenFallback(_to, _value);
                }
            } else {
                if (hasHook) {
                    TrueCoinReceiver(finalTo).tokenFallback(_from, _value);
                }
            }
        }</span></span>
    }</span></span>

    <span class="marker" id="mapping-619"></span><span class="token del" data-title="contract_body/function_definition">function mint(<span class="marker" id="mapping-620"></span><span class="token del" data-title="function_definition/parameter">address _to</span>, <span class="marker" id="mapping-621"></span><span class="token del" data-title="function_definition/parameter">uint256 _value</span>) <span class="marker" id="mapping-622"></span><span class="token del" data-title="function_definition/visibility">public</span> <span class="marker" id="mapping-623"></span><span class="token del" data-title="function_definition/modifier_invocation">onlyOwner</span> <span class="marker" id="mapping-624"></span><span class="token del" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-625"></span><span class="token mv" id="move-src-212" data-title="function_body/expression_statement">require(<span class="marker" id="mapping-626"></span><span class="token upd" id="move-src-213" data-title="binary_expression/identifier">_to</span> != address(0), <span class="marker" id="mapping-627"></span><span class="token mv" id="move-src-214" data-title="call_expression/call_argument">"to address cannot be zero"</span>);</span>
        <span class="marker" id="mapping-628"></span><span class="token del" data-title="function_body/variable_declaration_statement">bool hasHook;</span>
        <span class="marker" id="mapping-629"></span><span class="token del" data-title="function_body/variable_declaration_statement">address originalTo = _to;</span>
        <span class="marker" id="mapping-630"></span><span class="token del" data-title="function_body/expression_statement">(_to, hasHook) = _requireCanMint(_to);</span>
        <span class="marker" id="mapping-631"></span><span class="token del" data-title="function_body/expression_statement">totalSupply_ = totalSupply_.add(_value);</span>
        <span class="marker" id="mapping-632"></span><span class="token del" data-title="function_body/emit_statement">emit Mint(originalTo, _value);</span>
        <span class="marker" id="mapping-633"></span><span class="token del" data-title="function_body/emit_statement">emit Transfer(<span class="marker" id="mapping-634"></span><span class="token mv" id="move-src-215" data-title="emit_statement/call_argument">address(0)</span>, <span class="marker" id="mapping-635"></span><span class="token del" data-title="emit_statement/call_argument">originalTo</span>, <span class="marker" id="mapping-636"></span><span class="token del" data-title="emit_statement/call_argument">_value</span>);</span>
        <span class="marker" id="mapping-637"></span><span class="token del" data-title="function_body/if_statement">if (_to != originalTo) {
            emit Transfer(originalTo, _to, _value);
        }</span>
        <span class="marker" id="mapping-638"></span><span class="token del" data-title="function_body/expression_statement">_addBalance(_to, _value);</span>
        <span class="marker" id="mapping-639"></span><span class="token del" data-title="function_body/if_statement">if (hasHook) <span class="marker" id="mapping-640"></span><span class="token del" data-title="if_statement/block_statement">{
            <span class="marker" id="mapping-641"></span><span class="token del" data-title="block_statement/if_statement">if (<span class="marker" id="mapping-642"></span><span class="token del" data-title="if_statement/binary_expression">_to != originalTo</span>) <span class="marker" id="mapping-643"></span><span class="token del" data-title="if_statement/block_statement">{
                TrueCoinReceiver(_to).tokenFallback(originalTo, _value);
            }</span> else <span class="marker" id="mapping-644"></span><span class="token del" data-title="if_statement/block_statement">{
                <span class="marker" id="mapping-645"></span><span class="token mv" id="move-src-216" data-title="block_statement/expression_statement"><span class="marker" id="mapping-646"></span><span class="token del" data-title="call_expression/member_expression">TrueCoinReceiver(_to).tokenFallback</span>(address(0), <span class="marker" id="mapping-647"></span><span class="token del" data-title="call_expression/call_argument">_value</span>);</span>
            }</span></span>
        }</span></span>
    }</span></span>

    <span class="marker" id="mapping-648"></span><span class="token mv" id="move-src-217" data-title="contract_body/event_definition">event <span class="marker" id="mapping-649"></span><span class="token upd" id="move-src-218" data-title="event_definition/identifier">Wipe<span class="cupd">Blacklisted</span>Account</span>(address indexed account, <span class="marker" id="mapping-650"></span><span class="token del" data-title="event_paramater/type_name">uint256</span> <span class="marker" id="mapping-651"></span><span class="token upd" id="move-src-219" data-title="event_paramater/identifier">ba<span class="cupd">la</span>n<span class="cupd">c</span>e</span>);</span>
    <span class="marker" id="mapping-652"></span><span class="token del" data-title="contract_body/event_definition">event SetRegistry(address indexed registry);</span>

    /**
    * @dev Point to the registry that contains all compliance related data
    @param _registry The address of the registry instance
    */
    <span class="marker" id="mapping-653"></span><span class="token del" data-title="contract_body/function_definition">function setRegistry(<span class="marker" id="mapping-654"></span><span class="token del" data-title="function_definition/parameter">Registry _registry</span>) <span class="marker" id="mapping-655"></span><span class="token mv" id="move-src-220" data-title="function_definition/visibility">public</span> <span class="marker" id="mapping-656"></span><span class="token del" data-title="function_definition/modifier_invocation">onlyOwner</span> <span class="marker" id="mapping-657"></span><span class="token del" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-658"></span><span class="token del" data-title="function_body/expression_statement">registry = _registry;</span>
        <span class="marker" id="mapping-659"></span><span class="token del" data-title="function_body/emit_statement">emit SetRegistry(<span class="marker" id="mapping-660"></span><span class="token del" data-title="emit_statement/call_argument"><span class="marker" id="mapping-661"></span><span class="token del" data-title="call_argument/type_cast_expression"><span class="marker" id="mapping-662"></span><span class="token mv" id="move-src-221" data-title="type_cast_expression/primitive_type">address</span>(<span class="marker" id="mapping-663"></span><span class="token del" data-title="type_cast_expression/call_argument">registry</span>)</span></span>);</span>
    }</span></span>

    <span class="marker" id="mapping-664"></span><span class="token del" data-title="contract_body/modifier_definition">modifier onlyRegistry {
        require(msg.sender == address(registry));
        _;
    }</span>

    <span class="marker" id="mapping-665"></span><span class="token del" data-title="contract_body/function_definition">function syncAttributeValue(address _who, bytes32 _attribute, uint256 _value) public onlyRegistry {
        attributes[_attribute][_who] = _value;
    }</span>

    <span class="marker" id="mapping-666"></span><span class="token del" data-title="contract_body/function_definition">function _burnAllArgs(address _from, uint256 _value) internal {
        _requireCanBurn(_from);
        super._burnAllArgs(_from, _value);
    }</span>

    // Destroy the tokens owned by a blacklisted account
    <span class="marker" id="mapping-667"></span><span class="token mv" id="move-src-222" data-title="contract_body/function_definition">function <span class="marker" id="mapping-668"></span><span class="token upd" id="move-src-223" data-title="function_definition/identifier">wipeBlacklistedAcco<span class="cupd">u</span>nt</span>(address <span class="marker" id="mapping-669"></span><span class="token upd" id="move-src-224" data-title="parameter/identifier">_<span class="cupd">account</span></span>) <span class="marker" id="mapping-670"></span><span class="token del" data-title="function_definition/visibility">public</span> <span class="marker" id="mapping-671"></span><span class="token del" data-title="function_definition/modifier_invocation">onlyOwner</span> {
        <span class="marker" id="mapping-672"></span><span class="token mv" id="move-src-225" data-title="function_body/expression_statement">require(<span class="marker" id="mapping-673"></span><span class="token del" data-title="call_argument/call_expression">_isBlacklisted(_account)</span>, "_account is not blacklisted");</span>
        <span class="marker" id="mapping-674"></span><span class="token del" data-title="function_body/variable_declaration_statement">uint256 oldValue = _getBalance(_account);</span>
        <span class="marker" id="mapping-675"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-676"></span><span class="token del" data-title="expression_statement/call_expression">_setBalance(<span class="marker" id="mapping-677"></span><span class="token del" data-title="call_expression/call_argument">_account</span>, <span class="marker" id="mapping-678"></span><span class="token mv" id="move-src-226" data-title="call_expression/call_argument">0</span>)</span>;</span>
        <span class="marker" id="mapping-679"></span><span class="token upd" id="move-src-227" data-title="assignment_expression/identifier"><span class="cupd">totalSupply</span>_</span> = <span class="marker" id="mapping-680"></span><span class="token upd" id="move-src-228" data-title="member_expression/identifier"><span class="cupd">totalSupply</span>_</span>.sub(<span class="marker" id="mapping-681"></span><span class="token upd" id="move-src-229" data-title="call_argument/identifier"><span class="cupd">o</span>ldValue</span>);
        <span class="marker" id="mapping-682"></span><span class="token del" data-title="function_body/emit_statement">emit WipeBlacklistedAccount(_account, oldValue);</span>
        emit Transfer(<span class="marker" id="mapping-683"></span><span class="token upd" id="move-src-230" data-title="call_argument/identifier">_<span class="cupd">account</span></span>, address(0), <span class="marker" id="mapping-684"></span><span class="token upd" id="move-src-231" data-title="call_argument/identifier"><span class="cupd">o</span>ldValue</span>);
    }</span>

    <span class="marker" id="mapping-685"></span><span class="token del" data-title="contract_body/function_definition">function _isBlacklisted(<span class="marker" id="mapping-686"></span><span class="token del" data-title="function_definition/parameter">address _account</span>) <span class="marker" id="mapping-687"></span><span class="token del" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-688"></span><span class="token del" data-title="function_definition/state_mutability">view</span> <span class="marker" id="mapping-689"></span><span class="token del" data-title="function_definition/return_type_definition">returns (<span class="marker" id="mapping-690"></span><span class="token mv" id="move-src-232" data-title="return_type_definition/parameter">bool <span class="marker" id="mapping-691"></span><span class="token upd" id="move-src-233" data-title="parameter/identifier">b<span class="cupd">lacklisted</span></span></span>)</span> <span class="marker" id="mapping-692"></span><span class="token del" data-title="function_definition/function_body">{
        return attributes[IS_BLACKLISTED][_account] != 0;
    }</span></span>

    <span class="marker" id="mapping-693"></span><span class="token mv" id="move-src-234" data-title="contract_body/function_definition">function <span class="marker" id="mapping-694"></span><span class="token upd" id="move-src-235" data-title="function_definition/identifier"><span class="cupd">_</span>req<span class="cupd">u</span>i<span class="cupd">r</span>eCanTransfer</span>(<span class="marker" id="mapping-695"></span><span class="token del" data-title="function_definition/parameter">address _from</span>, <span class="marker" id="mapping-696"></span><span class="token del" data-title="function_definition/parameter">address _to</span>) <span class="marker" id="mapping-697"></span><span class="token del" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-698"></span><span class="token del" data-title="function_definition/state_mutability">view</span> <span class="marker" id="mapping-699"></span><span class="token del" data-title="function_definition/return_type_definition">returns (<span class="marker" id="mapping-700"></span><span class="token del" data-title="return_type_definition/parameter">address</span>, <span class="marker" id="mapping-701"></span><span class="token mv" id="move-src-236" data-title="return_type_definition/parameter">bool</span>)</span> {
        <span class="marker" id="mapping-702"></span><span class="token del" data-title="function_body/variable_declaration_statement"><span class="marker" id="mapping-703"></span><span class="token del" data-title="variable_declaration_statement/variable_declaration">uint256 depositAddressValue</span> = <span class="marker" id="mapping-704"></span><span class="token del" data-title="variable_declaration_statement/array_access"><span class="marker" id="mapping-705"></span><span class="token del" data-title="array_access/array_access">attributes[IS_DEPOSIT_ADDRESS]</span>[<span class="marker" id="mapping-706"></span><span class="token del" data-title="array_access/type_cast_expression"><span class="marker" id="mapping-707"></span><span class="token del" data-title="type_cast_expression/primitive_type">address</span>(<span class="marker" id="mapping-708"></span><span class="token del" data-title="type_cast_expression/call_argument"><span class="marker" id="mapping-709"></span><span class="token del" data-title="call_argument/binary_expression"><span class="marker" id="mapping-710"></span><span class="token mv" id="move-src-237" data-title="binary_expression/type_cast_expression">uint256(<span class="marker" id="mapping-711"></span><span class="token del" data-title="type_cast_expression/call_argument">_to</span>)</span> &gt;&gt; 20</span></span>)</span>]</span>;</span>
        <span class="marker" id="mapping-712"></span><span class="token del" data-title="function_body/if_statement">if (depositAddressValue != 0) {
            _to = address(depositAddressValue);
        }</span>
        <span class="marker" id="mapping-713"></span><span class="token mv" id="move-src-238" data-title="function_body/expression_statement">require (<span class="marker" id="mapping-714"></span><span class="token del" data-title="binary_expression/array_access">attributes[IS_BLACKLISTED][_to]</span> <span class="marker" id="mapping-715"></span><span class="token del" data-title="binary_expression/==">==</span> <span class="marker" id="mapping-716"></span><span class="token del" data-title="binary_expression/number_literal">0</span>, "blacklisted");</span>
        require (<span class="marker" id="mapping-717"></span><span class="token del" data-title="binary_expression/array_access">attributes[IS_BLACKLISTED][_from]</span> <span class="marker" id="mapping-718"></span><span class="token del" data-title="binary_expression/==">==</span> <span class="marker" id="mapping-719"></span><span class="token del" data-title="binary_expression/number_literal">0</span>, "blacklisted");
        <span class="marker" id="mapping-720"></span><span class="token del" data-title="function_body/return_statement">return (_to, attributes[IS_REGISTERED_CONTRACT][_to] != 0);</span>
    }</span>

    <span class="marker" id="mapping-721"></span><span class="token del" data-title="contract_body/function_definition">function _requireCanTransferFrom(<span class="marker" id="mapping-722"></span><span class="token del" data-title="function_definition/parameter">address _spender</span>, <span class="marker" id="mapping-723"></span><span class="token del" data-title="function_definition/parameter">address _from</span>, <span class="marker" id="mapping-724"></span><span class="token del" data-title="function_definition/parameter">address _to</span>) <span class="marker" id="mapping-725"></span><span class="token mv" id="move-src-239" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-726"></span><span class="token del" data-title="function_definition/state_mutability">view</span> <span class="marker" id="mapping-727"></span><span class="token del" data-title="function_definition/return_type_definition">returns (<span class="marker" id="mapping-728"></span><span class="token del" data-title="return_type_definition/parameter">address</span>, <span class="marker" id="mapping-729"></span><span class="token del" data-title="return_type_definition/parameter"><span class="marker" id="mapping-730"></span><span class="token mv" id="move-src-240" data-title="parameter/type_name">bool</span></span>)</span> <span class="marker" id="mapping-731"></span><span class="token del" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-732"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-733"></span><span class="token del" data-title="expression_statement/call_expression">require (<span class="marker" id="mapping-734"></span><span class="token del" data-title="call_expression/call_argument">attributes[IS_BLACKLISTED][_spender] == 0</span>, <span class="marker" id="mapping-735"></span><span class="token mv" id="move-src-241" data-title="call_expression/call_argument">"blacklisted"</span>)</span>;</span>
        <span class="marker" id="mapping-736"></span><span class="token del" data-title="function_body/variable_declaration_statement"><span class="marker" id="mapping-737"></span><span class="token del" data-title="variable_declaration_statement/variable_declaration">uint256 depositAddressValue</span> = <span class="marker" id="mapping-738"></span><span class="token del" data-title="variable_declaration_statement/array_access"><span class="marker" id="mapping-739"></span><span class="token del" data-title="array_access/array_access">attributes[IS_DEPOSIT_ADDRESS]</span>[<span class="marker" id="mapping-740"></span><span class="token del" data-title="array_access/type_cast_expression"><span class="marker" id="mapping-741"></span><span class="token del" data-title="type_cast_expression/primitive_type">address</span>(<span class="marker" id="mapping-742"></span><span class="token mv" id="move-src-242" data-title="type_cast_expression/call_argument"><span class="marker" id="mapping-743"></span><span class="token mv" id="move-src-243" data-title="call_argument/binary_expression">uint256(<span class="marker" id="mapping-744"></span><span class="token upd" id="move-src-244" data-title="call_argument/identifier">_to</span>) &gt;&gt; 20</span></span>)</span>]</span>;</span>
        <span class="marker" id="mapping-745"></span><span class="token del" data-title="function_body/if_statement">if (depositAddressValue != 0) {
            _to = address(depositAddressValue);
        }</span>
        <span class="marker" id="mapping-746"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-747"></span><span class="token del" data-title="expression_statement/call_expression">require (<span class="marker" id="mapping-748"></span><span class="token del" data-title="call_expression/call_argument">attributes[IS_BLACKLISTED][_to] == 0</span>, <span class="marker" id="mapping-749"></span><span class="token mv" id="move-src-245" data-title="call_expression/call_argument">"blacklisted"</span>)</span>;</span>
        <span class="marker" id="mapping-750"></span><span class="token mv" id="move-src-246" data-title="function_body/expression_statement"><span class="marker" id="mapping-751"></span><span class="token mv" id="move-src-247" data-title="expression_statement/call_expression"><span class="marker" id="mapping-752"></span><span class="token del" data-title="call_expression/identifier">require</span> (<span class="marker" id="mapping-753"></span><span class="token del" data-title="call_expression/call_argument">attributes[IS_BLACKLISTED][_from] == 0</span>, "blacklisted")</span>;</span>
        <span class="marker" id="mapping-754"></span><span class="token del" data-title="function_body/return_statement">return (_to, attributes[IS_REGISTERED_CONTRACT][_to] != 0);</span>
    }</span></span>

    <span class="marker" id="mapping-755"></span><span class="token del" data-title="contract_body/function_definition">function _requireCanMint(<span class="marker" id="mapping-756"></span><span class="token del" data-title="function_definition/parameter">address _to</span>) <span class="marker" id="mapping-757"></span><span class="token mv" id="move-src-248" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-758"></span><span class="token del" data-title="function_definition/state_mutability">view</span> <span class="marker" id="mapping-759"></span><span class="token del" data-title="function_definition/return_type_definition">returns (<span class="marker" id="mapping-760"></span><span class="token del" data-title="return_type_definition/parameter">address</span>, <span class="marker" id="mapping-761"></span><span class="token del" data-title="return_type_definition/parameter"><span class="marker" id="mapping-762"></span><span class="token mv" id="move-src-249" data-title="parameter/type_name">bool</span></span>)</span> <span class="marker" id="mapping-763"></span><span class="token del" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-764"></span><span class="token del" data-title="function_body/variable_declaration_statement"><span class="marker" id="mapping-765"></span><span class="token del" data-title="variable_declaration_statement/variable_declaration">uint256 depositAddressValue</span> = <span class="marker" id="mapping-766"></span><span class="token del" data-title="variable_declaration_statement/array_access"><span class="marker" id="mapping-767"></span><span class="token del" data-title="array_access/array_access">attributes[IS_DEPOSIT_ADDRESS]</span>[<span class="marker" id="mapping-768"></span><span class="token del" data-title="array_access/type_cast_expression"><span class="marker" id="mapping-769"></span><span class="token del" data-title="type_cast_expression/primitive_type">address</span>(<span class="marker" id="mapping-770"></span><span class="token del" data-title="type_cast_expression/call_argument"><span class="marker" id="mapping-771"></span><span class="token mv" id="move-src-250" data-title="call_argument/binary_expression">uint256(<span class="marker" id="mapping-772"></span><span class="token upd" id="move-src-251" data-title="call_argument/identifier">_to</span>) &gt;&gt; 20</span></span>)</span>]</span>;</span>
        <span class="marker" id="mapping-773"></span><span class="token del" data-title="function_body/if_statement">if (depositAddressValue != 0) {
            _to = address(depositAddressValue);
        }</span>
        <span class="marker" id="mapping-774"></span><span class="token mv" id="move-src-252" data-title="function_body/expression_statement">require (<span class="marker" id="mapping-775"></span><span class="token del" data-title="binary_expression/array_access">attributes[IS_BLACKLISTED][_to]</span> <span class="marker" id="mapping-776"></span><span class="token del" data-title="binary_expression/==">==</span> <span class="marker" id="mapping-777"></span><span class="token del" data-title="binary_expression/number_literal">0</span>, "blacklisted");</span>
        <span class="marker" id="mapping-778"></span><span class="token del" data-title="function_body/return_statement">return (_to, attributes[IS_REGISTERED_CONTRACT][_to] != 0);</span>
    }</span></span>

    <span class="marker" id="mapping-779"></span><span class="token del" data-title="contract_body/function_definition">function _requireOnlyCanBurn(<span class="marker" id="mapping-780"></span><span class="token del" data-title="function_definition/parameter">address _from</span>) <span class="marker" id="mapping-781"></span><span class="token del" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-782"></span><span class="token del" data-title="function_definition/state_mutability">view</span> <span class="marker" id="mapping-783"></span><span class="token del" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-784"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-785"></span><span class="token del" data-title="expression_statement/call_expression">require (<span class="marker" id="mapping-786"></span><span class="token del" data-title="call_expression/call_argument">attributes[canBurn()][_from] != 0</span>, <span class="marker" id="mapping-787"></span><span class="token mv" id="move-src-253" data-title="call_expression/call_argument">"cannot burn from this address"</span>)</span>;</span>
    }</span></span>

    <span class="marker" id="mapping-788"></span><span class="token del" data-title="contract_body/function_definition">function _requireCanBurn(<span class="marker" id="mapping-789"></span><span class="token del" data-title="function_definition/parameter">address _from</span>) <span class="marker" id="mapping-790"></span><span class="token mv" id="move-src-254" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-791"></span><span class="token del" data-title="function_definition/state_mutability">view</span> <span class="marker" id="mapping-792"></span><span class="token del" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-793"></span><span class="token mv" id="move-src-255" data-title="function_body/expression_statement">require (<span class="marker" id="mapping-794"></span><span class="token del" data-title="binary_expression/array_access">attributes[IS_BLACKLISTED][_from]</span> <span class="marker" id="mapping-795"></span><span class="token del" data-title="binary_expression/==">==</span> <span class="marker" id="mapping-796"></span><span class="token del" data-title="binary_expression/number_literal">0</span>, "blacklisted");</span>
        <span class="marker" id="mapping-797"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-798"></span><span class="token del" data-title="expression_statement/call_expression">require (<span class="marker" id="mapping-799"></span><span class="token del" data-title="call_expression/call_argument">attributes[canBurn()][_from] != 0</span>, <span class="marker" id="mapping-800"></span><span class="token mv" id="move-src-256" data-title="call_expression/call_argument">"cannot burn from this address"</span>)</span>;</span>
    }</span></span>

    <span class="marker" id="mapping-801"></span><span class="token del" data-title="contract_body/function_definition">function paused() <span class="marker" id="mapping-802"></span><span class="token del" data-title="function_definition/visibility">public</span> <span class="marker" id="mapping-803"></span><span class="token mv" id="move-src-257" data-title="function_definition/state_mutability">pure</span> <span class="marker" id="mapping-804"></span><span class="token del" data-title="function_definition/return_type_definition">returns (bool)</span> <span class="marker" id="mapping-805"></span><span class="token del" data-title="function_definition/function_body">{
        return false;
    }</span></span>
}</span></span>

<span class="marker" id="mapping-806"></span><span class="token del" data-title="source_file/comment">// File: contracts/TrueCurrencies/RewardToken.sol</span>

<span class="marker" id="mapping-807"></span><span class="token del" data-title="source_file/pragma_directive">pragma solidity 0.5.13;</span>



<span class="marker" id="mapping-808"></span><span class="token del" data-title="source_file/comment">/**
 * @title RewardToken
 * @dev Non-transferrable token meant to represent
 * RewardTokens are TrueCurrencies owed by a financial opportunity
 *
 * -- Overview --
 * RewardTokens are redeemable for an underlying Token.
 * RewardTokens are non-transferrable for compliance reasons
 * The caller of depositor is responsible for exchanging their
 * tokens, rather just keep accounting of user rewardToken balances
 *
 * -- Financial Opportunity --
 * RewardTokens are backed by an underlying financial opportunity
 * Each financial opportunity can accept Token deposits for
 * See FinancialOpportunity.sol
 *
 * -- Mint/Redeem/Burn --
 * To create rewardTokens, we call mintRewardToken with some amount of TUSD
 * To redeem rewardTokens we call redeemRewardToken and recieve TUSD
 * Only the account that has rewardTokens can burn reward tokens. The only
 * time we would want to burn rewardTokens is if the underlying opportunity
 * is no longer redeemable, and we want to wipe the debt.
 *
 */</span>
<span class="marker" id="mapping-809"></span><span class="token del" data-title="source_file/contract_declaration">contract RewardToken is <span class="marker" id="mapping-810"></span><span class="token del" data-title="contract_declaration/inheritance_specifier">CompliantDepositTokenWithHook</span> <span class="marker" id="mapping-811"></span><span class="token del" data-title="contract_declaration/contract_body">{

    /* variables in proxy storage
    mapping(address =&gt; FinancialOpportunity) finOps;
    mapping(address =&gt; mapping(address =&gt; uint256)) finOpBalances;
    mapping(address =&gt; uint256) finOpSupply;
    */

    <span class="marker" id="mapping-812"></span><span class="token del" data-title="contract_body/event_definition">event MintRewardToken(address account, uint256 amount, address finOp);</span>
    <span class="marker" id="mapping-813"></span><span class="token del" data-title="contract_body/event_definition">event RedeemRewardToken(address account, uint256 amount, address finOp);</span>
    <span class="marker" id="mapping-814"></span><span class="token del" data-title="contract_body/event_definition">event BurnRewardToken(address account, uint256 amount, address finOp);</span>

    /**
     * @dev Only addresses registered in this contract's mapping are valid
     *
     * @param finOp reverts if this finOp is not registered
     */
    <span class="marker" id="mapping-815"></span><span class="token del" data-title="contract_body/modifier_definition">modifier validFinOp(<span class="marker" id="mapping-816"></span><span class="token del" data-title="modifier_definition/parameter">address finOp</span>) <span class="marker" id="mapping-817"></span><span class="token del" data-title="modifier_definition/function_body">{
        <span class="marker" id="mapping-818"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-819"></span><span class="token del" data-title="expression_statement/call_expression">require(<span class="marker" id="mapping-820"></span><span class="token del" data-title="call_expression/call_argument"><span class="marker" id="mapping-821"></span><span class="token del" data-title="call_argument/binary_expression">finOp != <span class="marker" id="mapping-822"></span><span class="token mv" id="move-src-258" data-title="binary_expression/type_cast_expression">address(0)</span></span></span>, <span class="marker" id="mapping-823"></span><span class="token mv" id="move-src-259" data-title="call_expression/call_argument">"invalid opportunity"</span>)</span>;</span>
        <span class="marker" id="mapping-824"></span><span class="token del" data-title="function_body/expression_statement">_;</span>
    }</span></span>

    /**
     * @dev get debt balance of account in rewardToken
     *
     * @param finOp financial opportunity
     */
    <span class="marker" id="mapping-825"></span><span class="token del" data-title="contract_body/function_definition">function rewardTokenSupply(
        address finOp
    ) public view validFinOp(finOp) returns (uint256) {
        return finOpSupply[finOp];
    }</span>

    /**
     * @dev get debt balance of account in rewardToken
     *
     * @param account account to get rewardToken balance of
     * @param finOp financial opportunity
     */
    <span class="marker" id="mapping-826"></span><span class="token del" data-title="contract_body/function_definition">function rewardTokenBalance(
        <span class="marker" id="mapping-827"></span><span class="token mv" id="move-src-260" data-title="function_definition/parameter">address account</span>,
        <span class="marker" id="mapping-828"></span><span class="token del" data-title="function_definition/parameter">address finOp</span>
    ) <span class="marker" id="mapping-829"></span><span class="token del" data-title="function_definition/visibility">public</span> <span class="marker" id="mapping-830"></span><span class="token del" data-title="function_definition/state_mutability">view</span> <span class="marker" id="mapping-831"></span><span class="token del" data-title="function_definition/modifier_invocation">validFinOp(finOp)</span> <span class="marker" id="mapping-832"></span><span class="token del" data-title="function_definition/return_type_definition">returns (uint256)</span> <span class="marker" id="mapping-833"></span><span class="token del" data-title="function_definition/function_body">{
        return finOpBalances[finOp][account];
    }</span></span>

    /**
     * @dev mint rewardToken for financial opportunity
     *
     * For valid finOp, deposit Token into finOp
     * Update finOpSupply &amp; finOpBalance for account
     * Emit mintRewardToken event on success
     *
     * @param account account to mint rewardToken for
     * @param amount amount of depositToken to mint
     * @param finOp financial opportunity address
     */
    <span class="marker" id="mapping-834"></span><span class="token del" data-title="contract_body/function_definition">function mintRewardToken(
        <span class="marker" id="mapping-835"></span><span class="token mv" id="move-src-261" data-title="function_definition/parameter">address account</span>,
        <span class="marker" id="mapping-836"></span><span class="token mv" id="move-src-262" data-title="function_definition/parameter">uint256 amount</span>,
        <span class="marker" id="mapping-837"></span><span class="token del" data-title="function_definition/parameter">address finOp</span>
    ) <span class="marker" id="mapping-838"></span><span class="token del" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-839"></span><span class="token del" data-title="function_definition/modifier_invocation">validFinOp(finOp)</span> <span class="marker" id="mapping-840"></span><span class="token del" data-title="function_definition/return_type_definition">returns (uint256)</span> <span class="marker" id="mapping-841"></span><span class="token del" data-title="function_definition/function_body">{
        // require sufficient balance
        <span class="marker" id="mapping-842"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-843"></span><span class="token del" data-title="expression_statement/call_expression">require(<span class="marker" id="mapping-844"></span><span class="token del" data-title="call_expression/call_argument"><span class="marker" id="mapping-845"></span><span class="token del" data-title="call_argument/binary_expression"><span class="marker" id="mapping-846"></span><span class="token del" data-title="binary_expression/call_expression"><span class="marker" id="mapping-847"></span><span class="token del" data-title="call_expression/member_expression">super.balanceOf</span>(<span class="marker" id="mapping-848"></span><span class="token mv" id="move-src-263" data-title="call_expression/call_argument">account</span>)</span> &gt;= amount</span></span>, <span class="marker" id="mapping-849"></span><span class="token mv" id="move-src-264" data-title="call_expression/call_argument">"insufficient token balance"</span>)</span>;</span>

        // approve finOp can spend Token
        <span class="marker" id="mapping-850"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-851"></span><span class="token del" data-title="expression_statement/call_expression">_setAllowance(<span class="marker" id="mapping-852"></span><span class="token mv" id="move-src-265" data-title="call_expression/call_argument">account</span>, <span class="marker" id="mapping-853"></span><span class="token del" data-title="call_expression/call_argument">finOp</span>, <span class="marker" id="mapping-854"></span><span class="token mv" id="move-src-266" data-title="call_expression/call_argument">amount</span>)</span>;</span>

        // deposit into finOp
        <span class="marker" id="mapping-855"></span><span class="token del" data-title="function_body/variable_declaration_statement"><span class="marker" id="mapping-856"></span><span class="token del" data-title="variable_declaration_statement/variable_declaration">uint256 rewardAmount</span> = <span class="marker" id="mapping-857"></span><span class="token del" data-title="variable_declaration_statement/call_expression"><span class="marker" id="mapping-858"></span><span class="token del" data-title="call_expression/member_expression">_getFinOp(finOp).deposit</span>(<span class="marker" id="mapping-859"></span><span class="token mv" id="move-src-267" data-title="call_expression/call_argument">account</span>, <span class="marker" id="mapping-860"></span><span class="token mv" id="move-src-268" data-title="call_expression/call_argument">amount</span>)</span>;</span>

        // increase finOp rewardToken supply
        <span class="marker" id="mapping-861"></span><span class="token del" data-title="function_body/expression_statement">finOpSupply[finOp] = finOpSupply[finOp].add(rewardAmount);</span>

        // increase account rewardToken balance
        <span class="marker" id="mapping-862"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-863"></span><span class="token del" data-title="expression_statement/call_expression">_addRewardBalance(<span class="marker" id="mapping-864"></span><span class="token mv" id="move-src-269" data-title="call_expression/call_argument">account</span>, <span class="marker" id="mapping-865"></span><span class="token del" data-title="call_expression/call_argument">rewardAmount</span>, <span class="marker" id="mapping-866"></span><span class="token del" data-title="call_expression/call_argument">finOp</span>)</span>;</span>

        // emit mint event
        <span class="marker" id="mapping-867"></span><span class="token mv" id="move-src-270" data-title="function_body/emit_statement">emit <span class="marker" id="mapping-868"></span><span class="token upd" id="move-src-271" data-title="emit_statement/identifier"><span class="cupd">Mint</span>RewardToken</span>(account, amount<span class="marker" id="mapping-869"></span><span class="token del" data-title="emit_statement/,">,</span> <span class="marker" id="mapping-870"></span><span class="token del" data-title="emit_statement/call_argument">finOp</span>);</span>

        <span class="marker" id="mapping-871"></span><span class="token del" data-title="function_body/return_statement">return rewardAmount;</span>
    }</span></span>

    /**
     * @dev redeem rewardToken balance for depositToken
     *
     * For valid finOp, deposit Token into finOp
     * Update finOpSupply &amp; finOpBalance for account
     * Emit mintRewardToken event on success
     *
     * @param account account to redeem rewardToken for
     * @param amount depositToken amount to redeem
     * @param finOp financial opportunitu address
     */
    <span class="marker" id="mapping-872"></span><span class="token del" data-title="contract_body/function_definition">function redeemRewardToken(
        <span class="marker" id="mapping-873"></span><span class="token mv" id="move-src-272" data-title="function_definition/parameter">address account</span>,
        <span class="marker" id="mapping-874"></span><span class="token mv" id="move-src-273" data-title="function_definition/parameter">uint256 amount</span>,
        <span class="marker" id="mapping-875"></span><span class="token del" data-title="function_definition/parameter">address finOp</span>
    ) <span class="marker" id="mapping-876"></span><span class="token del" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-877"></span><span class="token del" data-title="function_definition/modifier_invocation">validFinOp(finOp)</span> <span class="marker" id="mapping-878"></span><span class="token del" data-title="function_definition/return_type_definition">returns (uint256)</span> <span class="marker" id="mapping-879"></span><span class="token del" data-title="function_definition/function_body">{
        // require sufficient balance
        <span class="marker" id="mapping-880"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-881"></span><span class="token del" data-title="expression_statement/call_expression">require(<span class="marker" id="mapping-882"></span><span class="token del" data-title="call_expression/call_argument"><span class="marker" id="mapping-883"></span><span class="token del" data-title="call_argument/binary_expression"><span class="marker" id="mapping-884"></span><span class="token del" data-title="binary_expression/call_expression">rewardTokenBalance(<span class="marker" id="mapping-885"></span><span class="token mv" id="move-src-274" data-title="call_expression/call_argument">account</span>, <span class="marker" id="mapping-886"></span><span class="token del" data-title="call_expression/call_argument">finOp</span>)</span> &gt;= amount</span></span>, <span class="marker" id="mapping-887"></span><span class="token mv" id="move-src-275" data-title="call_expression/call_argument">"insufficient reward balance"</span>)</span>;</span>

        // withdraw from finOp, giving TUSD to account
        <span class="marker" id="mapping-888"></span><span class="token del" data-title="function_body/variable_declaration_statement"><span class="marker" id="mapping-889"></span><span class="token del" data-title="variable_declaration_statement/variable_declaration">uint256 tokenAmount</span> = <span class="marker" id="mapping-890"></span><span class="token del" data-title="variable_declaration_statement/call_expression"><span class="marker" id="mapping-891"></span><span class="token del" data-title="call_expression/member_expression">_getFinOp(finOp).redeem</span>(<span class="marker" id="mapping-892"></span><span class="token mv" id="move-src-276" data-title="call_expression/call_argument">account</span>, <span class="marker" id="mapping-893"></span><span class="token mv" id="move-src-277" data-title="call_expression/call_argument">amount</span>)</span>;</span>

        // decrease finOp rewardToken supply
        <span class="marker" id="mapping-894"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-895"></span><span class="token del" data-title="expression_statement/assignment_expression"><span class="marker" id="mapping-896"></span><span class="token del" data-title="assignment_expression/array_access">finOpSupply[finOp]</span> = <span class="marker" id="mapping-897"></span><span class="token del" data-title="assignment_expression/call_expression"><span class="marker" id="mapping-898"></span><span class="token del" data-title="call_expression/member_expression">finOpSupply[finOp].sub</span>(<span class="marker" id="mapping-899"></span><span class="token mv" id="move-src-278" data-title="call_expression/call_argument">amount</span>)</span></span>;</span>

        // decrease account rewardToken balance
        <span class="marker" id="mapping-900"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-901"></span><span class="token del" data-title="expression_statement/call_expression">_subRewardBalance(<span class="marker" id="mapping-902"></span><span class="token mv" id="move-src-279" data-title="call_expression/call_argument">account</span>, <span class="marker" id="mapping-903"></span><span class="token mv" id="move-src-280" data-title="call_expression/call_argument">amount</span>, <span class="marker" id="mapping-904"></span><span class="token del" data-title="call_expression/call_argument">finOp</span>)</span>;</span>

        // emit mint event
        <span class="marker" id="mapping-905"></span><span class="token del" data-title="function_body/emit_statement">emit RedeemRewardToken(<span class="marker" id="mapping-906"></span><span class="token mv" id="move-src-281" data-title="emit_statement/call_argument">account</span>, <span class="marker" id="mapping-907"></span><span class="token del" data-title="emit_statement/call_argument">tokenAmount</span>, <span class="marker" id="mapping-908"></span><span class="token del" data-title="emit_statement/call_argument">finOp</span>);</span>

        <span class="marker" id="mapping-909"></span><span class="token del" data-title="function_body/return_statement">return tokenAmount;</span>
    }</span></span>

    /**
     * @dev burn rewardToken without redeeming
     *
     * Burn rewardToken for finOp
     *
     * @param account account to burn rewardToken for
     * @param amount depositToken amount to burn
     * @param finOp financial opportunity address
     */
    <span class="marker" id="mapping-910"></span><span class="token del" data-title="contract_body/function_definition">function burnRewardToken(
        <span class="marker" id="mapping-911"></span><span class="token mv" id="move-src-282" data-title="function_definition/parameter">address account</span>,
        <span class="marker" id="mapping-912"></span><span class="token mv" id="move-src-283" data-title="function_definition/parameter">uint256 amount</span>,
        <span class="marker" id="mapping-913"></span><span class="token del" data-title="function_definition/parameter">address finOp</span>
    )
        <span class="marker" id="mapping-914"></span><span class="token mv" id="move-src-284" data-title="function_definition/visibility">internal</span>
        <span class="marker" id="mapping-915"></span><span class="token del" data-title="function_definition/modifier_invocation">validFinOp(finOp)</span>
    <span class="marker" id="mapping-916"></span><span class="token del" data-title="function_definition/function_body">{
        // burn call must come from sender
        <span class="marker" id="mapping-917"></span><span class="token del" data-title="function_body/expression_statement">require(msg.sender == account);</span>

        // sender must have rewardToken amount to burn
        <span class="marker" id="mapping-918"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-919"></span><span class="token del" data-title="expression_statement/call_expression">require(<span class="marker" id="mapping-920"></span><span class="token del" data-title="call_expression/call_argument"><span class="marker" id="mapping-921"></span><span class="token del" data-title="call_argument/binary_expression"><span class="marker" id="mapping-922"></span><span class="token del" data-title="binary_expression/call_expression">rewardTokenBalance(<span class="marker" id="mapping-923"></span><span class="token mv" id="move-src-285" data-title="call_expression/call_argument">account</span>, <span class="marker" id="mapping-924"></span><span class="token del" data-title="call_expression/call_argument">finOp</span>)</span> &gt;= amount</span></span>)</span>;</span>

        // subtract reward balance from
        <span class="marker" id="mapping-925"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-926"></span><span class="token del" data-title="expression_statement/call_expression">_subRewardBalance(<span class="marker" id="mapping-927"></span><span class="token mv" id="move-src-286" data-title="call_expression/call_argument">account</span>, <span class="marker" id="mapping-928"></span><span class="token mv" id="move-src-287" data-title="call_expression/call_argument">amount</span>, <span class="marker" id="mapping-929"></span><span class="token del" data-title="call_expression/call_argument">finOp</span>)</span>;</span>

        // reduce total supply
        <span class="marker" id="mapping-930"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-931"></span><span class="token del" data-title="expression_statement/call_expression"><span class="marker" id="mapping-932"></span><span class="token del" data-title="call_expression/member_expression">finOpSupply[finOp].sub</span>(<span class="marker" id="mapping-933"></span><span class="token mv" id="move-src-288" data-title="call_expression/call_argument">amount</span>)</span>;</span>

        // burn event
        <span class="marker" id="mapping-934"></span><span class="token mv" id="move-src-289" data-title="function_body/emit_statement">emit <span class="marker" id="mapping-935"></span><span class="token upd" id="move-src-290" data-title="emit_statement/identifier"><span class="cupd">Burn</span>RewardToken</span>(account, amount<span class="marker" id="mapping-936"></span><span class="token del" data-title="emit_statement/,">,</span> <span class="marker" id="mapping-937"></span><span class="token del" data-title="emit_statement/call_argument">finOp</span>);</span>
    }</span></span>

    /**
     * @dev add rewardToken balance to account
     *
     * @param account account to add to
     * @param amount rewardToken amount to add
     * @param finOp financial opportunity to add reward tokens to
     */
    <span class="marker" id="mapping-938"></span><span class="token mv" id="move-src-291" data-title="contract_body/function_definition">function <span class="marker" id="mapping-939"></span><span class="token upd" id="move-src-292" data-title="function_definition/identifier"><span class="cupd">_</span>addRewa<span class="cupd">r</span>dBalance</span>(address account, uint256 amount<span class="marker" id="mapping-940"></span><span class="token del" data-title="function_definition/,">,</span> <span class="marker" id="mapping-941"></span><span class="token del" data-title="function_definition/parameter">address finOp</span>) internal {
        <span class="marker" id="mapping-942"></span><span class="token del" data-title="expression_statement/assignment_expression"><span class="marker" id="mapping-943"></span><span class="token del" data-title="assignment_expression/array_access">finOpBalances[finOp][account]</span> = <span class="marker" id="mapping-944"></span><span class="token del" data-title="assignment_expression/call_expression"><span class="marker" id="mapping-945"></span><span class="token del" data-title="call_expression/member_expression">finOpBalances[finOp][account].add</span>(<span class="marker" id="mapping-946"></span><span class="token mv" id="move-src-293" data-title="call_expression/call_argument">amount</span>)</span></span>;
    }</span>

    /**
     * @dev subtract rewardToken balance from account
     *
     * @param account account to subtract from
     * @param amount rewardToken ammount to subtract
     * @param finOp financial opportunity
     */
    <span class="marker" id="mapping-947"></span><span class="token del" data-title="contract_body/function_definition">function _subRewardBalance(<span class="marker" id="mapping-948"></span><span class="token mv" id="move-src-294" data-title="function_definition/parameter">address account</span>, <span class="marker" id="mapping-949"></span><span class="token mv" id="move-src-295" data-title="function_definition/parameter">uint256 amount</span>, <span class="marker" id="mapping-950"></span><span class="token del" data-title="function_definition/parameter">address finOp</span>) <span class="marker" id="mapping-951"></span><span class="token mv" id="move-src-296" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-952"></span><span class="token del" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-953"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-954"></span><span class="token del" data-title="expression_statement/assignment_expression"><span class="marker" id="mapping-955"></span><span class="token del" data-title="assignment_expression/array_access">finOpBalances[finOp][account]</span> = <span class="marker" id="mapping-956"></span><span class="token del" data-title="assignment_expression/call_expression"><span class="marker" id="mapping-957"></span><span class="token del" data-title="call_expression/member_expression">finOpBalances[finOp][account].sub</span>(<span class="marker" id="mapping-958"></span><span class="token mv" id="move-src-297" data-title="call_expression/call_argument">amount</span>)</span></span>;</span>
    }</span></span>

    /**
     * @dev Utility to convert depositToken value to rewardToken value
     *
     * @param amount depositToken amount to convert to rewardToken
     * @param finOp financial opportunity address
     */
    <span class="marker" id="mapping-959"></span><span class="token del" data-title="contract_body/function_definition">function _toRewardToken(<span class="marker" id="mapping-960"></span><span class="token mv" id="move-src-298" data-title="function_definition/parameter">uint256 amount</span>, <span class="marker" id="mapping-961"></span><span class="token del" data-title="function_definition/parameter">address finOp</span>) <span class="marker" id="mapping-962"></span><span class="token del" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-963"></span><span class="token del" data-title="function_definition/state_mutability">view</span> <span class="marker" id="mapping-964"></span><span class="token del" data-title="function_definition/return_type_definition">returns (uint256)</span> <span class="marker" id="mapping-965"></span><span class="token del" data-title="function_definition/function_body">{
        uint256 ratio = _getFinOp(finOp).tokenValue();
        return amount.mul(10 ** 18).div(ratio);
    }</span></span>

    /**
     * @dev Utility to convert rewardToken value to depositToken value
     *
     * @param amount rewardToken amount to convert to depositToken
     * @param finOp financial opportunity address
     */
    <span class="marker" id="mapping-966"></span><span class="token del" data-title="contract_body/function_definition">function _toToken(<span class="marker" id="mapping-967"></span><span class="token del" data-title="function_definition/parameter">uint amount</span>, <span class="marker" id="mapping-968"></span><span class="token del" data-title="function_definition/parameter">address finOp</span>) <span class="marker" id="mapping-969"></span><span class="token del" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-970"></span><span class="token del" data-title="function_definition/state_mutability">view</span> <span class="marker" id="mapping-971"></span><span class="token del" data-title="function_definition/return_type_definition">returns (uint256)</span> <span class="marker" id="mapping-972"></span><span class="token del" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-973"></span><span class="token del" data-title="function_body/variable_declaration_statement">uint256 ratio = _getFinOp(finOp).tokenValue();</span>
        <span class="marker" id="mapping-974"></span><span class="token del" data-title="function_body/return_statement">return <span class="marker" id="mapping-975"></span><span class="token del" data-title="return_statement/call_expression"><span class="marker" id="mapping-976"></span><span class="token del" data-title="call_expression/member_expression"><span class="marker" id="mapping-977"></span><span class="token del" data-title="member_expression/call_expression"><span class="marker" id="mapping-978"></span><span class="token del" data-title="call_expression/member_expression">ratio.mul</span>(<span class="marker" id="mapping-979"></span><span class="token mv" id="move-src-299" data-title="call_expression/call_argument">amount</span>)</span>.div</span>(<span class="marker" id="mapping-980"></span><span class="token del" data-title="call_expression/call_argument">10 ** 18</span>)</span>;</span>
    }</span></span>

    /**
     * @dev utility to get FinancialOpportunity for address
     *
     * @param finOp financial opportunity to get
     */
    <span class="marker" id="mapping-981"></span><span class="token del" data-title="contract_body/function_definition">function _getFinOp(address finOp) internal view returns (FinancialOpportunity) {
        return FinancialOpportunity(finOp);
    }</span>
}</span></span>

<span class="marker" id="mapping-982"></span><span class="token del" data-title="source_file/comment">// File: contracts/TrueCurrencies/RewardTokenWithReserve.sol</span>

<span class="marker" id="mapping-983"></span><span class="token del" data-title="source_file/pragma_directive">pragma solidity 0.5.13;</span>


<span class="marker" id="mapping-984"></span><span class="token del" data-title="source_file/comment">/**
 * @title RewardTokenWithReserve
 * @dev Provides a reserve to swap rewardTokens for gas savings
 *
 * -- Overview --
 * The Reserve holds Tokens and RewardTokens
 * Because gas costs can be high for depositing/redeeming in financial
 * opportunities, we use this contract to keep a reserve of tokens
 * to provide swap opportunities
 *
 */</span>
<span class="marker" id="mapping-985"></span><span class="token del" data-title="source_file/contract_declaration">contract RewardTokenWithReserve is <span class="marker" id="mapping-986"></span><span class="token del" data-title="contract_declaration/inheritance_specifier">RewardToken</span> <span class="marker" id="mapping-987"></span><span class="token del" data-title="contract_declaration/contract_body">{

    // Reserve is an address which nobody has the private key to
    // Reserves of TUSD and TrueRewardBackedToken are held at this addess
    <span class="marker" id="mapping-988"></span><span class="token mv" id="move-src-300" data-title="contract_body/state_variable_declaration">address <span class="marker" id="mapping-989"></span><span class="token del" data-title="state_variable_declaration/visibility">public</span> <span class="marker" id="mapping-990"></span><span class="token del" data-title="state_variable_declaration/constant">constant</span> <span class="marker" id="mapping-991"></span><span class="token upd" id="move-src-301" data-title="state_variable_declaration/identifier">RESERVE</span> <span class="marker" id="mapping-992"></span><span class="token del" data-title="state_variable_declaration/=">=</span> <span class="marker" id="mapping-993"></span><span class="token del" data-title="state_variable_declaration/number_literal">0xf000000000000000000000000000000000000000</span>;</span>

    <span class="marker" id="mapping-994"></span><span class="token del" data-title="contract_body/event_definition">event SwapRewardForToken(address account, address receiver, uint256 amount, address finOp);</span>
    <span class="marker" id="mapping-995"></span><span class="token del" data-title="contract_body/event_definition">event SwapTokenForReward(address account, address receiver, uint256 amount, address finOp);</span>

    /**
     * @dev get reserve token balance
     *
     * @return token balance of reserve
     */
    <span class="marker" id="mapping-996"></span><span class="token del" data-title="contract_body/function_definition">function reserveBalance() public view returns (uint256) {
        return super.balanceOf(RESERVE);
    }</span>

    /**
     * @dev Get rewardToken reserve balance
     *
     * @param finOp address of financial opportunity
     * @return rewardToken balance of reserve for finOp
     */
    <span class="marker" id="mapping-997"></span><span class="token del" data-title="contract_body/function_definition">function reserveRewardBalance(address finOp) public view returns (uint) {
        return rewardTokenBalance(RESERVE, finOp);
    }</span>

    /**
     * @dev Withdraw Token from reserve through transferAll
     *
     * @param to address to withdraw to
     * @param value amount to withdraw
     */
    <span class="marker" id="mapping-998"></span><span class="token del" data-title="contract_body/function_definition">function reserveWithdraw(<span class="marker" id="mapping-999"></span><span class="token mv" id="move-src-302" data-title="function_definition/parameter">address to</span>, <span class="marker" id="mapping-1000"></span><span class="token mv" id="move-src-303" data-title="function_definition/parameter">uint256 value</span>) <span class="marker" id="mapping-1001"></span><span class="token del" data-title="function_definition/visibility">external</span> <span class="marker" id="mapping-1002"></span><span class="token del" data-title="function_definition/modifier_invocation">onlyOwner</span> <span class="marker" id="mapping-1003"></span><span class="token del" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-1004"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-1005"></span><span class="token del" data-title="expression_statement/call_expression">_transferAllArgs(<span class="marker" id="mapping-1006"></span><span class="token del" data-title="call_expression/call_argument">RESERVE</span>, <span class="marker" id="mapping-1007"></span><span class="token del" data-title="call_expression/call_argument">to</span>, <span class="marker" id="mapping-1008"></span><span class="token mv" id="move-src-304" data-title="call_expression/call_argument">value</span>)</span>;</span>
    }</span></span>

    /**
     * @dev Allow this contract to rebalance currency reserves
     * This is called when there is too much money in an opportunity and we want
     * to get more TrueCurrency.
     * This allows us to reduct the cost of transfers 5-10x in/out of opportunities
     *
     * @param amount amount of rewardTokens to redeem
     * @param finOp financial opportunity to redeem from
     */
    <span class="marker" id="mapping-1009"></span><span class="token del" data-title="contract_body/function_definition">function reserveRedeem(<span class="marker" id="mapping-1010"></span><span class="token mv" id="move-src-305" data-title="function_definition/parameter">uint256 amount</span>, <span class="marker" id="mapping-1011"></span><span class="token del" data-title="function_definition/parameter">address finOp</span>) <span class="marker" id="mapping-1012"></span><span class="token del" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-1013"></span><span class="token del" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-1014"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-1015"></span><span class="token del" data-title="expression_statement/call_expression">redeemRewardToken(<span class="marker" id="mapping-1016"></span><span class="token del" data-title="call_expression/call_argument">RESERVE</span>, <span class="marker" id="mapping-1017"></span><span class="token mv" id="move-src-306" data-title="call_expression/call_argument">amount</span>, <span class="marker" id="mapping-1018"></span><span class="token del" data-title="call_expression/call_argument">finOp</span>)</span>;</span>
    }</span></span>

    /**
     * @dev Allow this contract to rebalance currency reserves
     * This is called when there is not enough rewardToken for an
     * opportunity and we want to add rewardTokens to the reserve
     *
     * @param amount amount of Token to redeem for rewardToken
     * @param finOp financial opportunity to redeem for
     */
    <span class="marker" id="mapping-1019"></span><span class="token del" data-title="contract_body/function_definition">function reserveMint(<span class="marker" id="mapping-1020"></span><span class="token mv" id="move-src-307" data-title="function_definition/parameter">uint256 amount</span>, <span class="marker" id="mapping-1021"></span><span class="token del" data-title="function_definition/parameter">address finOp</span>) <span class="marker" id="mapping-1022"></span><span class="token del" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-1023"></span><span class="token del" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-1024"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-1025"></span><span class="token del" data-title="expression_statement/call_expression">mintRewardToken(<span class="marker" id="mapping-1026"></span><span class="token del" data-title="call_expression/call_argument">RESERVE</span>, <span class="marker" id="mapping-1027"></span><span class="token mv" id="move-src-308" data-title="call_expression/call_argument">amount</span>, <span class="marker" id="mapping-1028"></span><span class="token del" data-title="call_expression/call_argument">finOp</span>)</span>;</span>
    }</span></span>

    /**
     * @dev Use reserve to swap Token for rewardToken between accounts
     *
     * @param sender account to deduct token from
     * @param receiver account to add rewardToken to
     * @param amount Token amount to exchange for rewardToken
     * @param finOp financial opportunity to swap tokens for
     */
    <span class="marker" id="mapping-1029"></span><span class="token del" data-title="contract_body/function_definition">function swapTokenForReward(
        <span class="marker" id="mapping-1030"></span><span class="token mv" id="move-src-309" data-title="function_definition/parameter">address sender</span>,
        <span class="marker" id="mapping-1031"></span><span class="token del" data-title="function_definition/parameter">address receiver</span>,
        <span class="marker" id="mapping-1032"></span><span class="token mv" id="move-src-310" data-title="function_definition/parameter">uint256 amount</span>,
        <span class="marker" id="mapping-1033"></span><span class="token del" data-title="function_definition/parameter">address finOp</span>
    ) <span class="marker" id="mapping-1034"></span><span class="token mv" id="move-src-311" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-1035"></span><span class="token del" data-title="function_definition/modifier_invocation">validFinOp(finOp)</span> <span class="marker" id="mapping-1036"></span><span class="token del" data-title="function_definition/function_body">{
        // require sender has sufficient balance
        <span class="marker" id="mapping-1037"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-1038"></span><span class="token del" data-title="expression_statement/call_expression">require(<span class="marker" id="mapping-1039"></span><span class="token del" data-title="call_expression/call_argument"><span class="marker" id="mapping-1040"></span><span class="token del" data-title="call_argument/binary_expression"><span class="marker" id="mapping-1041"></span><span class="token del" data-title="binary_expression/call_expression">balanceOf(<span class="marker" id="mapping-1042"></span><span class="token mv" id="move-src-312" data-title="call_expression/call_argument">sender</span>)</span> &gt;= amount</span></span>, <span class="marker" id="mapping-1043"></span><span class="token mv" id="move-src-313" data-title="call_expression/call_argument">"insufficient balance"</span>)</span>;</span>

        // calculate rewardToken value for depositToken amount
        <span class="marker" id="mapping-1044"></span><span class="token del" data-title="function_body/variable_declaration_statement"><span class="marker" id="mapping-1045"></span><span class="token del" data-title="variable_declaration_statement/variable_declaration">uint256 rewardAmount</span> = <span class="marker" id="mapping-1046"></span><span class="token del" data-title="variable_declaration_statement/call_expression">_toRewardToken(<span class="marker" id="mapping-1047"></span><span class="token mv" id="move-src-314" data-title="call_expression/call_argument">amount</span>, <span class="marker" id="mapping-1048"></span><span class="token del" data-title="call_expression/call_argument">finOp</span>)</span>;</span>

        // require reserve
        <span class="marker" id="mapping-1049"></span><span class="token mv" id="move-src-315" data-title="function_body/expression_statement">require(<span class="marker" id="mapping-1050"></span><span class="token del" data-title="binary_expression/call_expression">rewardTokenBalance(RESERVE, finOp)</span> &gt;= <span class="marker" id="mapping-1051"></span><span class="token upd" id="move-src-316" data-title="binary_expression/identifier">rew<span class="cupd">a</span>rdAmount</span>, "not enough rewardToken in reserve");</span>

        // sub from sender and add to reserve for depositToken
        <span class="marker" id="mapping-1052"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-1053"></span><span class="token del" data-title="expression_statement/call_expression">_subBalance(<span class="marker" id="mapping-1054"></span><span class="token mv" id="move-src-317" data-title="call_expression/call_argument">sender</span>, <span class="marker" id="mapping-1055"></span><span class="token mv" id="move-src-318" data-title="call_expression/call_argument">amount</span>)</span>;</span>
        <span class="marker" id="mapping-1056"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-1057"></span><span class="token del" data-title="expression_statement/call_expression">_addBalance(<span class="marker" id="mapping-1058"></span><span class="token del" data-title="call_expression/call_argument">RESERVE</span>, <span class="marker" id="mapping-1059"></span><span class="token mv" id="move-src-319" data-title="call_expression/call_argument">amount</span>)</span>;</span>

        // sub from reserve and add to sender for rewardToken
        <span class="marker" id="mapping-1060"></span><span class="token del" data-title="function_body/expression_statement">_subRewardBalance(RESERVE, rewardAmount, finOp);</span>
        <span class="marker" id="mapping-1061"></span><span class="token del" data-title="function_body/expression_statement">_addRewardBalance(receiver, rewardAmount, finOp);</span>

        // emit event
        <span class="marker" id="mapping-1062"></span><span class="token mv" id="move-src-320" data-title="function_body/emit_statement">emit <span class="marker" id="mapping-1063"></span><span class="token upd" id="move-src-321" data-title="emit_statement/identifier">Sw<span class="cupd">a</span>pToke<span class="cupd">n</span>ForR<span class="cupd">e</span>ward</span>(sender, <span class="marker" id="mapping-1064"></span><span class="token upd" id="move-src-322" data-title="call_argument/identifier"><span class="cupd">rec</span>e<span class="cupd">i</span>ver</span>, amount<span class="marker" id="mapping-1065"></span><span class="token del" data-title="emit_statement/,">,</span> <span class="marker" id="mapping-1066"></span><span class="token del" data-title="emit_statement/call_argument">finOp</span>);</span>
    }</span></span>

    /**
     * @dev Use reserve to swap rewardToken for Token between accounts
     *
     * @param sender account to swap rewardToken from
     * @param receiver account to add Token to
     * @param tokenAmount token amount to receive for Token
     * @param finOp financial opportunity
     */
    <span class="marker" id="mapping-1067"></span><span class="token del" data-title="contract_body/function_definition">function swapRewardForToken(
        <span class="marker" id="mapping-1068"></span><span class="token mv" id="move-src-323" data-title="function_definition/parameter">address sender</span>,
        <span class="marker" id="mapping-1069"></span><span class="token del" data-title="function_definition/parameter">address receiver</span>,
        <span class="marker" id="mapping-1070"></span><span class="token del" data-title="function_definition/parameter">uint256 tokenAmount</span>,
        <span class="marker" id="mapping-1071"></span><span class="token del" data-title="function_definition/parameter">address finOp</span>
    ) <span class="marker" id="mapping-1072"></span><span class="token mv" id="move-src-324" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-1073"></span><span class="token del" data-title="function_definition/modifier_invocation">validFinOp(finOp)</span> <span class="marker" id="mapping-1074"></span><span class="token del" data-title="function_definition/function_body">{
        // ensure reserve has enough balance
        <span class="marker" id="mapping-1075"></span><span class="token mv" id="move-src-325" data-title="function_body/expression_statement">require(<span class="marker" id="mapping-1076"></span><span class="token del" data-title="call_argument/binary_expression">balanceOf(RESERVE) &gt;= tokenAmount</span>, "not enough depositToken in reserve");</span>

        <span class="marker" id="mapping-1077"></span><span class="token del" data-title="function_body/variable_declaration_statement">uint256 rewardAmount = _toRewardToken(tokenAmount, finOp);</span>

        // require sufficient balance
        <span class="marker" id="mapping-1078"></span><span class="token mv" id="move-src-326" data-title="function_body/expression_statement">require (<span class="marker" id="mapping-1079"></span><span class="token del" data-title="call_argument/binary_expression"><span class="marker" id="mapping-1080"></span><span class="token del" data-title="binary_expression/call_expression">rewardTokenBalance(<span class="marker" id="mapping-1081"></span><span class="token mv" id="move-src-327" data-title="call_expression/call_argument">sender</span>, <span class="marker" id="mapping-1082"></span><span class="token del" data-title="call_expression/call_argument">finOp</span>)</span> &gt;= rewardAmount</span>, "insufficient rewardToken balance");</span>

        // sub account and add reserve for rewardToken
        <span class="marker" id="mapping-1083"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-1084"></span><span class="token del" data-title="expression_statement/call_expression">_subRewardBalance(<span class="marker" id="mapping-1085"></span><span class="token mv" id="move-src-328" data-title="call_expression/call_argument">sender</span>, <span class="marker" id="mapping-1086"></span><span class="token del" data-title="call_expression/call_argument">rewardAmount</span>, <span class="marker" id="mapping-1087"></span><span class="token del" data-title="call_expression/call_argument">finOp</span>)</span>;</span>
        <span class="marker" id="mapping-1088"></span><span class="token del" data-title="function_body/expression_statement">_addRewardBalance(RESERVE, rewardAmount, finOp);</span>

        // sub account and add reserve for Token
        <span class="marker" id="mapping-1089"></span><span class="token del" data-title="function_body/expression_statement">_subBalance(RESERVE, tokenAmount);</span>
        <span class="marker" id="mapping-1090"></span><span class="token del" data-title="function_body/expression_statement">_addBalance(receiver, tokenAmount);</span>

        // emit event
        <span class="marker" id="mapping-1091"></span><span class="token del" data-title="function_body/emit_statement">emit SwapRewardForToken(<span class="marker" id="mapping-1092"></span><span class="token mv" id="move-src-329" data-title="emit_statement/call_argument">sender</span>, <span class="marker" id="mapping-1093"></span><span class="token del" data-title="emit_statement/call_argument">receiver</span>, <span class="marker" id="mapping-1094"></span><span class="token del" data-title="emit_statement/call_argument">rewardAmount</span>, <span class="marker" id="mapping-1095"></span><span class="token del" data-title="emit_statement/call_argument">finOp</span>);</span>
    }</span></span>
}</span></span>

<span class="marker" id="mapping-1096"></span><span class="token del" data-title="source_file/comment">// File: contracts/TrueCurrencies/TrueRewardBackedToken.sol</span>

<span class="marker" id="mapping-1097"></span><span class="token del" data-title="source_file/pragma_directive">pragma solidity 0.5.13;</span>




<span class="marker" id="mapping-1098"></span><span class="token del" data-title="source_file/comment">/**
 * @title TrueRewardBackedToken
 * @dev TrueRewardBackedToken is TrueCurrency backed by debt
 *
 * -- Overview --
 * Enabling TrueRewards deposits TrueCurrency into a financial opportunity
 * Financial opportunities provide awards over time
 * Awards are reflected in the wallet balance updated block-by-block
 *
 * -- rewardToken vs yToken --
 * rewardToken represents an amount of ASSURED TrueCurrency owed to the rewardToken holder
 * yToken represents an amount of NON-ASSURED TrueCurrency owed to a yToken holder
 * For this contract, we only handle rewardToken (Assured Opportunities)
 *
 * -- Calculating rewardToken --
 * TrueCurrency Value = rewardToken * financial opportunity tokenValue()
 *
 * -- rewardToken Assumptions --
 * We assume tokenValue never decreases for assured financial opportunities
 * rewardToken is not transferrable in that the token itself is never tranferred
 * Rather, we override our transfer functions to account for user balances
 *
 * -- Reserve --
 * This contract uses a reserve holding of TrueCurrency and rewardToken to save on gas costs
 * because calling the financial opportunity deposit() and redeem() everytime
 * can be expensive
 * See RewardTokenWithReserve.sol
 *
 * -- Future Upgrades to Financial Opportunity --
 * Currently, we only have a single financial opportunity
 * We plan on upgrading this contract to support a multiple financial opportunity,
 * so some of the code is built to support this
 *
 */</span>
<span class="marker" id="mapping-1099"></span><span class="token del" data-title="source_file/contract_declaration">contract TrueRewardBackedToken is <span class="marker" id="mapping-1100"></span><span class="token del" data-title="contract_declaration/inheritance_specifier">RewardTokenWithReserve</span> <span class="marker" id="mapping-1101"></span><span class="token del" data-title="contract_declaration/contract_body">{

    /* variables in Proxy Storage:
    mapping(address =&gt; FinancialOpportunity) finOps;
    mapping(address =&gt; mapping(address =&gt; uint256)) finOpBalances;
    mapping(address =&gt; uint256) finOpSupply;
    uint256 maxRewardProportion = 1000;
    */

    // registry attribute for whitelist
    // 0x6973547275655265776172647357686974656c69737465640000000000000000
    <span class="marker" id="mapping-1102"></span><span class="token del" data-title="contract_body/state_variable_declaration">bytes32 constant IS_TRUEREWARDS_WHITELISTED = "isTrueRewardsWhitelisted";</span>

    // financial opportunity address
    <span class="marker" id="mapping-1103"></span><span class="token mv" id="move-src-330" data-title="contract_body/state_variable_declaration">address <span class="marker" id="mapping-1104"></span><span class="token del" data-title="state_variable_declaration/visibility">public</span> <span class="marker" id="mapping-1105"></span><span class="token upd" id="move-src-331" data-title="state_variable_declaration/identifier"><span class="cupd">o</span><span class="cupd">p</span>po<span class="cupd">r</span>tunity_</span>;</span>

    <span class="marker" id="mapping-1106"></span><span class="token del" data-title="contract_body/event_definition">event TrueRewardEnabled(address _account);</span>
    <span class="marker" id="mapping-1107"></span><span class="token del" data-title="contract_body/event_definition">event TrueRewardDisabled(address _account);</span>

    /** @dev return true if TrueReward is enabled for a given address */
    <span class="marker" id="mapping-1108"></span><span class="token del" data-title="contract_body/function_definition">function trueRewardEnabled(address _address) public view returns (bool) {
        return _rewardDistribution[_address].length != 0;
    }</span>

    /**
     * @dev Get total supply of all TrueCurrency
     * Equal to deposit backed TrueCurrency plus debt backed TrueCurrency
     * @return total supply in trueCurrency
     */
    <span class="marker" id="mapping-1109"></span><span class="token del" data-title="contract_body/function_definition">function totalSupply() public view returns (uint256) {
        // if supply in opportunity finOp, return supply of deposits + debt
        // otherwise call super to return normal totalSupply
        if (opportunityRewardSupply() != 0) {
            return totalSupply_.add(opportunityTotalSupply());
        }
        return totalSupply_;
    }</span>

    /**
     * @dev get total supply of TrueCurrency backed by fiat deposits
     * @return supply of fiat backed TrueCurrency
     */
    <span class="marker" id="mapping-1110"></span><span class="token del" data-title="contract_body/function_definition">function depositBackedSupply() public view returns (uint256) {
        return totalSupply_;
    }</span>

    /**
     * @dev get total supply of TrueCurrency backed by debt
     * @return supply of debt backed TrueCurrency
     */
    <span class="marker" id="mapping-1111"></span><span class="token del" data-title="contract_body/function_definition">function debtBackedSupply() public view returns (uint256) {
        return totalSupply().sub(totalSupply_);
    }</span>

    /**
     * @dev Get balance of TrueCurrency including rewards for an address
     *
     * @param _who address of account to get balanceOf for
     * @return balance total balance of address including rewards
     */
    <span class="marker" id="mapping-1112"></span><span class="token del" data-title="contract_body/function_definition">function balanceOf(address _who) public view returns (uint256) {
        // if trueReward enabled, return token value of reward balance
        // otherwise call token balanceOf
        if (trueRewardEnabled(_who)) {
            return _toToken(rewardTokenBalance(_who, opportunity()), opportunity());
        }
        return super.balanceOf(_who);
    }</span>

    /**
     * @dev Enable TrueReward and deposit user balance into opportunity.
     * Currently supports a single financial opportunity
     */
    <span class="marker" id="mapping-1113"></span><span class="token del" data-title="contract_body/function_definition">function enableTrueReward() <span class="marker" id="mapping-1114"></span><span class="token del" data-title="function_definition/visibility">external</span> <span class="marker" id="mapping-1115"></span><span class="token del" data-title="function_definition/function_body">{
        // require TrueReward is not enabled
        <span class="marker" id="mapping-1116"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-1117"></span><span class="token del" data-title="expression_statement/call_expression">require(<span class="marker" id="mapping-1118"></span><span class="token del" data-title="call_expression/call_argument">registry.hasAttribute(msg.sender, IS_TRUEREWARDS_WHITELISTED)</span>, <span class="marker" id="mapping-1119"></span><span class="token mv" id="move-src-332" data-title="call_expression/call_argument">"must be whitelisted to enable TrueRewards"</span>)</span>;</span>
        <span class="marker" id="mapping-1120"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-1121"></span><span class="token mv" id="move-src-333" data-title="expression_statement/call_expression"><span class="marker" id="mapping-1122"></span><span class="token upd" id="move-src-334" data-title="call_expression/identifier">req<span class="cupd">u</span><span class="cupd">i</span>re</span>(<span class="marker" id="mapping-1123"></span><span class="token del" data-title="call_expression/call_argument">!trueRewardEnabled(msg.sender)</span>, "TrueReward already enabled")</span>;</span>

        // get sender balance
        <span class="marker" id="mapping-1124"></span><span class="token del" data-title="function_body/variable_declaration_statement">uint balance = _getBalance(msg.sender);</span>

        <span class="marker" id="mapping-1125"></span><span class="token del" data-title="function_body/if_statement">if (balance != 0) {
            // mint reward token
            mintRewardToken(msg.sender, balance, opportunity());
        }</span>

        // set reward distribution
        // we set max distribution since we only have one opportunity
        <span class="marker" id="mapping-1126"></span><span class="token del" data-title="function_body/expression_statement">_setDistribution(maxRewardProportion, opportunity());</span>

        // emit enable event
        <span class="marker" id="mapping-1127"></span><span class="token del" data-title="function_body/emit_statement">emit TrueRewardEnabled(msg.sender);</span>
        //emit Transfer(address(0), msg.sender, balance);
    }</span></span>

    /**
     * @dev Disable TrueReward and withdraw user balance from opportunity.
     */
    <span class="marker" id="mapping-1128"></span><span class="token del" data-title="contract_body/function_definition">function disableTrueReward() <span class="marker" id="mapping-1129"></span><span class="token del" data-title="function_definition/visibility">external</span> <span class="marker" id="mapping-1130"></span><span class="token del" data-title="function_definition/function_body">{
        // require TrueReward is enabled
        <span class="marker" id="mapping-1131"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-1132"></span><span class="token mv" id="move-src-335" data-title="expression_statement/call_expression"><span class="marker" id="mapping-1133"></span><span class="token upd" id="move-src-336" data-title="call_expression/identifier">req<span class="cupd">u</span>ire</span>(<span class="marker" id="mapping-1134"></span><span class="token del" data-title="call_expression/call_argument">trueRewardEnabled(msg.sender)</span>, "TrueReward already disabled")</span>;</span>
        // get balance
        <span class="marker" id="mapping-1135"></span><span class="token del" data-title="function_body/variable_declaration_statement">uint rewardBalance = rewardTokenBalance(msg.sender, opportunity());</span>

        // remove reward distribution
        <span class="marker" id="mapping-1136"></span><span class="token del" data-title="function_body/expression_statement">_removeDistribution(opportunity());</span>

        <span class="marker" id="mapping-1137"></span><span class="token del" data-title="function_body/if_statement">if (rewardBalance &gt; 0) {
            // redeem for token
            redeemRewardToken(msg.sender, rewardBalance, opportunity());
        }</span>

        // emit disable event
        <span class="marker" id="mapping-1138"></span><span class="token del" data-title="function_body/emit_statement">emit TrueRewardDisabled(msg.sender);</span>
        // emit Transfer(msg.sender, address(0), zTrueCurrency);
    }</span></span>

    /**
     * @dev mint function for TrueRewardBackedToken
     * Mints TrueCurrency backed by debt
     * When we add multiple opportunities, this needs to work for mutliple interfaces
     */
    <span class="marker" id="mapping-1139"></span><span class="token mv" id="move-src-337" data-title="contract_body/function_definition">function <span class="marker" id="mapping-1140"></span><span class="token upd" id="move-src-338" data-title="function_definition/identifier">mint</span>(address <span class="marker" id="mapping-1141"></span><span class="token upd" id="move-src-339" data-title="parameter/identifier">_to</span>, uint256 <span class="marker" id="mapping-1142"></span><span class="token upd" id="move-src-340" data-title="parameter/identifier">_v<span class="cupd">a</span>lue</span>) <span class="marker" id="mapping-1143"></span><span class="token del" data-title="function_definition/visibility">public</span> <span class="marker" id="mapping-1144"></span><span class="token del" data-title="function_definition/modifier_invocation">onlyOwner</span> {
        <span class="marker" id="mapping-1145"></span><span class="token upd" id="move-src-341" data-title="function_body/comment"><span class="cupd">// </span>c<span class="cupd">h</span><span class="cupd">e</span>ck <span class="cupd">i</span>f<span class="cupd"> </span>t<span class="cupd">o</span> a<span class="cupd">d</span>dr<span class="cupd">e</span><span class="cupd">s</span>s<span class="cupd"> </span><span class="cupd">i</span>s en<span class="cupd">a</span>b<span class="cupd">l</span>ed</span>
        <span class="marker" id="mapping-1146"></span><span class="token del" data-title="variable_declaration_statement/variable_declaration">bool toEnabled</span> = <span class="marker" id="mapping-1147"></span><span class="token del" data-title="call_expression/identifier">trueRewardEnabled</span>(<span class="marker" id="mapping-1148"></span><span class="token del" data-title="call_expression/call_argument">_to</span>);

        <span class="marker" id="mapping-1149"></span><span class="token del" data-title="function_body/comment">// if to enabled, mint to this contract and deposit into finOp</span>
        <span class="marker" id="mapping-1150"></span><span class="token del" data-title="function_body/if_statement">if (toEnabled) <span class="marker" id="mapping-1151"></span><span class="token del" data-title="if_statement/block_statement">{
            // mint to this contract
            <span class="marker" id="mapping-1152"></span><span class="token del" data-title="block_statement/expression_statement"><span class="marker" id="mapping-1153"></span><span class="token del" data-title="expression_statement/call_expression"><span class="marker" id="mapping-1154"></span><span class="token del" data-title="call_expression/member_expression">super.mint</span>(<span class="marker" id="mapping-1155"></span><span class="token del" data-title="call_expression/call_argument"><span class="marker" id="mapping-1156"></span><span class="token mv" id="move-src-342" data-title="call_argument/type_cast_expression">address(this)</span></span>, <span class="marker" id="mapping-1157"></span><span class="token del" data-title="call_expression/call_argument">_value</span>)</span>;</span>
            // transfer minted amount to target receiver
            <span class="marker" id="mapping-1158"></span><span class="token mv" id="move-src-343" data-title="block_statement/expression_statement"><span class="marker" id="mapping-1159"></span><span class="token upd" id="move-src-344" data-title="call_expression/identifier">_t<span class="cupd">r</span>ansf<span class="cupd">e</span>rAllArgs</span>(<span class="marker" id="mapping-1160"></span><span class="token mv" id="move-src-345" data-title="call_argument/type_cast_expression">address(this)</span>, <span class="marker" id="mapping-1161"></span><span class="token del" data-title="call_expression/call_argument">_to</span><span class="marker" id="mapping-1162"></span><span class="token del" data-title="call_expression/,">,</span> <span class="marker" id="mapping-1163"></span><span class="token del" data-title="call_expression/call_argument">_value</span>);</span>
        }</span>
        // otherwise call normal mint process
        else <span class="marker" id="mapping-1164"></span><span class="token del" data-title="if_statement/block_statement">{
            super.mint(_to, _value);
        }</span></span>
    }</span>

    /**
     * @dev redeem reserve rewardTokens for Token given a rewardToken amount
     * This is called by the TokenController to balance the reserve
     * @param _value amount of Token to deposit for rewardTokens
     */
    <span class="marker" id="mapping-1165"></span><span class="token del" data-title="contract_body/function_definition">function opportunityReserveRedeem(uint256 _value) external onlyOwner {
        reserveRedeem(_value, opportunity());
    }</span>

    /**
     * @dev mint reserve rewardTokens for opportunity given a Token deposit
     * This is called by the TokenController to balance the reserve
     * @param _value amount of Token to deposit for rewardTokens
     */
    <span class="marker" id="mapping-1166"></span><span class="token del" data-title="contract_body/function_definition">function opportunityReserveMint(uint256 _value) external onlyOwner {
        reserveMint(_value, opportunity());
    }</span>

    /**
     * @dev set a new opportunity financial opportunity address
     * @param _opportunity new opportunity to set
     */
    <span class="marker" id="mapping-1167"></span><span class="token del" data-title="contract_body/function_definition">function setOpportunityAddress(address _opportunity) external onlyOwner {
        opportunity_ = _opportunity;
    }</span>

    /**
     * @dev Get (assured) financial opportunity address
     * @return address financial opportunity address
     */
    <span class="marker" id="mapping-1168"></span><span class="token del" data-title="contract_body/function_definition">function opportunity() public view returns (address) {
        return opportunity_;
    }</span>

    /**
     * @dev Get total supply of opportunity rewardToken
     * @return total supply of opportunity rewardToken
     */
    <span class="marker" id="mapping-1169"></span><span class="token del" data-title="contract_body/function_definition">function opportunityRewardSupply() <span class="marker" id="mapping-1170"></span><span class="token mv" id="move-src-346" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-1171"></span><span class="token del" data-title="function_definition/state_mutability">view</span> <span class="marker" id="mapping-1172"></span><span class="token del" data-title="function_definition/return_type_definition">returns (uint256)</span> <span class="marker" id="mapping-1173"></span><span class="token del" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-1174"></span><span class="token del" data-title="function_body/if_statement">if (<span class="marker" id="mapping-1175"></span><span class="token mv" id="move-src-347" data-title="if_statement/binary_expression"><span class="marker" id="mapping-1176"></span><span class="token del" data-title="binary_expression/call_expression">opportunity()</span> <span class="marker" id="mapping-1177"></span><span class="token del" data-title="binary_expression/==">==</span> address(0)</span>) <span class="marker" id="mapping-1178"></span><span class="token del" data-title="if_statement/block_statement">{
            return 0;
        }</span></span>
        <span class="marker" id="mapping-1179"></span><span class="token del" data-title="function_body/return_statement">return rewardTokenSupply(opportunity());</span>
    }</span></span>

    /**
     * @dev Get total supply of TrueCurrency in opportunity
     * @return total supply of TrueCurrency in opportunity
     */
    <span class="marker" id="mapping-1180"></span><span class="token del" data-title="contract_body/function_definition">function opportunityTotalSupply() internal view returns (uint256) {
        return _toToken(opportunityRewardSupply(), opportunity());
    }</span>

    /**
     * @dev Transfer helper for accounts with rewardToken balances
     * Uses reserve float to save gas costs for transactions with value &lt; reserve balance
     * Case #2 and #3 use reserve balances
     *
     * There are 6 transfer cases
     *  1. Both sender and receiver are disabled (see _transferAllArgs)
     *  2. Sender enabled, receiver disabled, value &lt; reserve TrueCurrency balance
     *  3. Sender disabled, receiver enabled, value &lt; reserve rewardToken balance (in TrueCurrency)
     *  4. Both sender and receiver are enabled
     *  5. Sender enabled, receiver disabled, value &gt; reserve TrueCurrency balance
     *  6. Sender disabled, receiver enabled, value &gt; reserve rewardToken balance (in TrueCurrency)
     *
     * @param _from account to transfer from
     * @param _to account to transfer to
     * @param _value value in Token to transfer
     * @return actual value transferred
     */
    <span class="marker" id="mapping-1181"></span><span class="token del" data-title="contract_body/function_definition">function _transferWithRewards(
        address _from,
        address _to,
        uint256 _value
    ) internal returns (uint256) {
        // get enable stat
        bool fromEnabled = trueRewardEnabled(_from);
        bool toEnabled = trueRewardEnabled(_to);

        // get opportunity address
        address finOp = opportunity();

        // calculate rewardToken balance
        uint rewardAmount = _toRewardToken(_value, finOp);

        // 2. Sender enabled, receiver disabled, value &lt; reserve TrueCurrency balance
        // Swap rewardToken for Token through reserve
        if (fromEnabled &amp;&amp; !toEnabled &amp;&amp; _value &lt;= reserveBalance()) {
            swapRewardForToken(_from, _to, _value, finOp);
        }
        // 3. Sender disabled, receiver enabled, value &lt; reserve rewardToken balance
        // Swap Token for rewardToken through reserve
        else if (!fromEnabled &amp;&amp; toEnabled &amp;&amp; rewardAmount &lt;= rewardTokenBalance(RESERVE, finOp)) {
            swapTokenForReward(_from, _to, _value, finOp);
        }
        // 4. Sender and receiver are enabled
        // Here we simply transfer rewardToken from the sender to the receiver
        else if (fromEnabled &amp;&amp; toEnabled) {
            _subRewardBalance(_from, rewardAmount, finOp);
            _addRewardBalance(_to, rewardAmount, finOp);
        }
        // 5. Sender enabled, receiver disabled, value &gt; reserve TrueCurrency balance
        // Recalculate value based on redeem value returned and give value to receiver
        else if (fromEnabled &amp;&amp; !toEnabled) {
            _getFinOp(finOp).redeem(_to, rewardAmount);

            // decrease finOp rewardToken supply
            finOpSupply[finOp] = finOpSupply[finOp].sub(rewardAmount);

            // decrease account rewardToken balance
            _subRewardBalance(_from, rewardAmount, finOp);
        }
        // 6. Sender disabled, receiver enabled, value &gt; reserve rewardToken balance
        // Transfer Token value between accounts and mint reward token for receiver
        else if (!fromEnabled &amp;&amp; toEnabled) {
            // deposit into finOp
            _approveAllArgs(finOp, _value, _from);
            uint256 depositedAmount = _getFinOp(finOp).deposit(_from, _value);

            // increase finOp rewardToken supply
            finOpSupply[finOp] = finOpSupply[finOp].add(depositedAmount);

            // increase account rewardToken balance
            _addRewardBalance(_to, depositedAmount, finOp);
        }
        return _value;
    }</span>

    /**
     * @dev Transfer helper function for TrueRewardBackedToken
     */
    <span class="marker" id="mapping-1182"></span><span class="token del" data-title="contract_body/function_definition">function _transferAllArgs(<span class="marker" id="mapping-1183"></span><span class="token del" data-title="function_definition/parameter">address _from</span>, <span class="marker" id="mapping-1184"></span><span class="token del" data-title="function_definition/parameter">address _to</span>, <span class="marker" id="mapping-1185"></span><span class="token del" data-title="function_definition/parameter">uint256 _value</span>) <span class="marker" id="mapping-1186"></span><span class="token mv" id="move-src-348" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-1187"></span><span class="token del" data-title="function_definition/function_body">{
        // 1. Both sender and receiver are disabled
        // Exchange is in TrueCurrency -&gt; call the normal transfer function
        <span class="marker" id="mapping-1188"></span><span class="token del" data-title="function_body/if_statement">if (!trueRewardEnabled(_from) &amp;&amp; !trueRewardEnabled(_to)) {
            // sender not enabled receiver not enabled
            super._transferAllArgs(_from, _to, _value);
            return;
        }</span>
        <span class="marker" id="mapping-1189"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-1190"></span><span class="token del" data-title="expression_statement/call_expression">require(<span class="marker" id="mapping-1191"></span><span class="token del" data-title="call_expression/call_argument">balanceOf(_from) &gt;= _value</span>, <span class="marker" id="mapping-1192"></span><span class="token mv" id="move-src-349" data-title="call_expression/call_argument">"not enough balance"</span>)</span>;</span>

        // require account is not blacklisted and check if hook is registered
        <span class="marker" id="mapping-1193"></span><span class="token mv" id="move-src-350" data-title="function_body/variable_declaration_statement">(<span class="marker" id="mapping-1194"></span><span class="token mv" id="move-src-351" data-title="variable_declaration_tuple/variable_declaration"><span class="marker" id="mapping-1195"></span><span class="token del" data-title="primitive_type/address">address</span> <span class="marker" id="mapping-1196"></span><span class="token upd" id="move-src-352" data-title="variable_declaration/identifier">fi<span class="cupd">n</span>alTo</span></span><span class="marker" id="mapping-1197"></span><span class="token mv" id="move-src-353" data-title="variable_declaration_tuple/,">,</span> bool <span class="marker" id="mapping-1198"></span><span class="token upd" id="move-src-354" data-title="variable_declaration/identifier">hasHook</span>) = <span class="marker" id="mapping-1199"></span><span class="token del" data-title="call_expression/identifier">_requireCanTransfer</span>(<span class="marker" id="mapping-1200"></span><span class="token upd" id="move-src-355" data-title="call_argument/identifier">_from</span><span class="marker" id="mapping-1201"></span><span class="token del" data-title="call_expression/,">,</span> <span class="marker" id="mapping-1202"></span><span class="token del" data-title="call_expression/call_argument">_to</span>);</span>

        <span class="marker" id="mapping-1203"></span><span class="token del" data-title="function_body/expression_statement">_value = _transferWithRewards(_from, finalTo, _value);</span>

        // emit transfer event for from
        <span class="marker" id="mapping-1204"></span><span class="token del" data-title="function_body/emit_statement">emit Transfer(_from, _to, _value);</span>
        <span class="marker" id="mapping-1205"></span><span class="token del" data-title="function_body/if_statement">if (finalTo != _to) {
            emit Transfer(_to, finalTo, _value);
            if (hasHook) {
                TrueCoinReceiver(finalTo).tokenFallback(_to, _value);
            }
        } else {
            if (hasHook) {
                TrueCoinReceiver(finalTo).tokenFallback(_from, _value);
            }
        }</span>
    }</span></span>

    /**
     * @dev TransferFromAll helper function for TrueRewardBackedToken
     */
    <span class="marker" id="mapping-1206"></span><span class="token del" data-title="contract_body/function_definition">function _transferFromAllArgs(
        <span class="marker" id="mapping-1207"></span><span class="token del" data-title="function_definition/parameter">address _from</span>,
        <span class="marker" id="mapping-1208"></span><span class="token del" data-title="function_definition/parameter">address _to</span>,
        <span class="marker" id="mapping-1209"></span><span class="token del" data-title="function_definition/parameter">uint256 _value</span>,
        <span class="marker" id="mapping-1210"></span><span class="token del" data-title="function_definition/parameter">address _spender</span>
    ) <span class="marker" id="mapping-1211"></span><span class="token del" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-1212"></span><span class="token del" data-title="function_definition/function_body">{
        // 1. Both sender and receiver are disabled -&gt; normal transfer
        <span class="marker" id="mapping-1213"></span><span class="token del" data-title="function_body/if_statement">if (!trueRewardEnabled(_from) &amp;&amp; !trueRewardEnabled(_to)) {
            super._transferFromAllArgs(_from, _to, _value, _spender);
            return;
        }</span>

        // check balance
        <span class="marker" id="mapping-1214"></span><span class="token del" data-title="function_body/expression_statement">require(balanceOf(_from) &gt;= _value, "not enough balance");</span>

        <span class="marker" id="mapping-1215"></span><span class="token del" data-title="function_body/variable_declaration_statement"><span class="marker" id="mapping-1216"></span><span class="token mv" id="move-src-356" data-title="variable_declaration_statement/variable_declaration_tuple">(<span class="marker" id="mapping-1217"></span><span class="token del" data-title="variable_declaration_tuple/variable_declaration">address finalTo</span><span class="marker" id="mapping-1218"></span><span class="token mv" id="move-src-357" data-title="variable_declaration_tuple/,">,</span> bool <span class="marker" id="mapping-1219"></span><span class="token upd" id="move-src-358" data-title="variable_declaration/identifier">hasHook</span>)</span> = <span class="marker" id="mapping-1220"></span><span class="token del" data-title="variable_declaration_statement/call_expression">_requireCanTransferFrom(_spender, _from, _to)</span>;</span>

        // call transfer helper
        <span class="marker" id="mapping-1221"></span><span class="token del" data-title="function_body/expression_statement">_value = _transferWithRewards(_from, finalTo, _value);</span>

        // sub allowance of spender
        <span class="marker" id="mapping-1222"></span><span class="token del" data-title="function_body/expression_statement">_subAllowance(_from, _spender, _value);</span>

        // emit transfer event. For hook emit second transfer event
        // call fallback function for valid hook
        <span class="marker" id="mapping-1223"></span><span class="token del" data-title="function_body/emit_statement">emit Transfer(_from, _to, _value);</span>
        <span class="marker" id="mapping-1224"></span><span class="token del" data-title="function_body/if_statement">if (finalTo != _to) {
            emit Transfer(_to, finalTo, _value);
            if (hasHook) {
                TrueCoinReceiver(finalTo).tokenFallback(_to, _value);
            }
        } else {
            if (hasHook) {
                TrueCoinReceiver(finalTo).tokenFallback(_from, _value);
            }
        }</span>
    }</span></span>

    /**
     * @dev Set reward distribution for an opportunity
     *
     * @param proportion to set
     * @param finOp financial opportunity to set proportion for
     */
    <span class="marker" id="mapping-1225"></span><span class="token del" data-title="contract_body/function_definition">function _setDistribution(uint256 proportion, address finOp) internal {
        require(proportion &lt;= maxRewardProportion, "exceeds maximum proportion");
        require(_rewardDistribution[msg.sender].length == 0, "already enabled");
        _rewardDistribution[msg.sender].push(
            RewardAllocation(proportion, finOp));
    }</span>

    /**
     * @dev Remove reward distribution for a financial opportunity
     * Remove
     */
    <span class="marker" id="mapping-1226"></span><span class="token del" data-title="contract_body/function_definition">function _removeDistribution(address finOp) internal {
        delete _rewardDistribution[msg.sender][0];
        _rewardDistribution[msg.sender].length--;
    }</span>
}</span></span>

<span class="marker" id="mapping-1227"></span><span class="token del" data-title="source_file/comment">// File: contracts/TrueCurrencies/DelegateERC20.sol</span>

<span class="marker" id="mapping-1228"></span><span class="token del" data-title="source_file/pragma_directive">pragma solidity 0.5.13;</span>


<span class="marker" id="mapping-1229"></span><span class="token del" data-title="source_file/comment">/** @title DelegateERC20
Accept forwarding delegation calls from the old TrueUSD (V1) contract. This way the all the ERC20
functions in the old contract still works (except Burn).
*/</span>
<span class="marker" id="mapping-1230"></span><span class="token del" data-title="source_file/contract_declaration">contract DelegateERC20 is <span class="marker" id="mapping-1231"></span><span class="token del" data-title="contract_declaration/inheritance_specifier">CompliantDepositTokenWithHook</span> <span class="marker" id="mapping-1232"></span><span class="token del" data-title="contract_declaration/contract_body">{

    <span class="marker" id="mapping-1233"></span><span class="token mv" id="move-src-359" data-title="contract_body/state_variable_declaration">address <span class="marker" id="mapping-1234"></span><span class="token del" data-title="state_variable_declaration/constant">constant</span> <span class="marker" id="mapping-1235"></span><span class="token upd" id="move-src-360" data-title="state_variable_declaration/identifier">DELEGATE_FROM</span> <span class="marker" id="mapping-1236"></span><span class="token del" data-title="state_variable_declaration/=">=</span> <span class="marker" id="mapping-1237"></span><span class="token del" data-title="state_variable_declaration/number_literal">0x8dd5fbCe2F6a956C3022bA3663759011Dd51e73E</span>;</span>

    <span class="marker" id="mapping-1238"></span><span class="token del" data-title="contract_body/modifier_definition">modifier onlyDelegateFrom() {
        require(msg.sender == DELEGATE_FROM);
        _;
    }</span>

    <span class="marker" id="mapping-1239"></span><span class="token del" data-title="contract_body/function_definition">function delegateTotalSupply() public view returns (uint256) {
        return totalSupply();
    }</span>

    <span class="marker" id="mapping-1240"></span><span class="token del" data-title="contract_body/function_definition">function delegateBalanceOf(address who) public view returns (uint256) {
        return _getBalance(who);
    }</span>

    <span class="marker" id="mapping-1241"></span><span class="token del" data-title="contract_body/function_definition">function delegateTransfer(address to, uint256 value, address origSender) public onlyDelegateFrom returns (bool) {
        _transferAllArgs(origSender, to, value);
        return true;
    }</span>

    <span class="marker" id="mapping-1242"></span><span class="token mv" id="move-src-361" data-title="contract_body/function_definition">function <span class="marker" id="mapping-1243"></span><span class="token upd" id="move-src-362" data-title="function_definition/identifier">deleg<span class="cupd">a</span>teA<span class="cupd">llowance</span></span>(address owner, address spender) public view <span class="marker" id="mapping-1244"></span><span class="token del" data-title="function_definition/return_type_definition">returns (uint256)</span> {
        return <span class="marker" id="mapping-1245"></span><span class="token del" data-title="return_statement/call_expression">_getAllowance(<span class="marker" id="mapping-1246"></span><span class="token del" data-title="call_expression/call_argument">owner</span>, <span class="marker" id="mapping-1247"></span><span class="token mv" id="move-src-363" data-title="call_expression/call_argument">spender</span>)</span>;
    }</span>

    <span class="marker" id="mapping-1248"></span><span class="token del" data-title="contract_body/function_definition">function delegateTransferFrom(address from, address to, uint256 value, address origSender) public onlyDelegateFrom returns (bool) {
        _transferFromAllArgs(from, to, value, origSender);
        return true;
    }</span>

    <span class="marker" id="mapping-1249"></span><span class="token del" data-title="contract_body/function_definition">function delegateApprove(<span class="marker" id="mapping-1250"></span><span class="token mv" id="move-src-364" data-title="function_definition/parameter">address spender</span>, <span class="marker" id="mapping-1251"></span><span class="token del" data-title="function_definition/parameter">uint256 value</span>, <span class="marker" id="mapping-1252"></span><span class="token del" data-title="function_definition/parameter">address origSender</span>) <span class="marker" id="mapping-1253"></span><span class="token del" data-title="function_definition/visibility">public</span> <span class="marker" id="mapping-1254"></span><span class="token del" data-title="function_definition/modifier_invocation">onlyDelegateFrom</span> <span class="marker" id="mapping-1255"></span><span class="token del" data-title="function_definition/return_type_definition">returns (bool)</span> <span class="marker" id="mapping-1256"></span><span class="token del" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-1257"></span><span class="token del" data-title="function_body/expression_statement"><span class="marker" id="mapping-1258"></span><span class="token del" data-title="expression_statement/call_expression">_approveAllArgs(<span class="marker" id="mapping-1259"></span><span class="token mv" id="move-src-365" data-title="call_expression/call_argument">spender</span>, <span class="marker" id="mapping-1260"></span><span class="token mv" id="move-src-366" data-title="call_expression/call_argument">value</span>, <span class="marker" id="mapping-1261"></span><span class="token del" data-title="call_expression/call_argument">origSender</span>)</span>;</span>
        <span class="marker" id="mapping-1262"></span><span class="token del" data-title="function_body/return_statement">return true;</span>
    }</span></span>

    <span class="marker" id="mapping-1263"></span><span class="token mv" id="move-src-367" data-title="contract_body/function_definition">function <span class="marker" id="mapping-1264"></span><span class="token upd" id="move-src-368" data-title="function_definition/identifier">delegateI<span class="cupd">ncreaseA</span>ppr<span class="cupd">o</span>val</span>(address spender, <span class="marker" id="mapping-1265"></span><span class="token del" data-title="function_definition/parameter">uint addedValue</span><span class="marker" id="mapping-1266"></span><span class="token del" data-title="function_definition/,">,</span> <span class="marker" id="mapping-1267"></span><span class="token del" data-title="function_definition/parameter">address origSender</span>) public <span class="marker" id="mapping-1268"></span><span class="token del" data-title="function_definition/modifier_invocation">onlyDelegateFrom</span> returns (bool) {
        <span class="marker" id="mapping-1269"></span><span class="token upd" id="move-src-369" data-title="call_expression/identifier"><span class="cupd">_</span>inc<span class="cupd">r</span>easeAll<span class="cupd">o</span>wanceAllArgs</span>(<span class="marker" id="mapping-1270"></span><span class="token mv" id="move-src-370" data-title="call_expression/call_argument">spender</span>, <span class="marker" id="mapping-1271"></span><span class="token mv" id="move-src-371" data-title="call_expression/call_argument">addedValue</span>, <span class="marker" id="mapping-1272"></span><span class="token del" data-title="call_expression/call_argument">origSender</span>);
        return true;
    }</span>

    <span class="marker" id="mapping-1273"></span><span class="token mv" id="move-src-372" data-title="contract_body/function_definition">function <span class="marker" id="mapping-1274"></span><span class="token upd" id="move-src-373" data-title="function_definition/identifier"><span class="cupd">de</span>legateDe<span class="cupd">creaseA</span>ppr<span class="cupd">o</span>val</span>(address spender, <span class="marker" id="mapping-1275"></span><span class="token del" data-title="function_definition/parameter">uint subtractedValue</span><span class="marker" id="mapping-1276"></span><span class="token del" data-title="function_definition/,">,</span> <span class="marker" id="mapping-1277"></span><span class="token del" data-title="function_definition/parameter">address origSender</span>) public <span class="marker" id="mapping-1278"></span><span class="token del" data-title="function_definition/modifier_invocation">onlyDelegateFrom</span> returns (bool) {
        <span class="marker" id="mapping-1279"></span><span class="token upd" id="move-src-374" data-title="call_expression/identifier"><span class="cupd">_</span>dec<span class="cupd">r</span>easeAll<span class="cupd">o</span>wanceAllArgs</span>(<span class="marker" id="mapping-1280"></span><span class="token mv" id="move-src-375" data-title="call_expression/call_argument">spender</span>, <span class="marker" id="mapping-1281"></span><span class="token mv" id="move-src-376" data-title="call_expression/call_argument">subtractedValue</span>, <span class="marker" id="mapping-1282"></span><span class="token del" data-title="call_expression/call_argument">origSender</span>);
        return true;
    }</span>
}</span></span>

<span class="marker" id="mapping-1283"></span><span class="token del" data-title="source_file/comment">// File: contracts/TrueCurrencies/TrueUSD.sol</span>

<span class="marker" id="mapping-1284"></span><span class="token del" data-title="source_file/pragma_directive">pragma solidity 0.5.13;</span>





<span class="marker" id="mapping-1285"></span><span class="token del" data-title="source_file/comment">/** @title TrueUSD
 * @dev This is the top-level ERC20 contract, but most of the interesting functionality is
 * inherited - see the documentation on the corresponding contracts.
 */</span>
contract TrueUSD is <span class="marker" id="mapping-1286"></span><span class="token upd" id="move-src-377" data-title="user_defined_type/identifier"><span class="cupd">True</span>R<span class="cupd">e</span>w<span class="cupd">a</span>rdBa<span class="cupd">c</span>kedT<span class="cupd">o</span>ken</span><span class="marker" id="mapping-1287"></span><span class="token del" data-title="contract_declaration/,">,</span> <span class="marker" id="mapping-1288"></span><span class="token del" data-title="contract_declaration/inheritance_specifier">DelegateERC20</span> {
    uint8 constant DECIMALS = 18;
    uint8 constant ROUNDING = 2;

    function decimals() public pure returns (uint8) {
        return DECIMALS;
    }

    function rounding() public pure returns (uint8) {
        return ROUNDING;
    }

    function name() public pure returns (string memory) {
        return "TrueUSD";
    }

    function symbol() public pure returns (string memory) {
        return "TUSD";
    }

    <span class="marker" id="mapping-1289"></span><span class="token del" data-title="contract_body/function_definition">function canBurn() <span class="marker" id="mapping-1290"></span><span class="token del" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-1291"></span><span class="token mv" id="move-src-378" data-title="function_definition/state_mutability">pure</span> <span class="marker" id="mapping-1292"></span><span class="token del" data-title="function_definition/return_type_definition">returns (bytes32)</span> <span class="marker" id="mapping-1293"></span><span class="token del" data-title="function_definition/function_body">{
        return "canBurn";
    }</span></span>
}</pre></div><div class="col-6"><h5>0x7a9701453249e84fd0d5afe5951e9cbe9ed2e90f.etherscan.io-TrueUSD.sol</h5><pre class="pre-scrollable"><span class="marker" id="mapping-1294"></span><span class="token upd" id="move-dst-1" data-title="source_file/comment"><span class="cupd">/</span>**<span class="cupd"></span><span class="cupd">
</span> *  ████████╗██████╗ ██╗   ██╗███████╗██╗   ██╗███████╗██████╗ 
 *  ╚══██╔══╝██╔══██╗██║   ██║██╔════╝██║   ██║██╔════╝██╔══██╗
 *     ██║   ██████╔╝██║   ██║█████╗  ██║   ██║███████╗██║  ██║
 *     ██║   ██╔══██╗██║   ██║██╔══╝  ██║   ██║╚════██║██║  ██║
 *     ██║   ██║  ██║╚██████╔╝███████╗╚██████╔╝███████║██████╔╝
 *     ╚═╝   ╚═╝  ╚═╝ ╚═════╝ ╚══════╝ ╚═════╝ ╚══════╝╚═════╝ 
 */</span>

pragma solidity<span class="marker" id="mapping-1295"></span><span class="token upd" id="move-dst-2" data-title="solidity_pragma_token/solidity_version"><span class="cupd"> 0.</span>6<span class="cupd">.1</span>0</span>;

<span class="marker" id="mapping-1296"></span><span class="token upd" id="move-dst-6" data-title="source_file/comment"><span class="cupd">/</span>**<span class="cupd"></span>
 * De<span class="cupd">f</span>ines the storage<span class="cupd"> </span>layout of t<span class="cupd">h</span><span class="cupd">e</span> token implementation<span class="cupd"> contrac</span>t. Any
 * newly dec<span class="cupd">l</span><span class="cupd">a</span>red st<span class="cupd">a</span>te<span class="cupd"> v</span><span class="cupd">a</span><span class="cupd">r</span>iables<span class="cupd"> </span>in future up<span class="cupd">g</span>rades sh<span class="cupd">o</span>uld be<span class="cupd"> a</span>ppended
 <span class="cupd">*</span> to the bottom. N<span class="cupd">e</span>ver remov<span class="cupd">e</span> state <span class="cupd">v</span>ariables fr<span class="cupd">o</span>m this list, however variables
 * can be ren<span class="cupd">a</span>med. <span class="cupd">P</span>lease add _Deprecat<span class="cupd">e</span>d to deprecated variables.
 */</span>
<span class="marker" id="mapping-1297"></span><span class="token mv" id="move-dst-110" data-title="source_file/contract_declaration">contract ProxyStorage {
    address public owner;
    address public pendingOwner;

    bool initialized;

    <span class="marker" id="mapping-1298"></span><span class="token mv" id="move-dst-300" data-title="contract_body/state_variable_declaration">address <span class="marker" id="mapping-1299"></span><span class="token upd" id="move-dst-301" data-title="state_variable_declaration/identifier">balances_Deprecated</span>;</span>
    <span class="marker" id="mapping-1300"></span><span class="token mv" id="move-dst-330" data-title="contract_body/state_variable_declaration">address <span class="marker" id="mapping-1301"></span><span class="token upd" id="move-dst-331" data-title="state_variable_declaration/identifier">all<span class="cupd">o</span>wances_De<span class="cupd">p</span><span class="cupd">r</span>ecated</span>;</span>

    uint256 <span class="marker" id="mapping-1302"></span><span class="token upd" id="move-dst-111" data-title="state_variable_declaration/identifier">_<span class="cupd">totalSupply</span></span>;

    bool private paused_Deprecated = false;
    address private globalPause_Deprecated;

    uint256 public burnMin = 0;
    uint256 public burnMax = 0;

    <span class="marker" id="mapping-1303"></span><span class="token mv" id="move-dst-359" data-title="contract_body/state_variable_declaration">address <span class="marker" id="mapping-1304"></span><span class="token upd" id="move-dst-360" data-title="state_variable_declaration/identifier">registry_Deprecated</span>;</span>

    string name_Deprecated;
    string symbol_Deprecated;

    <span class="marker" id="mapping-1305"></span><span class="token mv" id="move-dst-152" data-title="contract_body/state_variable_declaration"><span class="marker" id="mapping-1306"></span><span class="token add" data-title="state_variable_declaration/type_name"><span class="marker" id="mapping-1307"></span><span class="token mv" id="move-dst-153" data-title="type_name/type_name">uint256</span>[]</span> <span class="marker" id="mapping-1308"></span><span class="token upd" id="move-dst-154" data-title="state_variable_declaration/identifier">gasRefundPool_Deprecated</span>;</span>
    uint256 private redemptionAddressCount_Deprecated;
    uint256 <span class="marker" id="mapping-1309"></span><span class="token upd" id="move-dst-112" data-title="state_variable_declaration/identifier"><span class="cupd">minimumGasPriceForFutureRefunds</span>_Deprecated</span>;

    <span class="marker" id="mapping-1310"></span><span class="token mv" id="move-dst-81" data-title="contract_body/state_variable_declaration">mapping(address =&gt; uint256) <span class="marker" id="mapping-1311"></span><span class="token upd" id="move-dst-82" data-title="state_variable_declaration/identifier">_<span class="cupd">balance</span>s</span>;</span>
    <span class="marker" id="mapping-1312"></span><span class="token mv" id="move-dst-95" data-title="contract_body/state_variable_declaration">mapping(address =&gt; mapping(address =&gt; uint256)) <span class="marker" id="mapping-1313"></span><span class="token upd" id="move-dst-96" data-title="state_variable_declaration/identifier">_<span class="cupd">allowance</span>s</span>;</span>
    mapping(bytes32 =&gt; mapping(address =&gt; uint256)) <span class="marker" id="mapping-1314"></span><span class="token upd" id="move-dst-113" data-title="state_variable_declaration/identifier"><span class="cupd">attributes</span>_Deprecated</span>;

    <span class="marker" id="mapping-1315"></span><span class="token add" data-title="contract_body/state_variable_declaration"><span class="marker" id="mapping-1316"></span><span class="token mv" id="move-dst-54" data-title="state_variable_declaration/type_name"><span class="marker" id="mapping-1317"></span><span class="token add" data-title="type_name/mapping">mapping</span><span class="marker" id="mapping-1318"></span><span class="token add" data-title="type_name/(">(</span><span class="marker" id="mapping-1319"></span><span class="token mv" id="move-dst-24" data-title="type_name/primitive_type">address</span> <span class="marker" id="mapping-1320"></span><span class="token add" data-title="type_name/=>">=&gt;</span> address<span class="marker" id="mapping-1321"></span><span class="token add" data-title="type_name/)">)</span></span> finOps_Deprecated;</span>
    mapping(address =&gt; mapping(address =&gt; uint256)) <span class="marker" id="mapping-1322"></span><span class="token upd" id="move-dst-117" data-title="state_variable_declaration/identifier"><span class="cupd">finOpBalances</span>_Deprecated</span>;
    mapping(address =&gt; uint256) <span class="marker" id="mapping-1323"></span><span class="token upd" id="move-dst-118" data-title="state_variable_declaration/identifier"><span class="cupd">finOpSupply</span>_Deprecated</span>;

    struct RewardAllocation {
        <span class="marker" id="mapping-1324"></span><span class="token mv" id="move-dst-22" data-title="struct_declaration/struct_member">uint256 <span class="marker" id="mapping-1325"></span><span class="token upd" id="move-dst-23" data-title="struct_member/identifier">proportion</span>;</span>
        address finOp;
    }
    mapping(address =&gt; RewardAllocation[]) <span class="marker" id="mapping-1326"></span><span class="token upd" id="move-dst-119" data-title="state_variable_declaration/identifier"><span class="cupd">_rewardDistribution</span>_Deprecated</span>;
    uint256 <span class="marker" id="mapping-1327"></span><span class="token upd" id="move-dst-120" data-title="state_variable_declaration/identifier"><span class="cupd">maxRewardProportion</span>_Deprecated</span> = 1000;

    <span class="marker" id="mapping-1328"></span><span class="token mv" id="move-dst-140" data-title="contract_body/state_variable_declaration"><span class="marker" id="mapping-1329"></span><span class="token add" data-title="state_variable_declaration/type_name">mapping(<span class="marker" id="mapping-1330"></span><span class="token mv" id="move-dst-116" data-title="type_name/primitive_type">address</span> =&gt; <span class="marker" id="mapping-1331"></span><span class="token mv" id="move-dst-141" data-title="type_name/type_name">bool</span>)</span> <span class="marker" id="mapping-1332"></span><span class="token upd" id="move-dst-142" data-title="state_variable_declaration/identifier">isBla<span class="cupd">c</span>kl<span class="cupd">i</span>st<span class="cupd">ed</span></span>;</span>
    <span class="marker" id="mapping-1333"></span><span class="token add" data-title="contract_body/state_variable_declaration"><span class="marker" id="mapping-1334"></span><span class="token add" data-title="state_variable_declaration/type_name">mapping(<span class="marker" id="mapping-1335"></span><span class="token mv" id="move-dst-221" data-title="type_name/primitive_type">address</span> =&gt; <span class="marker" id="mapping-1336"></span><span class="token mv" id="move-dst-240" data-title="type_name/type_name">bool</span>)</span> <span class="marker" id="mapping-1337"></span><span class="token mv" id="move-dst-220" data-title="state_variable_declaration/visibility">public</span> canBurn;</span>

    <span class="marker" id="mapping-1338"></span><span class="token mv" id="move-dst-115" data-title="contract_body/comment"><span class="marker" id="mapping-1339"></span><span class="token upd" id="move-dst-115" data-title="contract_body/comment"><span class="cupd">/</span>*<span class="cupd"> </span>Additionally, we have seve<span class="cupd">r</span>al k<span class="cupd">e</span>cc<span class="cupd">a</span>k-based sto<span class="cupd">r</span>age locations.
     * If you <span class="cupd">a</span>d<span class="cupd">d</span> more keccak-based <span class="cupd">st</span>orage mappings, such as mappings, you must document them here.
     * If the length of th<span class="cupd">e </span>keccak<span class="cupd"> </span>inp<span class="cupd">u</span>t<span class="cupd"> </span>i<span class="cupd">s</span> the same as an existing mapping, it is<span class="cupd"> </span>possible t<span class="cupd">h</span>ere could b<span class="cupd">e</span> a prei<span class="cupd">ma</span>ge collision.
     * A preimage collision can be used to attack the contract by treating one storage location as another,
     * which would always be a critical issue.
     * Carefully examine future keccak-based storage to ensure there can be no preimage collisions.
     *******************************************************************************************************
     ** length     input                                                         usage
     *******************************************************************************************************
     ** 19         "trueXXX.proxy.owner"                                         Proxy Owner
     ** 27         "trueXXX.pending.proxy.owner"                                 Pending Proxy Owner
     ** 28         "trueXXX.proxy.implementation"                                Proxy Implementation
     ** 32         uint256(11)                                                   gasRefundPool_Deprecated
     ** 64         uint256(address),uint256(14)                                  balanceOf
     ** 64         uint256(address),keccak256(uint256(address),uint256(15))      allowance
     ** 64         uint256(address),keccak256(bytes32,uint256(16))               attributes
     **/</span></span>
}</span>

pragma solidity<span class="marker" id="mapping-1340"></span><span class="token upd" id="move-dst-7" data-title="solidity_pragma_token/solidity_version"><span class="cupd"> 0.</span>6<span class="cupd">.1</span>0</span>;

<span class="marker" id="mapping-1341"></span><span class="token upd" id="move-dst-8" data-title="source_file/comment"><span class="cupd">/**
 * @title</span> C<span class="cupd">l</span>a<span class="cupd">m</span>a<span class="cupd">b</span>l<span class="cupd">e</span>O<span class="cupd">w</span>nabl<span class="cupd">e
 * @de</span>v<span class="cupd"> </span><span class="cupd">T</span><span class="cupd">h</span>e<span class="cupd"> </span>C<span class="cupd">l</span><span class="cupd">a</span>m<span class="cupd">a</span><span class="cupd">b</span><span class="cupd">l</span><span class="cupd">e</span>O<span class="cupd">w</span>n<span class="cupd">a</span>b<span class="cupd">l</span><span class="cupd">e contract i</span><span class="cupd">s</span><span class="cupd"> </span><span class="cupd">a</span><span class="cupd"> c</span><span class="cupd">op</span><span class="cupd">y</span> <span class="cupd">o</span>f <span class="cupd">C</span><span class="cupd">l</span><span class="cupd">a</span><span class="cupd">imabl</span>e<span class="cupd"> </span>Co<span class="cupd">n</span><span class="cupd">t</span>r<span class="cupd">ac</span>t <span class="cupd">b</span>y<span class="cupd"> </span><span class="cupd">Z</span>epp<span class="cupd">e</span><span class="cupd">l</span>i<span class="cupd">n</span><span class="cupd">.</span><span class="cupd">
</span><span class="cupd"> *</span> <span class="cupd">a</span><span class="cupd">nd provid</span><span class="cupd">e</span><span class="cupd">s</span><span class="cupd"> </span><span class="cupd">b</span><span class="cupd">a</span><span class="cupd">s</span><span class="cupd">i</span><span class="cupd">c</span><span class="cupd"> a</span><span class="cupd">u</span><span class="cupd">t</span>ho<span class="cupd">r</span><span class="cupd">izat</span><span class="cupd">i</span><span class="cupd">o</span><span class="cupd">n </span><span class="cupd">c</span><span class="cupd">o</span>n<span class="cupd">t</span><span class="cupd">r</span><span class="cupd">o</span><span class="cupd">l</span><span class="cupd"> </span><span class="cupd">f</span><span class="cupd">u</span><span class="cupd">n</span><span class="cupd">c</span><span class="cupd">t</span><span class="cupd">i</span>o<span class="cupd">n</span>s<span class="cupd">.</span><span class="cupd"> I</span><span class="cupd">n</span><span class="cupd">h</span><span class="cupd">e</span><span class="cupd">ri</span><span class="cupd">ts</span><span class="cupd"> </span><span class="cupd">s</span><span class="cupd">t</span>o<span class="cupd">r</span><span class="cupd">a</span><span class="cupd">g</span><span class="cupd">e</span><span class="cupd"> </span><span class="cupd">l</span><span class="cupd">a</span><span class="cupd">you</span>t<span class="cupd"> </span><span class="cupd">o</span><span class="cupd">f</span>
<span class="cupd"> </span><span class="cupd">*</span> P<span class="cupd">r</span><span class="cupd">ox</span><span class="cupd">y</span><span class="cupd">S</span>t<span class="cupd">o</span>r<span class="cupd">a</span><span class="cupd">g</span><span class="cupd">e.</span>
 */</span>
<span class="marker" id="mapping-1342"></span><span class="token mv" id="move-dst-123" data-title="source_file/contract_declaration">contract <span class="marker" id="mapping-1343"></span><span class="token upd" id="move-dst-124" data-title="contract_declaration/identifier">Cl<span class="cupd">a</span>imable<span class="cupd">Own</span>able</span> is ProxyStorage {
    <span class="marker" id="mapping-1344"></span><span class="token upd" id="move-dst-126" data-title="contract_body/comment"><span class="cupd">/**
   </span> <span class="cupd"> * @dev</span><span class="cupd"> </span>em<span class="cupd">i</span>tte<span class="cupd">d</span> <span class="cupd">wh</span>e<span class="cupd">n </span>own<span class="cupd">e</span>rs<span class="cupd">h</span>ip<span class="cupd"> </span>is tr<span class="cupd">a</span>nsferred
     * <span class="cupd">@</span>par<span class="cupd">a</span>m pre<span class="cupd">v</span>iou<span class="cupd">sOwn</span><span class="cupd">e</span>r pre<span class="cupd">v</span>ious owner<span class="cupd"> of </span>th<span class="cupd">is contrac</span><span class="cupd">t</span><span class="cupd"></span><span class="cupd">
  </span><span class="cupd">  </span> *<span class="cupd"> </span>@pa<span class="cupd">r</span><span class="cupd">a</span>m newO<span class="cupd">w</span>ner n<span class="cupd">e</span>w<span class="cupd"> </span>ow<span class="cupd">n</span>er<span class="cupd"> of</span> t<span class="cupd">h</span>is<span class="cupd"> </span><span class="cupd">c</span>o<span class="cupd">n</span>tr<span class="cupd">act
</span> <span class="cupd">  </span>  */</span>
    <span class="marker" id="mapping-1345"></span><span class="token mv" id="move-dst-125" data-title="contract_body/event_definition">event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);</span>

    <span class="marker" id="mapping-1346"></span><span class="token upd" id="move-dst-128" data-title="contract_body/comment"><span class="cupd">/**
   </span> <span class="cupd"> * @dev</span> sets <span class="cupd">t</span>he <span class="cupd">o</span>riginal <span class="cupd">`o</span>wner<span class="cupd">`</span> <span class="cupd">of</span> the<span class="cupd"> </span>cont<span class="cupd">r</span>act to t<span class="cupd">h</span>e se<span class="cupd">n</span>de<span class="cupd">r</span><span class="cupd"></span>
     <span class="cupd">*</span> <span class="cupd">a</span><span class="cupd">t</span> const<span class="cupd">r</span>uc<span class="cupd">t</span>ion.<span class="cupd"> </span>M<span class="cupd">us</span><span class="cupd">t t</span><span class="cupd">he</span>n<span class="cupd"> b</span>e r<span class="cupd">e</span>initial<span class="cupd">i</span>z<span class="cupd">ed
 </span> <span class="cupd">  </span> */</span>
    <span class="marker" id="mapping-1347"></span><span class="token mv" id="move-dst-127" data-title="contract_body/constructor_definition">constructor() public {
        owner = msg.sender;
        emit OwnershipTransferred(address(0), owner);
    }</span>

    <span class="marker" id="mapping-1348"></span><span class="token upd" id="move-dst-130" data-title="contract_body/comment"><span class="cupd">/**
   </span> <span class="cupd"> * @dev</span> <span class="cupd">Throws if called by any account other than the</span> <span class="cupd">owner.
  </span> <span class="cupd">  </span>*/</span>
    <span class="marker" id="mapping-1349"></span><span class="token mv" id="move-dst-129" data-title="contract_body/modifier_definition">modifier onlyOwner() {
        require(msg.sender == owner, "only Owner");
        _;
    }</span>

    <span class="marker" id="mapping-1350"></span><span class="token upd" id="move-dst-131" data-title="contract_body/comment"><span class="cupd">/**
   </span> <span class="cupd"> * @dev</span> <span class="cupd">M</span>odifier thr<span class="cupd">ows</span> if cal<span class="cupd">l</span>e<span class="cupd">d</span> by any <span class="cupd">a</span>cc<span class="cupd">o</span><span class="cupd">unt </span>ot<span class="cupd">her </span>tha<span class="cupd">n</span><span class="cupd"> </span><span class="cupd">the pendingOwne</span><span class="cupd">r.
  </span><span class="cupd"> </span><span class="cupd">  </span>*/</span>
    <span class="marker" id="mapping-1351"></span><span class="token mv" id="move-dst-66" data-title="contract_body/modifier_definition">modifier onlyPendingOwner() {
        require(msg.sender == pendingOwner<span class="marker" id="mapping-1352"></span><span class="token add" data-title="call_expression/,">,</span> <span class="marker" id="mapping-1353"></span><span class="token mv" id="move-dst-259" data-title="call_expression/call_argument">"only pending owner"</span>);
        _;
    }</span>

    <span class="marker" id="mapping-1354"></span><span class="token upd" id="move-dst-133" data-title="contract_body/comment"><span class="cupd">/**
   </span> <span class="cupd"> * @dev Allows the</span> current owner to set the<span class="cupd"> pendingOwner addres</span>s<span class="cupd">.</span><span class="cupd"></span>
     * @para<span class="cupd">m</span><span class="cupd"> </span>newOwn<span class="cupd">e</span>r<span class="cupd"> Th</span>e addres<span class="cupd">s</span> to<span class="cupd"> transf</span>er ownership <span class="cupd">to.
 </span> <span class="cupd">  </span> */</span>
    <span class="marker" id="mapping-1355"></span><span class="token mv" id="move-dst-132" data-title="contract_body/function_definition">function transferOwnership(address newOwner) public onlyOwner {
        pendingOwner = newOwner;
    }</span>

    <span class="marker" id="mapping-1356"></span><span class="token add" data-title="contract_body/comment">/**
     * @dev Allows the pendingOwner address to finalize the transfer.
     */</span>
    function claimOwnership() public onlyPendingOwner {
        emit OwnershipTransferred(owner, pendingOwner);
        owner = pendingOwner;
        pendingOwner = address(0);
    }
}</span>

pragma solidity ^<span class="marker" id="mapping-1357"></span><span class="token upd" id="move-dst-11" data-title="solidity_pragma_token/solidity_version"><span class="cupd">0.</span>6<span class="cupd">.0</span></span>;

<span class="marker" id="mapping-1358"></span><span class="token mv" id="move-dst-10" data-title="source_file/comment"><span class="marker" id="mapping-1359"></span><span class="token upd" id="move-dst-10" data-title="source_file/comment"><span class="cupd">/</span>**<span class="cupd"></span>
 * @<span class="cupd">d</span>e<span class="cupd">v</span> Interface<span class="cupd"> </span>of t<span class="cupd">h</span>e ERC20 st<span class="cupd">a</span>ndard as <span class="cupd">d</span>e<span class="cupd">fi</span>n<span class="cupd">e</span>d<span class="cupd"> </span><span class="cupd">i</span>n<span class="cupd"> </span>t<span class="cupd">h</span>e<span class="cupd"> </span><span class="cupd">E</span>IP.
 */</span></span>
interface IERC20 {
    /**
     * @dev Returns the amount of tokens in existence.
     */
    function totalSupply() external view returns (uint256);

    /**
     * @dev Returns the amount of tokens owned by `account`.
     */
    function balanceOf(address account) external view returns (uint256);

    /**
     * @dev Moves `amount` tokens from the caller's account to `recipient`.
     *
     * Returns a boolean value indicating whether the operation succeeded.
     *
     * Emits a {Transfer} event.
     */
    function transfer(address recipient, uint256 amount) external returns (bool);

    /**
     * @dev Returns the remaining number of tokens that `spender` will be
     * allowed to spend on behalf of `owner` through {transferFrom}. This is
     * zero by default.
     *
     * This value changes when {approve} or {transferFrom} are called.
     */
    function allowance(address owner, address spender) external view returns (uint256);

    /**
     * @dev Sets `amount` as the allowance of `spender` over the caller's tokens.
     *
     * Returns a boolean value indicating whether the operation succeeded.
     *
     * IMPORTANT: Beware that changing an allowance with this method brings the risk
     * that someone may use both the old and the new allowance by unfortunate
     * transaction ordering. One possible solution to mitigate this race
     * condition is to first reduce the spender's allowance to 0 and set the
     * desired value afterwards:
     * https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729
     *
     * Emits an {Approval} event.
     */
    function approve(address spender, uint256 amount) external returns (bool);

    /**
     * @dev Moves `amount` tokens from `sender` to `recipient` using the
     * allowance mechanism. `amount` is then deducted from the caller's
     * allowance.
     *
     * Returns a boolean value indicating whether the operation succeeded.
     *
     * Emits a {Transfer} event.
     */
    function transferFrom(address sender, address recipient, uint256 amount) external returns (bool);

    /**
     * @dev Emitted when `value` tokens are moved from one account (`from`) to
     * another (`to`).
     *
     * Note that `value` may be zero.
     */
    event Transfer(address indexed from, address indexed to, uint256 value);

    /**
     * @dev Emitted when the allowance of a `spender` for an `owner` is set by
     * a call to {approve}. `value` is the new allowance.
     */
    event Approval(address indexed owner, address indexed spender, uint256 value);
}

<span class="marker" id="mapping-1360"></span><span class="token add" data-title="source_file/pragma_directive">pragma solidity ^0.6.0;</span>

<span class="marker" id="mapping-1361"></span><span class="token mv" id="move-dst-13" data-title="source_file/comment"><span class="marker" id="mapping-1362"></span><span class="token upd" id="move-dst-13" data-title="source_file/comment"><span class="cupd">/*</span><span class="cupd">
 * @dev</span> Provides <span class="cupd">i</span>nform<span class="cupd">a</span>tion about t<span class="cupd">h</span>e c<span class="cupd">u</span>rrent ex<span class="cupd">e</span>cution con<span class="cupd">t</span>ext<span class="cupd">,</span> including the
 * sende<span class="cupd">r of th</span>e tr<span class="cupd">a</span>ns<span class="cupd">a</span>ctio<span class="cupd">n a</span>nd its<span class="cupd"> </span>data. While these<span class="cupd"> </span>a<span class="cupd">r</span>e gen<span class="cupd">e</span>ral<span class="cupd">l</span>y availa<span class="cupd">b</span>le
 <span class="cupd">*</span> via msg<span class="cupd">.</span>s<span class="cupd">e</span>n<span class="cupd">d</span>e<span class="cupd">r</span> <span class="cupd">a</span>nd msg<span class="cupd">.</span>data<span class="cupd">, </span>t<span class="cupd">h</span>ey sho<span class="cupd">u</span>l<span class="cupd">d</span> no<span class="cupd">t</span> be a<span class="cupd">c</span>ces<span class="cupd">s</span>e<span class="cupd">d</span> in such a di<span class="cupd">re</span>ct
 * manne<span class="cupd">r, </span>since w<span class="cupd">he</span>n dea<span class="cupd">l</span>ing <span class="cupd">w</span>ith<span class="cupd"> </span>GS<span class="cupd">N</span> meta-transactio<span class="cupd">ns </span>the<span class="cupd"> </span>account sending and<span class="cupd"></span>
 * paying for <span class="cupd">exec</span>ut<span class="cupd">i</span>on may not be the <span class="cupd">ac</span>tual sender<span class="cupd"> </span>(as far<span class="cupd"> </span>as an <span class="cupd">a</span>p<span class="cupd">plic</span>ation<span class="cupd"></span><span class="cupd">
</span> <span class="cupd">*</span> <span class="cupd">i</span><span class="cupd">s</span> concerned).
 *<span class="cupd"></span><span class="cupd">
</span> * <span class="cupd">T</span>his <span class="cupd">c</span>o<span class="cupd">n</span>tract i<span class="cupd">s</span> onl<span class="cupd">y</span> <span class="cupd">r</span>equired<span class="cupd"> </span>for in<span class="cupd">t</span>ermedia<span class="cupd">t</span>e, l<span class="cupd">i</span>b<span class="cupd">r</span>ary-like c<span class="cupd">ontra</span>cts.
 */</span></span>
<span class="marker" id="mapping-1363"></span><span class="token add" data-title="source_file/contract_declaration">abstract contract Context <span class="marker" id="mapping-1364"></span><span class="token add" data-title="contract_declaration/contract_body">{
    <span class="marker" id="mapping-1365"></span><span class="token add" data-title="contract_body/function_definition">function _msgSender() <span class="marker" id="mapping-1366"></span><span class="token mv" id="move-dst-143" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-1367"></span><span class="token mv" id="move-dst-48" data-title="function_definition/state_mutability">view</span> virtual <span class="marker" id="mapping-1368"></span><span class="token add" data-title="function_definition/return_type_definition">returns (address payable)</span> <span class="marker" id="mapping-1369"></span><span class="token add" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-1370"></span><span class="token add" data-title="function_body/return_statement">return <span class="marker" id="mapping-1371"></span><span class="token mv" id="move-dst-144" data-title="return_statement/member_expression">msg.sender</span>;</span>
    }</span></span>

    <span class="marker" id="mapping-1372"></span><span class="token add" data-title="contract_body/function_definition">function _msgData() <span class="marker" id="mapping-1373"></span><span class="token mv" id="move-dst-147" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-1374"></span><span class="token mv" id="move-dst-39" data-title="function_definition/state_mutability">view</span> virtual <span class="marker" id="mapping-1375"></span><span class="token add" data-title="function_definition/return_type_definition">returns (bytes memory)</span> <span class="marker" id="mapping-1376"></span><span class="token add" data-title="function_definition/function_body">{
        this; // silence state mutability warning without generating bytecode - see https://github.com/ethereum/solidity/issues/2691
        return msg.data;
    }</span></span>
}</span></span>

pragma solidity ^<span class="marker" id="mapping-1377"></span><span class="token upd" id="move-dst-16" data-title="solidity_pragma_token/solidity_version"><span class="cupd">0.</span>6.0</span>;

<span class="marker" id="mapping-1378"></span><span class="token mv" id="move-dst-69" data-title="source_file/comment">/**
 * @dev Wrappers over Solidity's arithmetic operations with added overflow
 * checks.
 *
 * Arithmetic operations in Solidity wrap on overflow. This can easily result
 * in bugs, because programmers usually assume that an overflow raises an
 * error, which is the standard behavior in high level programming languages.
 * `SafeMath` restores this intuition by reverting the transaction when an
 * operation overflows.
 *
 * Using this library instead of the unchecked operations eliminates an entire
 * class of bugs, so it's recommended to use it always.
 */</span>
<span class="marker" id="mapping-1379"></span><span class="token mv" id="move-dst-70" data-title="source_file/library_declaration">library SafeMath {
    <span class="marker" id="mapping-1380"></span><span class="token upd" id="move-dst-71" data-title="contract_body/comment"><span class="cupd">/**
     * @dev Returns the addition of two unsigned integers, reverting on
     * overflow.
     *
     * Counterpart to Solidity's `+` operator.
     *
     * Requirements:
</span>     *<span class="cupd">
     * - Addition cannot overflow.</span>
     */</span>
    function add(uint256 a, uint256 b) internal pure returns (uint256) {
        uint256 c = a + b;
        require(c &gt;= a, "SafeMath: addition overflow");

        return c;
    }

    <span class="marker" id="mapping-1381"></span><span class="token upd" id="move-dst-72" data-title="contract_body/comment"><span class="cupd">/**
     * @dev Returns the subtraction of two unsigned integers, reverting on
     * overflow (when the result is negative).
     *
     * Counterpart to Solidity's `-` operator.
     *
     * Requirements:
</span>     *<span class="cupd">
     * - Subtraction cannot overflow.</span>
     */</span>
    function sub(uint256 a, uint256 b) internal pure returns (uint256) {
        return sub(a, b, "SafeMath: subtraction overflow");
    }

    <span class="marker" id="mapping-1382"></span><span class="token upd" id="move-dst-73" data-title="contract_body/comment"><span class="cupd">/**
     * @dev Returns the subtraction of two unsigned integers, reverting with custom message on
     * overflow (when the result is negative).
     *
     * Counterpart to Solidity's `-` operator.
     *
     * Requirements:
</span>     *<span class="cupd">
     * - Subtraction cannot overflow</span>.
     */</span>
    function sub(uint256 a, uint256 b, string memory errorMessage) internal pure returns (uint256) {
        require(b &lt;= a, errorMessage);
        uint256 c = a - b;

        return c;
    }

    <span class="marker" id="mapping-1383"></span><span class="token upd" id="move-dst-74" data-title="contract_body/comment"><span class="cupd">/**
     * @dev Returns the multiplication of two unsigned integers, reverting on
     * overflow.
     *
     * Counterpart to Solidity's `*` operator.
     *
     * Requirements:
</span>     *<span class="cupd">
     * - Multiplication cannot overflow.</span>
     */</span>
    function mul(uint256 a, uint256 b) internal pure returns (uint256) {
        // Gas optimization: this is cheaper than requiring 'a' not being zero, but the
        // benefit is lost if 'b' is also tested.
        // See: https://github.com/OpenZeppelin/openzeppelin-contracts/pull/522
        if (a == 0) {
            return 0;
        }

        uint256 c = a * b;
        require(c / a == b, "SafeMath: multiplication overflow");

        return c;
    }

    <span class="marker" id="mapping-1384"></span><span class="token upd" id="move-dst-75" data-title="contract_body/comment"><span class="cupd">/**
     * @dev Returns the integer division of two unsigned integers. Reverts on
     * division by zero. The result is rounded towards zero.
     *
     * Counterpart to Solidity's `/` operator. Note: this function uses a
     * `revert` opcode (which leaves remaining gas untouched) while Solidity
     * uses an invalid opcode to revert (consuming all remaining gas).
     *
     * Requirements:</span>
     <span class="cupd">*
     * - The divisor cannot be zer</span>o.
     */</span>
    function div(uint256 a, uint256 b) internal pure returns (uint256) {
        return div(a, b, "SafeMath: division by zero");
    }

    <span class="marker" id="mapping-1385"></span><span class="token upd" id="move-dst-76" data-title="contract_body/comment"><span class="cupd">/**
     * @dev Returns the integer division of two unsigned integers. Reverts with custom message on
     * division by zero. The result is rounded towards zero.
     *
     * Counterpart to Solidity's `/` operator. Note: this function uses a
     * `revert` opcode (which leaves remaining gas untouched) while Solidity
     * uses an invalid opcode to revert (consuming all remaining gas).
     *
     * Requirements:</span>
     <span class="cupd">*
     * - The divisor cannot be ze</span>ro.
     */</span>
    function div(uint256 a, uint256 b, string memory errorMessage) internal pure returns (uint256) {
        require(b &gt; 0, errorMessage);
        uint256 c = a / b;
        // assert(a == b * c + a % b); // There is no case in which this doesn't hold

        return c;
    }

    <span class="marker" id="mapping-1386"></span><span class="token upd" id="move-dst-77" data-title="contract_body/comment"><span class="cupd">/**
     * @dev Returns the remainder of dividing two unsigned integers. (unsigned integer modulo),
     * Reverts when dividing by zero.
     *
     * Counterpart to Solidity's `%` operator. This function uses a `revert`
     * opcode (which leaves remaining gas untouched) while Solidity uses an
     * invalid opcode to revert (consuming all remaining gas).
     *
     * Requirements:</span>
     <span class="cupd">*
     * - The divisor cannot be zer</span>o.
     */</span>
    function mod(uint256 a, uint256 b) internal pure returns (uint256) {
        return mod(a, b, "SafeMath: modulo by zero");
    }

    <span class="marker" id="mapping-1387"></span><span class="token upd" id="move-dst-78" data-title="contract_body/comment"><span class="cupd">/**
     * @dev Returns the remainder of dividing two unsigned integers. (unsigned integer modulo),
     * Reverts with custom message when dividing by zero.
     *
     * Counterpart to Solidity's `%` operator. This function uses a `revert`
     * opcode (which leaves remaining gas untouched) while Solidity uses an
     * invalid opcode to revert (consuming all remaining gas).
     *
     * Requirements:</span>
     <span class="cupd">*
     * - The divisor cannot be ze</span>ro.
     */</span>
    function mod(uint256 a, uint256 b, string memory errorMessage) internal pure returns (uint256) {
        require(b != 0, errorMessage);
        return a % b;
    }
}</span>

<span class="marker" id="mapping-1388"></span><span class="token mv" id="move-dst-67" data-title="source_file/pragma_directive">pragma solidity ^<span class="marker" id="mapping-1389"></span><span class="token upd" id="move-dst-68" data-title="solidity_pragma_token/solidity_version"><span class="cupd">0.</span>6.2</span>;</span>

<span class="marker" id="mapping-1390"></span><span class="token mv" id="move-dst-15" data-title="source_file/comment"><span class="marker" id="mapping-1391"></span><span class="token upd" id="move-dst-15" data-title="source_file/comment"><span class="cupd">/</span>**<span class="cupd"></span>
 * @dev C<span class="cupd">o</span>l<span class="cupd">l</span>ectio<span class="cupd">n</span> of <span class="cupd">f</span>un<span class="cupd">c</span>t<span class="cupd">i</span><span class="cupd">o</span>ns<span class="cupd"> r</span>el<span class="cupd">a</span>ted <span class="cupd">t</span>o<span class="cupd"> </span>the ad<span class="cupd">d</span><span class="cupd">r</span><span class="cupd">e</span>ss<span class="cupd"> </span>type
 */</span></span>
<span class="marker" id="mapping-1392"></span><span class="token add" data-title="source_file/library_declaration">library Address <span class="marker" id="mapping-1393"></span><span class="token add" data-title="library_declaration/contract_body">{
    /**
     * @dev Returns true if `account` is a contract.
     *
     * [IMPORTANT]
     * ====
     * It is unsafe to assume that an address for which this function returns
     * false is an externally-owned account (EOA) and not a contract.
     *
     * Among others, `isContract` will return false for the following
     * types of addresses:
     *
     *  - an externally-owned account
     *  - a contract in construction
     *  - an address where a contract will be created
     *  - an address where a contract lived, but was destroyed
     * ====
     */
    <span class="marker" id="mapping-1394"></span><span class="token add" data-title="contract_body/function_definition">function isContract(<span class="marker" id="mapping-1395"></span><span class="token add" data-title="function_definition/parameter">address account</span>) <span class="marker" id="mapping-1396"></span><span class="token mv" id="move-dst-28" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-1397"></span><span class="token mv" id="move-dst-29" data-title="function_definition/state_mutability">view</span> <span class="marker" id="mapping-1398"></span><span class="token mv" id="move-dst-158" data-title="function_definition/return_type_definition">returns (bool)</span> <span class="marker" id="mapping-1399"></span><span class="token add" data-title="function_definition/function_body">{
        // According to EIP-1052, 0x0 is the value returned for not-yet created accounts
        // and 0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470 is returned
        // for accounts without code, i.e. `keccak256('')`
        <span class="marker" id="mapping-1400"></span><span class="token add" data-title="function_body/variable_declaration_statement"><span class="marker" id="mapping-1401"></span><span class="token add" data-title="variable_declaration_statement/variable_declaration"><span class="marker" id="mapping-1402"></span><span class="token mv" id="move-dst-19" data-title="variable_declaration/type_name">bytes32</span> codehash</span>;</span>
        <span class="marker" id="mapping-1403"></span><span class="token add" data-title="function_body/variable_declaration_statement"><span class="marker" id="mapping-1404"></span><span class="token add" data-title="variable_declaration_statement/variable_declaration"><span class="marker" id="mapping-1405"></span><span class="token mv" id="move-dst-25" data-title="variable_declaration/type_name">bytes32</span> accountHash</span> = 0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470;</span>
        // solhint-disable-next-line no-inline-assembly
        <span class="marker" id="mapping-1406"></span><span class="token add" data-title="function_body/assembly_statement">assembly { codehash := extcodehash(account) }</span>
        <span class="marker" id="mapping-1407"></span><span class="token add" data-title="function_body/return_statement">return (codehash != accountHash &amp;&amp; codehash != 0x0);</span>
    }</span></span>

    /**
     * @dev Replacement for Solidity's `transfer`: sends `amount` wei to
     * `recipient`, forwarding all available gas and reverting on errors.
     *
     * https://eips.ethereum.org/EIPS/eip-1884[EIP1884] increases the gas cost
     * of certain opcodes, possibly making contracts go over the 2300 gas limit
     * imposed by `transfer`, making them unable to receive funds via
     * `transfer`. {sendValue} removes this limitation.
     *
     * https://diligence.consensys.net/posts/2019/09/stop-using-soliditys-transfer-now/[Learn more].
     *
     * IMPORTANT: because control is transferred to `recipient`, care must be
     * taken to not create reentrancy vulnerabilities. Consider using
     * {ReentrancyGuard} or the
     * https://solidity.readthedocs.io/en/v0.5.11/security-considerations.html#use-the-checks-effects-interactions-pattern[checks-effects-interactions pattern].
     */
    <span class="marker" id="mapping-1408"></span><span class="token mv" id="move-dst-337" data-title="contract_body/function_definition">function <span class="marker" id="mapping-1409"></span><span class="token upd" id="move-dst-338" data-title="function_definition/identifier">sendValue</span>(address <span class="marker" id="mapping-1410"></span><span class="token add" data-title="primitive_type/payable">payable</span> <span class="marker" id="mapping-1411"></span><span class="token upd" id="move-dst-339" data-title="parameter/identifier">recipient</span>, uint256 <span class="marker" id="mapping-1412"></span><span class="token upd" id="move-dst-340" data-title="parameter/identifier"><span class="cupd">a</span>mount</span>) <span class="marker" id="mapping-1413"></span><span class="token mv" id="move-dst-348" data-title="function_definition/visibility">internal</span> {
        <span class="marker" id="mapping-1414"></span><span class="token mv" id="move-dst-343" data-title="function_body/expression_statement"><span class="marker" id="mapping-1415"></span><span class="token upd" id="move-dst-344" data-title="call_expression/identifier"><span class="cupd">r</span><span class="cupd">e</span>quire</span>(<span class="marker" id="mapping-1416"></span><span class="token add" data-title="call_argument/binary_expression"><span class="marker" id="mapping-1417"></span><span class="token add" data-title="binary_expression/member_expression"><span class="marker" id="mapping-1418"></span><span class="token mv" id="move-dst-345" data-title="member_expression/type_cast_expression">address(this)</span>.balance</span> &gt;= amount</span>, <span class="marker" id="mapping-1419"></span><span class="token mv" id="move-dst-332" data-title="call_expression/call_argument">"Address: insufficient balance"</span>);</span>

        <span class="marker" id="mapping-1420"></span><span class="token upd" id="move-dst-341" data-title="function_body/comment"><span class="cupd">// </span>sol<span class="cupd">h</span>int-disabl<span class="cupd">e</span>-next-l<span class="cupd">i</span>ne<span class="cupd"> </span>av<span class="cupd">o</span>i<span class="cupd">d</span>-low-l<span class="cupd">e</span>vel-call<span class="cupd">s</span>,<span class="cupd"> </span>avo<span class="cupd">i</span>d-c<span class="cupd">a</span><span class="cupd">l</span>l-value</span>
        <span class="marker" id="mapping-1421"></span><span class="token mv" id="move-dst-356" data-title="variable_declaration_statement/variable_declaration_tuple">(bool <span class="marker" id="mapping-1422"></span><span class="token upd" id="move-dst-358" data-title="variable_declaration/identifier">success</span><span class="marker" id="mapping-1423"></span><span class="token mv" id="move-dst-357" data-title="variable_declaration_tuple/,">,</span> )</span> = <span class="marker" id="mapping-1424"></span><span class="token add" data-title="call_expression/struct_expression">recipient.call{ value: amount }</span>(<span class="marker" id="mapping-1425"></span><span class="token mv" id="move-dst-349" data-title="call_expression/call_argument">""</span>);
        <span class="marker" id="mapping-1426"></span><span class="token mv" id="move-dst-326" data-title="function_body/expression_statement">require(<span class="marker" id="mapping-1427"></span><span class="token add" data-title="call_argument/identifier">success</span>, "Address: unable to send value, recipient may have reverted");</span>
    }</span>

    /**
     * @dev Performs a Solidity function call using a low level `call`. A
     * plain`call` is an unsafe replacement for a function call: use this
     * function instead.
     *
     * If `target` reverts with a revert reason, it is bubbled up by this
     * function (like regular Solidity function calls).
     *
     * Returns the raw returned data. To convert to the expected return value,
     * use https://solidity.readthedocs.io/en/latest/units-and-global-variables.html?highlight=abi.decode#abi-encoding-and-decoding-functions[`abi.decode`].
     *
     * Requirements:
     *
     * - `target` must be a contract.
     * - calling `target` with `data` must not revert.
     *
     * _Available since v3.1._
     */
    <span class="marker" id="mapping-1428"></span><span class="token add" data-title="contract_body/function_definition">function functionCall(<span class="marker" id="mapping-1429"></span><span class="token mv" id="move-dst-17" data-title="function_definition/parameter">address <span class="marker" id="mapping-1430"></span><span class="token upd" id="move-dst-18" data-title="parameter/identifier">target</span></span>, <span class="marker" id="mapping-1431"></span><span class="token add" data-title="function_definition/parameter">bytes memory data</span>) <span class="marker" id="mapping-1432"></span><span class="token mv" id="move-dst-148" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-1433"></span><span class="token add" data-title="function_definition/return_type_definition">returns (bytes memory)</span> <span class="marker" id="mapping-1434"></span><span class="token add" data-title="function_definition/function_body">{
      <span class="marker" id="mapping-1435"></span><span class="token add" data-title="function_body/return_statement">return <span class="marker" id="mapping-1436"></span><span class="token mv" id="move-dst-335" data-title="return_statement/call_expression"><span class="marker" id="mapping-1437"></span><span class="token upd" id="move-dst-336" data-title="call_expression/identifier">f<span class="cupd">u</span>nctionCall</span>(<span class="marker" id="mapping-1438"></span><span class="token add" data-title="call_expression/call_argument">target</span>, <span class="marker" id="mapping-1439"></span><span class="token add" data-title="call_expression/call_argument">data</span><span class="marker" id="mapping-1440"></span><span class="token add" data-title="call_expression/,">,</span> "Address: low-level call failed")</span>;</span>
    }</span></span>

    /**
     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`], but with
     * `errorMessage` as a fallback revert reason when `target` reverts.
     *
     * _Available since v3.1._
     */
    <span class="marker" id="mapping-1441"></span><span class="token add" data-title="contract_body/function_definition">function functionCall(<span class="marker" id="mapping-1442"></span><span class="token mv" id="move-dst-85" data-title="function_definition/parameter">address <span class="marker" id="mapping-1443"></span><span class="token upd" id="move-dst-86" data-title="parameter/identifier">t<span class="cupd">a</span>rget</span></span>, <span class="marker" id="mapping-1444"></span><span class="token add" data-title="function_definition/parameter">bytes memory data</span>, <span class="marker" id="mapping-1445"></span><span class="token add" data-title="function_definition/parameter">string memory errorMessage</span>) <span class="marker" id="mapping-1446"></span><span class="token mv" id="move-dst-149" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-1447"></span><span class="token add" data-title="function_definition/return_type_definition">returns (bytes memory)</span> <span class="marker" id="mapping-1448"></span><span class="token add" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-1449"></span><span class="token add" data-title="function_body/return_statement">return <span class="marker" id="mapping-1450"></span><span class="token add" data-title="return_statement/call_expression">_functionCallWithValue(<span class="marker" id="mapping-1451"></span><span class="token add" data-title="call_expression/call_argument">target</span>, <span class="marker" id="mapping-1452"></span><span class="token add" data-title="call_expression/call_argument">data</span>, <span class="marker" id="mapping-1453"></span><span class="token mv" id="move-dst-226" data-title="call_expression/call_argument">0</span>, <span class="marker" id="mapping-1454"></span><span class="token add" data-title="call_expression/call_argument">errorMessage</span>)</span>;</span>
    }</span></span>

    /**
     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],
     * but also transferring `value` wei to `target`.
     *
     * Requirements:
     *
     * - the calling contract must have an ETH balance of at least `value`.
     * - the called Solidity function must be `payable`.
     *
     * _Available since v3.1._
     */
    <span class="marker" id="mapping-1455"></span><span class="token add" data-title="contract_body/function_definition">function functionCallWithValue(<span class="marker" id="mapping-1456"></span><span class="token mv" id="move-dst-83" data-title="function_definition/parameter">address <span class="marker" id="mapping-1457"></span><span class="token upd" id="move-dst-84" data-title="parameter/identifier">t<span class="cupd">a</span>rget</span></span>, <span class="marker" id="mapping-1458"></span><span class="token add" data-title="function_definition/parameter">bytes memory data</span>, <span class="marker" id="mapping-1459"></span><span class="token mv" id="move-dst-4" data-title="function_definition/parameter">uint256 value</span>) <span class="marker" id="mapping-1460"></span><span class="token mv" id="move-dst-150" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-1461"></span><span class="token add" data-title="function_definition/return_type_definition">returns (bytes memory)</span> <span class="marker" id="mapping-1462"></span><span class="token add" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-1463"></span><span class="token add" data-title="function_body/return_statement">return <span class="marker" id="mapping-1464"></span><span class="token mv" id="move-dst-333" data-title="return_statement/call_expression"><span class="marker" id="mapping-1465"></span><span class="token upd" id="move-dst-334" data-title="call_expression/identifier">f<span class="cupd">u</span>nct<span class="cupd">i</span>onCallWithValue</span>(<span class="marker" id="mapping-1466"></span><span class="token add" data-title="call_expression/call_argument">target</span>, <span class="marker" id="mapping-1467"></span><span class="token add" data-title="call_expression/call_argument">data</span><span class="marker" id="mapping-1468"></span><span class="token add" data-title="call_expression/,">,</span> <span class="marker" id="mapping-1469"></span><span class="token mv" id="move-dst-304" data-title="call_expression/call_argument">value</span><span class="marker" id="mapping-1470"></span><span class="token add" data-title="call_expression/,">,</span> "Address: low-level call with value failed")</span>;</span>
    }</span></span>

    /**
     * @dev Same as {xref-Address-functionCallWithValue-address-bytes-uint256-}[`functionCallWithValue`], but
     * with `errorMessage` as a fallback revert reason when `target` reverts.
     *
     * _Available since v3.1._
     */
    <span class="marker" id="mapping-1471"></span><span class="token add" data-title="contract_body/function_definition">function functionCallWithValue(<span class="marker" id="mapping-1472"></span><span class="token mv" id="move-dst-103" data-title="function_definition/parameter">address <span class="marker" id="mapping-1473"></span><span class="token upd" id="move-dst-104" data-title="parameter/identifier"><span class="cupd">t</span>arget</span></span>, <span class="marker" id="mapping-1474"></span><span class="token add" data-title="function_definition/parameter">bytes memory data</span>, <span class="marker" id="mapping-1475"></span><span class="token mv" id="move-dst-303" data-title="function_definition/parameter">uint256 value</span>, <span class="marker" id="mapping-1476"></span><span class="token add" data-title="function_definition/parameter">string memory errorMessage</span>) <span class="marker" id="mapping-1477"></span><span class="token mv" id="move-dst-170" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-1478"></span><span class="token add" data-title="function_definition/return_type_definition">returns (bytes memory)</span> <span class="marker" id="mapping-1479"></span><span class="token add" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-1480"></span><span class="token mv" id="move-dst-315" data-title="function_body/expression_statement">require(<span class="marker" id="mapping-1481"></span><span class="token add" data-title="binary_expression/member_expression"><span class="marker" id="mapping-1482"></span><span class="token mv" id="move-dst-342" data-title="member_expression/type_cast_expression">address(this)</span>.balance</span> &gt;= <span class="marker" id="mapping-1483"></span><span class="token upd" id="move-dst-316" data-title="binary_expression/identifier">v<span class="cupd">a</span>lue</span>, "Address: insufficient balance for call");</span>
        <span class="marker" id="mapping-1484"></span><span class="token add" data-title="function_body/return_statement">return <span class="marker" id="mapping-1485"></span><span class="token add" data-title="return_statement/call_expression">_functionCallWithValue(<span class="marker" id="mapping-1486"></span><span class="token add" data-title="call_expression/call_argument">target</span>, <span class="marker" id="mapping-1487"></span><span class="token add" data-title="call_expression/call_argument">data</span>, <span class="marker" id="mapping-1488"></span><span class="token mv" id="move-dst-366" data-title="call_expression/call_argument">value</span>, <span class="marker" id="mapping-1489"></span><span class="token add" data-title="call_expression/call_argument">errorMessage</span>)</span>;</span>
    }</span></span>

    <span class="marker" id="mapping-1490"></span><span class="token add" data-title="contract_body/function_definition">function _functionCallWithValue(<span class="marker" id="mapping-1491"></span><span class="token mv" id="move-dst-105" data-title="function_definition/parameter">address <span class="marker" id="mapping-1492"></span><span class="token upd" id="move-dst-106" data-title="parameter/identifier">target</span></span>, <span class="marker" id="mapping-1493"></span><span class="token add" data-title="function_definition/parameter">bytes memory data</span>, <span class="marker" id="mapping-1494"></span><span class="token mv" id="move-dst-20" data-title="function_definition/parameter">uint256 <span class="marker" id="mapping-1495"></span><span class="token upd" id="move-dst-21" data-title="parameter/identifier">weiV<span class="cupd">alue</span></span></span>, <span class="marker" id="mapping-1496"></span><span class="token add" data-title="function_definition/parameter">string memory errorMessage</span>) <span class="marker" id="mapping-1497"></span><span class="token add" data-title="function_definition/visibility">private</span> <span class="marker" id="mapping-1498"></span><span class="token add" data-title="function_definition/return_type_definition">returns (bytes memory)</span> <span class="marker" id="mapping-1499"></span><span class="token add" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-1500"></span><span class="token mv" id="move-dst-325" data-title="function_body/expression_statement">require(<span class="marker" id="mapping-1501"></span><span class="token add" data-title="call_argument/call_expression">isContract(target)</span>, "Address: call to non-contract");</span>

        // solhint-disable-next-line avoid-low-level-calls
        <span class="marker" id="mapping-1502"></span><span class="token mv" id="move-dst-350" data-title="function_body/variable_declaration_statement">(bool <span class="marker" id="mapping-1503"></span><span class="token upd" id="move-dst-354" data-title="variable_declaration/identifier">success</span><span class="marker" id="mapping-1504"></span><span class="token mv" id="move-dst-353" data-title="variable_declaration_tuple/,">,</span> <span class="marker" id="mapping-1505"></span><span class="token mv" id="move-dst-351" data-title="variable_declaration_tuple/variable_declaration"><span class="marker" id="mapping-1506"></span><span class="token add" data-title="primitive_type/bytes">bytes</span> <span class="marker" id="mapping-1507"></span><span class="token add" data-title="variable_declaration/memory">memory</span> <span class="marker" id="mapping-1508"></span><span class="token upd" id="move-dst-352" data-title="variable_declaration/identifier">retur<span class="cupd">n</span>data</span></span>) = <span class="marker" id="mapping-1509"></span><span class="token add" data-title="call_expression/struct_expression">target.call{ value: weiValue }</span>(<span class="marker" id="mapping-1510"></span><span class="token upd" id="move-dst-355" data-title="call_argument/identifier">data</span>);</span>
        <span class="marker" id="mapping-1511"></span><span class="token add" data-title="function_body/if_statement">if (success) <span class="marker" id="mapping-1512"></span><span class="token add" data-title="if_statement/block_statement">{
            return returndata;
        }</span> else <span class="marker" id="mapping-1513"></span><span class="token add" data-title="if_statement/block_statement">{
            // Look for revert reason and bubble it up if present
            <span class="marker" id="mapping-1514"></span><span class="token add" data-title="block_statement/if_statement">if (<span class="marker" id="mapping-1515"></span><span class="token add" data-title="if_statement/binary_expression">returndata.length &gt; 0</span>) <span class="marker" id="mapping-1516"></span><span class="token add" data-title="if_statement/block_statement">{
                // The easiest way to bubble the revert reason is using memory via assembly

                // solhint-disable-next-line no-inline-assembly
                <span class="marker" id="mapping-1517"></span><span class="token add" data-title="block_statement/assembly_statement">assembly {
                    <span class="marker" id="mapping-1518"></span><span class="token add" data-title="assembly_statement/yul_variable_declaration">let returndata_size := mload(returndata)</span>
                    <span class="marker" id="mapping-1519"></span><span class="token add" data-title="assembly_statement/yul_function_call"><span class="marker" id="mapping-1520"></span><span class="token add" data-title="yul_function_call/yul_evm_builtin">revert</span>(<span class="marker" id="mapping-1521"></span><span class="token add" data-title="yul_function_call/yul_function_call"><span class="marker" id="mapping-1522"></span><span class="token mv" id="move-dst-196" data-title="yul_function_call/yul_evm_builtin">add</span>(32, <span class="marker" id="mapping-1523"></span><span class="token add" data-title="yul_function_call/yul_path">returndata</span>)</span>, <span class="marker" id="mapping-1524"></span><span class="token add" data-title="yul_function_call/yul_path">returndata_size</span>)</span>
                }</span>
            }</span> else <span class="marker" id="mapping-1525"></span><span class="token add" data-title="if_statement/block_statement">{
                revert(errorMessage);
            }</span></span>
        }</span></span>
    }</span></span>
}</span></span>
<span class="marker" id="mapping-1526"></span><span class="token upd" id="move-dst-55" data-title="source_file/comment"><span class="cupd">/</span>**<span class="cupd"></span>
 * @no<span class="cupd">t</span>i<span class="cupd">c</span><span class="cupd">e</span> This is a<span class="cupd"> c</span>opy of op<span class="cupd">e</span>nzeppelin ERC20 co<span class="cupd">ntrac</span>t with removed<span class="cupd"> </span>state v<span class="cupd">a</span>riables.
 * Removing state variables has been necessary<span class="cupd"> d</span>ue to<span class="cupd"> </span>proxy pat<span class="cupd">t</span>ern us<span class="cupd">a</span>ge.
 * <span class="cupd">C</span>hanges to Openzeppelin ERC20 https://gith<span class="cupd">u</span>b.com/OpenZep<span class="cupd">p</span>elin<span class="cupd">/</span>openzeppelin-contr<span class="cupd">ac</span>ts<span class="cupd">/</span>bl<span class="cupd">o</span>b/de99bccbfd4ecd19d7369d01b<span class="cupd">0</span>70aa72c64423c9/c<span class="cupd">o</span>ntracts/tok<span class="cupd">en/ERC</span>20/ERC20.sol:
 * - Remove state variabl<span class="cupd">e</span>s _nam<span class="cupd">e</span>, _symbol, _decimals
 * - <span class="cupd">Us</span>e state variables <span class="cupd">_</span>balances, _allowanc<span class="cupd">e</span>s, _totalSupply from ProxyStorage
 * - Remove constructor
 <span class="cupd">*</span> - Solidity ver<span class="cupd">s</span>ion changed from <span class="cupd">^</span>0.6.0 to 0.6.10
 *<span class="cupd"> </span>- Contrac<span class="cupd">t</span> made abstract
 *<span class="cupd"></span>
 * See also<span class="cupd">: ClaimableO</span>wnable.sol and ProxyStorage.sol
 */</span>

pragma solidity<span class="marker" id="mapping-1527"></span><span class="token upd" id="move-dst-56" data-title="solidity_pragma_token/solidity_version"><span class="cupd"> 0.</span>6<span class="cupd">.1</span>0</span>;

<span class="marker" id="mapping-1528"></span><span class="token upd" id="move-dst-57" data-title="source_file/comment"><span class="cupd">/**
 * </span>@dev Impleme<span class="cupd">n</span>ta<span class="cupd">t</span>ion of<span class="cupd"> </span>t<span class="cupd">he</span> <span class="cupd">{</span>IERC20} <span class="cupd">i</span>nterface.
 *
 * <span class="cupd">T</span>his imple<span class="cupd">me</span>nta<span class="cupd">t</span>ion is ag<span class="cupd">no</span>stic to th<span class="cupd">e</span> w<span class="cupd">a</span>y toke<span class="cupd">n</span>s are created. This means
 * that a <span class="cupd">s</span>upp<span class="cupd">l</span>y m<span class="cupd">e</span>chani<span class="cupd">s</span>m has<span class="cupd"> </span><span class="cupd">to</span> be a<span class="cupd">d</span>de<span class="cupd">d</span> i<span class="cupd">n </span>a <span class="cupd">d</span><span class="cupd">e</span>r<span class="cupd">i</span>ve<span class="cupd">d</span> contra<span class="cupd">c</span>t using {<span class="cupd">_</span>mint}.
 *<span class="cupd"> </span>For<span class="cupd"> </span>a generic mechanism see {ERC20<span class="cupd">P</span>r<span class="cupd">e</span>setMi<span class="cupd">n</span>terPauser}.
 *
 * TIP: F<span class="cupd">or</span> <span class="cupd">a </span>de<span class="cupd">t</span>ail<span class="cupd">e</span>d <span class="cupd">w</span>rite<span class="cupd">u</span>p see our guide
 * https://forum<span class="cupd">.</span>zeppe<span class="cupd">l</span>in.solutions/t/how-to-imp<span class="cupd">l</span>ement-erc20-sup<span class="cupd">p</span>ly-mechanisms/226<span class="cupd">[</span>H<span class="cupd">o</span>w
 * to implement s<span class="cupd">up</span>pl<span class="cupd">y</span> mec<span class="cupd">h</span>anisms].
<span class="cupd"> </span>*<span class="cupd">
</span> <span class="cupd">*</span> We<span class="cupd"> </span>have <span class="cupd">fol</span>lo<span class="cupd">w</span>ed general OpenZ<span class="cupd">e</span><span class="cupd">p</span>peli<span class="cupd">n</span> guideline<span class="cupd">s</span><span class="cupd">:</span> functions r<span class="cupd">e</span><span class="cupd">ve</span>rt ins<span class="cupd">t</span>ead
 * of return<span class="cupd">i</span>ng `<span class="cupd">f</span>als<span class="cupd">e</span>` on <span class="cupd">fai</span>lu<span class="cupd">r</span>e. Thi<span class="cupd">s</span> behavior is nonethe<span class="cupd">l</span>ess <span class="cupd">c</span>onv<span class="cupd">e</span>ntional
 <span class="cupd">*</span> a<span class="cupd">n</span>d d<span class="cupd">o</span>es not conflict wi<span class="cupd">th th</span>e<span class="cupd"> </span>expectations o<span class="cupd">f</span> ER<span class="cupd">C2</span>0 application<span class="cupd">s</span>.
 *
 * Additi<span class="cupd">on</span>al<span class="cupd">l</span>y<span class="cupd">,</span> an {<span class="cupd">A</span>pp<span class="cupd">r</span>oval} eve<span class="cupd">n</span>t<span class="cupd"> </span>is em<span class="cupd">i</span><span class="cupd">t</span>ted o<span class="cupd">n </span>calls to <span class="cupd">{</span>tran<span class="cupd">sfer</span>From}<span class="cupd">.</span>
<span class="cupd"> </span>*<span class="cupd"> T</span>his allows applications to reconstruc<span class="cupd">t</span> the allowance for all accou<span class="cupd">n</span>ts<span class="cupd"> </span>just
 *<span class="cupd"> </span>by <span class="cupd">l</span>iste<span class="cupd">n</span>ing t<span class="cupd">o </span>s<span class="cupd">aid events. Oth</span>e<span class="cupd">r im</span>plementations of the EIP ma<span class="cupd">y </span>not emit
 * these ev<span class="cupd">e</span>nts, as<span class="cupd"> </span>it isn't<span class="cupd"> r</span>equired by the specification.
 *
 * Fin<span class="cupd">a</span>lly, the non-standard {decreaseAllowance} and {increaseAllowance}
 * function<span class="cupd">s </span>have been added to miti<span class="cupd">ga</span>te the well-kno<span class="cupd">w</span>n issues <span class="cupd">a</span>ro<span class="cupd">u</span>nd<span class="cupd"> </span><span class="cupd">se</span>tti<span class="cupd">n</span>g
 * allowances. S<span class="cupd">ee</span> {IERC20-approve}.
 */</span>
<span class="marker" id="mapping-1529"></span><span class="token add" data-title="source_file/contract_declaration">abstract contract ERC20 is <span class="marker" id="mapping-1530"></span><span class="token add" data-title="contract_declaration/inheritance_specifier">ClaimableOwnable</span>, <span class="marker" id="mapping-1531"></span><span class="token add" data-title="contract_declaration/inheritance_specifier">Context</span>, <span class="marker" id="mapping-1532"></span><span class="token add" data-title="contract_declaration/inheritance_specifier">IERC20</span> <span class="marker" id="mapping-1533"></span><span class="token add" data-title="contract_declaration/contract_body">{
    <span class="marker" id="mapping-1534"></span><span class="token mv" id="move-dst-151" data-title="contract_body/using_directive">using SafeMath for uint256;</span>
    <span class="marker" id="mapping-1535"></span><span class="token add" data-title="contract_body/using_directive">using <span class="marker" id="mapping-1536"></span><span class="token add" data-title="using_directive/type_alias">Address</span> for <span class="marker" id="mapping-1537"></span><span class="token mv" id="move-dst-201" data-title="using_directive/type_name">address</span>;</span>

    /**
     * @dev Returns the name of the token.
     */
    <span class="marker" id="mapping-1538"></span><span class="token add" data-title="contract_body/function_definition">function name() <span class="marker" id="mapping-1539"></span><span class="token mv" id="move-dst-87" data-title="function_definition/visibility">public</span> virtual <span class="marker" id="mapping-1540"></span><span class="token add" data-title="function_definition/state_mutability">pure</span> <span class="marker" id="mapping-1541"></span><span class="token add" data-title="function_definition/return_type_definition">returns (string memory)</span>;</span>

    /**
     * @dev Returns the symbol of the token, usually a shorter version of the
     * name.
     */
    <span class="marker" id="mapping-1542"></span><span class="token add" data-title="contract_body/function_definition">function symbol() <span class="marker" id="mapping-1543"></span><span class="token mv" id="move-dst-91" data-title="function_definition/visibility">public</span> virtual <span class="marker" id="mapping-1544"></span><span class="token add" data-title="function_definition/state_mutability">pure</span> <span class="marker" id="mapping-1545"></span><span class="token add" data-title="function_definition/return_type_definition">returns (string memory)</span>;</span>

    /**
     * @dev Returns the number of decimals used to get its user representation.
     * For example, if `decimals` equals `2`, a balance of `505` tokens should
     * be displayed to a user as `5,05` (`505 / 10 ** 2`).
     *
     * Tokens usually opt for a value of 18, imitating the relationship between
     * Ether and Wei. This is the value {ERC20} uses, unless {_setupDecimals} is
     * called.
     *
     * NOTE: This information is only used for _display_ purposes: it in
     * no way affects any of the arithmetic of the contract, including
     * {IERC20-balanceOf} and {IERC20-transfer}.
     */
    <span class="marker" id="mapping-1546"></span><span class="token add" data-title="contract_body/function_definition">function decimals() <span class="marker" id="mapping-1547"></span><span class="token mv" id="move-dst-60" data-title="function_definition/visibility">public</span> virtual <span class="marker" id="mapping-1548"></span><span class="token mv" id="move-dst-378" data-title="function_definition/state_mutability">pure</span> <span class="marker" id="mapping-1549"></span><span class="token add" data-title="function_definition/return_type_definition">returns (uint8)</span> <span class="marker" id="mapping-1550"></span><span class="token add" data-title="function_definition/function_body">{
        return 18;
    }</span></span>

    /**
     * @dev See {IERC20-totalSupply}.
     */
    <span class="marker" id="mapping-1551"></span><span class="token mv" id="move-dst-52" data-title="contract_body/function_definition">function <span class="marker" id="mapping-1552"></span><span class="token upd" id="move-dst-53" data-title="function_definition/identifier"><span class="cupd">t</span>o<span class="cupd">t</span>alS<span class="cupd">u</span>pply</span>() public view <span class="marker" id="mapping-1553"></span><span class="token add" data-title="function_definition/override_specifier">override</span> returns (uint256) {
        return <span class="marker" id="mapping-1554"></span><span class="token add" data-title="return_statement/identifier">_totalSupply</span>;
    }</span>

    /**
     * @dev See {IERC20-balanceOf}.
     */
    <span class="marker" id="mapping-1555"></span><span class="token mv" id="move-dst-49" data-title="contract_body/function_definition">function <span class="marker" id="mapping-1556"></span><span class="token upd" id="move-dst-50" data-title="function_definition/identifier"><span class="cupd">b</span><span class="cupd">al</span>anceOf</span>(address <span class="marker" id="mapping-1557"></span><span class="token upd" id="move-dst-51" data-title="parameter/identifier">account</span>) public view <span class="marker" id="mapping-1558"></span><span class="token add" data-title="function_definition/override_specifier">override</span> returns (uint256) {
        return <span class="marker" id="mapping-1559"></span><span class="token add" data-title="return_statement/array_access">_balances[account]</span>;
    }</span>

    /**
     * @dev See {IERC20-transfer}.
     *
     * Requirements:
     *
     * - `recipient` cannot be the zero address.
     * - the caller must have a balance of at least `amount`.
     */
    <span class="marker" id="mapping-1560"></span><span class="token mv" id="move-dst-162" data-title="contract_body/function_definition">function <span class="marker" id="mapping-1561"></span><span class="token upd" id="move-dst-163" data-title="function_definition/identifier">t<span class="cupd">r</span><span class="cupd">a</span>n<span class="cupd">s</span>fer</span>(<span class="marker" id="mapping-1562"></span><span class="token mv" id="move-dst-58" data-title="function_definition/parameter">address <span class="marker" id="mapping-1563"></span><span class="token upd" id="move-dst-59" data-title="parameter/identifier">r<span class="cupd">e</span>cipient</span></span>, <span class="marker" id="mapping-1564"></span><span class="token mv" id="move-dst-305" data-title="function_definition/parameter">uint256 amount</span>) public <span class="marker" id="mapping-1565"></span><span class="token add" data-title="function_definition/virtual">virtual</span> <span class="marker" id="mapping-1566"></span><span class="token add" data-title="function_definition/override_specifier">override</span> returns (bool) {
        <span class="marker" id="mapping-1567"></span><span class="token upd" id="move-dst-164" data-title="call_expression/identifier"><span class="cupd">_</span>t<span class="cupd">r</span><span class="cupd">a</span>n<span class="cupd">s</span>f<span class="cupd">e</span>r</span>(<span class="marker" id="mapping-1568"></span><span class="token add" data-title="call_expression/call_argument">_msgSender()</span>, <span class="marker" id="mapping-1569"></span><span class="token mv" id="move-dst-165" data-title="call_expression/call_argument"><span class="marker" id="mapping-1570"></span><span class="token upd" id="move-dst-166" data-title="call_argument/identifier">reci<span class="cupd">p</span>i<span class="cupd">en</span>t</span></span>, <span class="marker" id="mapping-1571"></span><span class="token mv" id="move-dst-277" data-title="call_expression/call_argument">amount</span>);
        <span class="marker" id="mapping-1572"></span><span class="token mv" id="move-dst-169" data-title="function_body/return_statement">return true;</span>
    }</span>

    /**
     * @dev See {IERC20-allowance}.
     */
    <span class="marker" id="mapping-1573"></span><span class="token mv" id="move-dst-361" data-title="contract_body/function_definition">function <span class="marker" id="mapping-1574"></span><span class="token upd" id="move-dst-362" data-title="function_definition/identifier"><span class="cupd">a</span><span class="cupd">llowance</span></span>(address owner, address spender) public view <span class="marker" id="mapping-1575"></span><span class="token add" data-title="function_definition/virtual">virtual</span> <span class="marker" id="mapping-1576"></span><span class="token add" data-title="function_definition/override_specifier">override</span> <span class="marker" id="mapping-1577"></span><span class="token mv" id="move-dst-40" data-title="function_definition/return_type_definition">returns (uint256)</span> {
        return <span class="marker" id="mapping-1578"></span><span class="token add" data-title="return_statement/array_access">_allowances[owner][spender]</span>;
    }</span>

    /**
     * @dev See {IERC20-approve}.
     *
     * Requirements:
     *
     * - `spender` cannot be the zero address.
     */
    <span class="marker" id="mapping-1579"></span><span class="token mv" id="move-dst-45" data-title="contract_body/function_definition">function <span class="marker" id="mapping-1580"></span><span class="token upd" id="move-dst-46" data-title="function_definition/identifier"><span class="cupd">a</span>pp<span class="cupd">r</span>ove</span>(address <span class="marker" id="mapping-1581"></span><span class="token upd" id="move-dst-47" data-title="parameter/identifier">spender</span>, <span class="marker" id="mapping-1582"></span><span class="token mv" id="move-dst-307" data-title="function_definition/parameter">uint256 amount</span>) public <span class="marker" id="mapping-1583"></span><span class="token add" data-title="function_definition/virtual">virtual</span> <span class="marker" id="mapping-1584"></span><span class="token add" data-title="function_definition/override_specifier">override</span> returns (bool) {
        <span class="marker" id="mapping-1585"></span><span class="token add" data-title="function_body/expression_statement"><span class="marker" id="mapping-1586"></span><span class="token add" data-title="expression_statement/call_expression">_approve(<span class="marker" id="mapping-1587"></span><span class="token add" data-title="call_expression/call_argument">_msgSender()</span>, <span class="marker" id="mapping-1588"></span><span class="token mv" id="move-dst-363" data-title="call_expression/call_argument">spender</span>, <span class="marker" id="mapping-1589"></span><span class="token mv" id="move-dst-318" data-title="call_expression/call_argument">amount</span>)</span>;</span>
        <span class="marker" id="mapping-1590"></span><span class="token mv" id="move-dst-167" data-title="function_body/return_statement">return true;</span>
    }</span>

    /**
     * @dev See {IERC20-transferFrom}.
     *
     * Emits an {Approval} event indicating the updated allowance. This is not
     * required by the EIP. See the note at the beginning of {ERC20};
     *
     * Requirements:
     * - `sender` and `recipient` cannot be the zero address.
     * - `sender` must have a balance of at least `amount`.
     * - the caller must have allowance for ``sender``'s tokens of at least
     * `amount`.
     */
    <span class="marker" id="mapping-1591"></span><span class="token add" data-title="contract_body/function_definition">function transferFrom(<span class="marker" id="mapping-1592"></span><span class="token add" data-title="function_definition/parameter">address sender</span>, <span class="marker" id="mapping-1593"></span><span class="token mv" id="move-dst-31" data-title="function_definition/parameter">address <span class="marker" id="mapping-1594"></span><span class="token upd" id="move-dst-32" data-title="parameter/identifier">recipient</span></span>, <span class="marker" id="mapping-1595"></span><span class="token add" data-title="function_definition/parameter">uint256 amount</span>) <span class="marker" id="mapping-1596"></span><span class="token mv" id="move-dst-157" data-title="function_definition/visibility">public</span> virtual <span class="marker" id="mapping-1597"></span><span class="token add" data-title="function_definition/override_specifier">override</span> <span class="marker" id="mapping-1598"></span><span class="token mv" id="move-dst-30" data-title="function_definition/return_type_definition">returns (bool)</span> <span class="marker" id="mapping-1599"></span><span class="token add" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-1600"></span><span class="token add" data-title="function_body/expression_statement"><span class="marker" id="mapping-1601"></span><span class="token add" data-title="expression_statement/call_expression">_transfer(<span class="marker" id="mapping-1602"></span><span class="token mv" id="move-dst-327" data-title="call_expression/call_argument">sender</span>, <span class="marker" id="mapping-1603"></span><span class="token add" data-title="call_expression/call_argument">recipient</span>, <span class="marker" id="mapping-1604"></span><span class="token mv" id="move-dst-319" data-title="call_expression/call_argument">amount</span>)</span>;</span>
        <span class="marker" id="mapping-1605"></span><span class="token add" data-title="function_body/expression_statement"><span class="marker" id="mapping-1606"></span><span class="token add" data-title="expression_statement/call_expression">_approve(<span class="marker" id="mapping-1607"></span><span class="token mv" id="move-dst-328" data-title="call_expression/call_argument">sender</span>, <span class="marker" id="mapping-1608"></span><span class="token add" data-title="call_expression/call_argument">_msgSender()</span>, <span class="marker" id="mapping-1609"></span><span class="token add" data-title="call_expression/call_argument"><span class="marker" id="mapping-1610"></span><span class="token add" data-title="call_argument/call_expression"><span class="marker" id="mapping-1611"></span><span class="token add" data-title="call_expression/member_expression">_allowances[sender][_msgSender()].sub</span>(<span class="marker" id="mapping-1612"></span><span class="token mv" id="move-dst-299" data-title="call_expression/call_argument">amount</span>, <span class="marker" id="mapping-1613"></span><span class="token mv" id="move-dst-275" data-title="call_expression/call_argument">"ERC20: transfer amount exceeds allowance"</span>)</span></span>)</span>;</span>
        <span class="marker" id="mapping-1614"></span><span class="token mv" id="move-dst-161" data-title="function_body/return_statement">return true;</span>
    }</span></span>

    /**
     * @dev Atomically increases the allowance granted to `spender` by the caller.
     *
     * This is an alternative to {approve} that can be used as a mitigation for
     * problems described in {IERC20-approve}.
     *
     * Emits an {Approval} event indicating the updated allowance.
     *
     * Requirements:
     *
     * - `spender` cannot be the zero address.
     */
    <span class="marker" id="mapping-1615"></span><span class="token mv" id="move-dst-367" data-title="contract_body/function_definition">function <span class="marker" id="mapping-1616"></span><span class="token upd" id="move-dst-368" data-title="function_definition/identifier">i<span class="cupd">ncreaseA</span>ll<span class="cupd">o</span>wance</span>(address spender, <span class="marker" id="mapping-1617"></span><span class="token mv" id="move-dst-36" data-title="function_definition/parameter">uint256 <span class="marker" id="mapping-1618"></span><span class="token upd" id="move-dst-37" data-title="parameter/identifier">a<span class="cupd">d</span>dedValue</span></span>) public <span class="marker" id="mapping-1619"></span><span class="token add" data-title="function_definition/virtual">virtual</span> returns (bool) {
        <span class="marker" id="mapping-1620"></span><span class="token upd" id="move-dst-369" data-title="call_expression/identifier"><span class="cupd">_</span>app<span class="cupd">r</span><span class="cupd">o</span>ve</span>(<span class="marker" id="mapping-1621"></span><span class="token add" data-title="call_expression/call_argument">_msgSender()</span>, <span class="marker" id="mapping-1622"></span><span class="token mv" id="move-dst-370" data-title="call_expression/call_argument">spender</span>, <span class="marker" id="mapping-1623"></span><span class="token add" data-title="call_expression/call_argument"><span class="marker" id="mapping-1624"></span><span class="token add" data-title="call_argument/call_expression"><span class="marker" id="mapping-1625"></span><span class="token add" data-title="call_expression/member_expression">_allowances[_msgSender()][spender].add</span>(<span class="marker" id="mapping-1626"></span><span class="token mv" id="move-dst-371" data-title="call_expression/call_argument">addedValue</span>)</span></span>);
        return true;
    }</span>

    /**
     * @dev Atomically decreases the allowance granted to `spender` by the caller.
     *
     * This is an alternative to {approve} that can be used as a mitigation for
     * problems described in {IERC20-approve}.
     *
     * Emits an {Approval} event indicating the updated allowance.
     *
     * Requirements:
     *
     * - `spender` cannot be the zero address.
     * - `spender` must have allowance for the caller of at least
     * `subtractedValue`.
     */
    <span class="marker" id="mapping-1627"></span><span class="token mv" id="move-dst-372" data-title="contract_body/function_definition">function <span class="marker" id="mapping-1628"></span><span class="token upd" id="move-dst-373" data-title="function_definition/identifier"><span class="cupd">de</span><span class="cupd">creaseA</span>ll<span class="cupd">o</span>wance</span>(address spender, <span class="marker" id="mapping-1629"></span><span class="token mv" id="move-dst-33" data-title="function_definition/parameter">uint256 <span class="marker" id="mapping-1630"></span><span class="token upd" id="move-dst-34" data-title="parameter/identifier">subtr<span class="cupd">a</span>ctedVa<span class="cupd">lue</span></span></span>) public <span class="marker" id="mapping-1631"></span><span class="token add" data-title="function_definition/virtual">virtual</span> returns (bool) {
        <span class="marker" id="mapping-1632"></span><span class="token upd" id="move-dst-374" data-title="call_expression/identifier"><span class="cupd">_</span>app<span class="cupd">r</span><span class="cupd">o</span>ve</span>(<span class="marker" id="mapping-1633"></span><span class="token add" data-title="call_expression/call_argument">_msgSender()</span>, <span class="marker" id="mapping-1634"></span><span class="token mv" id="move-dst-375" data-title="call_expression/call_argument">spender</span>, <span class="marker" id="mapping-1635"></span><span class="token add" data-title="call_expression/call_argument"><span class="marker" id="mapping-1636"></span><span class="token add" data-title="call_argument/call_expression"><span class="marker" id="mapping-1637"></span><span class="token add" data-title="call_expression/member_expression">_allowances[_msgSender()][spender].sub</span>(<span class="marker" id="mapping-1638"></span><span class="token mv" id="move-dst-376" data-title="call_expression/call_argument">subtractedValue</span>, <span class="marker" id="mapping-1639"></span><span class="token mv" id="move-dst-264" data-title="call_expression/call_argument">"ERC20: decreased allowance below zero"</span>)</span></span>);
        return true;
    }</span>

    /**
     * @dev Moves tokens `amount` from `sender` to `recipient`.
     *
     * This is internal function is equivalent to {transfer}, and can be used to
     * e.g. implement automatic token fees, slashing mechanisms, etc.
     *
     * Emits a {Transfer} event.
     *
     * Requirements:
     *
     * - `sender` cannot be the zero address.
     * - `recipient` cannot be the zero address.
     * - `sender` must have a balance of at least `amount`.
     */
    <span class="marker" id="mapping-1640"></span><span class="token add" data-title="contract_body/function_definition">function _transfer(<span class="marker" id="mapping-1641"></span><span class="token add" data-title="function_definition/parameter">address sender</span>, <span class="marker" id="mapping-1642"></span><span class="token mv" id="move-dst-26" data-title="function_definition/parameter">address <span class="marker" id="mapping-1643"></span><span class="token upd" id="move-dst-27" data-title="parameter/identifier">rec<span class="cupd">i</span>pient</span></span>, <span class="marker" id="mapping-1644"></span><span class="token add" data-title="function_definition/parameter">uint256 amount</span>) <span class="marker" id="mapping-1645"></span><span class="token mv" id="move-dst-239" data-title="function_definition/visibility">internal</span> virtual <span class="marker" id="mapping-1646"></span><span class="token add" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-1647"></span><span class="token mv" id="move-dst-61" data-title="function_body/expression_statement">require(<span class="marker" id="mapping-1648"></span><span class="token upd" id="move-dst-62" data-title="binary_expression/identifier">s<span class="cupd">e</span><span class="cupd">n</span>d<span class="cupd">er</span></span> != address(0)<span class="marker" id="mapping-1649"></span><span class="token add" data-title="call_expression/,">,</span> <span class="marker" id="mapping-1650"></span><span class="token mv" id="move-dst-241" data-title="call_expression/call_argument">"ERC20: transfer from the zero address"</span>);</span>
        <span class="marker" id="mapping-1651"></span><span class="token mv" id="move-dst-145" data-title="function_body/expression_statement">require(<span class="marker" id="mapping-1652"></span><span class="token upd" id="move-dst-146" data-title="binary_expression/identifier">r<span class="cupd">e</span>cipient</span> != address(0)<span class="marker" id="mapping-1653"></span><span class="token add" data-title="call_expression/,">,</span> <span class="marker" id="mapping-1654"></span><span class="token mv" id="move-dst-245" data-title="call_expression/call_argument">"ERC20: transfer to the zero address"</span>);</span>

        <span class="marker" id="mapping-1655"></span><span class="token add" data-title="function_body/expression_statement"><span class="marker" id="mapping-1656"></span><span class="token add" data-title="expression_statement/call_expression">_beforeTokenTransfer(<span class="marker" id="mapping-1657"></span><span class="token mv" id="move-dst-312" data-title="call_expression/call_argument">sender</span>, <span class="marker" id="mapping-1658"></span><span class="token add" data-title="call_expression/call_argument">recipient</span>, <span class="marker" id="mapping-1659"></span><span class="token mv" id="move-dst-268" data-title="call_expression/call_argument">amount</span>)</span>;</span>

        <span class="marker" id="mapping-1660"></span><span class="token mv" id="move-dst-246" data-title="function_body/expression_statement"><span class="marker" id="mapping-1661"></span><span class="token add" data-title="expression_statement/assignment_expression"><span class="marker" id="mapping-1662"></span><span class="token add" data-title="assignment_expression/array_access">_balances[sender]</span> = <span class="marker" id="mapping-1663"></span><span class="token mv" id="move-dst-247" data-title="assignment_expression/call_expression"><span class="marker" id="mapping-1664"></span><span class="token add" data-title="call_expression/member_expression">_balances[sender].sub</span>(<span class="marker" id="mapping-1665"></span><span class="token mv" id="move-dst-297" data-title="call_expression/call_argument">amount</span>, "ERC20: transfer amount exceeds balance")</span></span>;</span>
        <span class="marker" id="mapping-1666"></span><span class="token add" data-title="function_body/expression_statement"><span class="marker" id="mapping-1667"></span><span class="token add" data-title="expression_statement/assignment_expression"><span class="marker" id="mapping-1668"></span><span class="token add" data-title="assignment_expression/array_access">_balances[recipient]</span> = <span class="marker" id="mapping-1669"></span><span class="token add" data-title="assignment_expression/call_expression"><span class="marker" id="mapping-1670"></span><span class="token add" data-title="call_expression/member_expression">_balances[recipient].add</span>(<span class="marker" id="mapping-1671"></span><span class="token mv" id="move-dst-293" data-title="call_expression/call_argument">amount</span>)</span></span>;</span>
        <span class="marker" id="mapping-1672"></span><span class="token mv" id="move-dst-320" data-title="function_body/emit_statement">emit <span class="marker" id="mapping-1673"></span><span class="token upd" id="move-dst-321" data-title="emit_statement/identifier">Tr<span class="cupd">a</span><span class="cupd">n</span>sf<span class="cupd">e</span>r</span>(sender, <span class="marker" id="mapping-1674"></span><span class="token upd" id="move-dst-322" data-title="call_argument/identifier"><span class="cupd">rec</span><span class="cupd">i</span>pient</span>, amount);</span>
    }</span></span>

    /** @dev Creates `amount` tokens and assigns them to `account`, increasing
     * the total supply.
     *
     * Emits a {Transfer} event with `from` set to the zero address.
     *
     * Requirements
     *
     * - `to` cannot be the zero address.
     */
    <span class="marker" id="mapping-1675"></span><span class="token mv" id="move-dst-175" data-title="contract_body/function_definition">function <span class="marker" id="mapping-1676"></span><span class="token upd" id="move-dst-176" data-title="function_definition/identifier"><span class="cupd">_</span>mint</span>(address <span class="marker" id="mapping-1677"></span><span class="token upd" id="move-dst-177" data-title="parameter/identifier">account</span>, uint256 <span class="marker" id="mapping-1678"></span><span class="token upd" id="move-dst-178" data-title="parameter/identifier"><span class="cupd">a</span>mount</span>) internal <span class="marker" id="mapping-1679"></span><span class="token add" data-title="function_definition/virtual">virtual</span> {
        <span class="marker" id="mapping-1680"></span><span class="token mv" id="move-dst-212" data-title="function_body/expression_statement">require(<span class="marker" id="mapping-1681"></span><span class="token upd" id="move-dst-213" data-title="binary_expression/identifier">account</span> != address(0), <span class="marker" id="mapping-1682"></span><span class="token mv" id="move-dst-253" data-title="call_expression/call_argument">"ERC20: mint to the zero address"</span>);</span>

        <span class="marker" id="mapping-1683"></span><span class="token mv" id="move-dst-216" data-title="function_body/expression_statement"><span class="marker" id="mapping-1684"></span><span class="token add" data-title="call_expression/identifier">_beforeTokenTransfer</span>(address(0), <span class="marker" id="mapping-1685"></span><span class="token mv" id="move-dst-269" data-title="call_expression/call_argument">account</span><span class="marker" id="mapping-1686"></span><span class="token add" data-title="call_expression/,">,</span> <span class="marker" id="mapping-1687"></span><span class="token mv" id="move-dst-314" data-title="call_expression/call_argument">amount</span>);</span>

        <span class="marker" id="mapping-1688"></span><span class="token upd" id="move-dst-179" data-title="assignment_expression/identifier">_<span class="cupd">totalSupply</span></span> = <span class="marker" id="mapping-1689"></span><span class="token upd" id="move-dst-180" data-title="member_expression/identifier">_<span class="cupd">totalSupply</span></span>.<span class="marker" id="mapping-1690"></span><span class="token upd" id="move-dst-181" data-title="member_expression/identifier">add</span>(<span class="marker" id="mapping-1691"></span><span class="token upd" id="move-dst-182" data-title="call_argument/identifier"><span class="cupd">a</span>mount</span>);
        <span class="marker" id="mapping-1692"></span><span class="token add" data-title="function_body/expression_statement"><span class="marker" id="mapping-1693"></span><span class="token add" data-title="expression_statement/assignment_expression"><span class="marker" id="mapping-1694"></span><span class="token add" data-title="assignment_expression/array_access">_balances[account]</span> = <span class="marker" id="mapping-1695"></span><span class="token add" data-title="assignment_expression/call_expression"><span class="marker" id="mapping-1696"></span><span class="token add" data-title="call_expression/member_expression">_balances[account].add</span>(<span class="marker" id="mapping-1697"></span><span class="token mv" id="move-dst-278" data-title="call_expression/call_argument">amount</span>)</span></span>;</span>
        emit Transfer(address(0)<span class="marker" id="mapping-1698"></span><span class="token mv" id="move-dst-185" data-title="emit_statement/,">,</span> <span class="marker" id="mapping-1699"></span><span class="token mv" id="move-dst-267" data-title="emit_statement/call_argument">account</span>, <span class="marker" id="mapping-1700"></span><span class="token mv" id="move-dst-183" data-title="emit_statement/call_argument"><span class="marker" id="mapping-1701"></span><span class="token upd" id="move-dst-184" data-title="call_argument/identifier">amount</span></span>);
    }</span>

    /**
     * @dev Destroys `amount` tokens from `account`, reducing the
     * total supply.
     *
     * Emits a {Transfer} event with `to` set to the zero address.
     *
     * Requirements
     *
     * - `account` cannot be the zero address.
     * - `account` must have at least `amount` tokens.
     */
    <span class="marker" id="mapping-1702"></span><span class="token mv" id="move-dst-222" data-title="contract_body/function_definition">function <span class="marker" id="mapping-1703"></span><span class="token upd" id="move-dst-223" data-title="function_definition/identifier">_b<span class="cupd">u</span>rn</span>(address <span class="marker" id="mapping-1704"></span><span class="token upd" id="move-dst-224" data-title="parameter/identifier"><span class="cupd">account</span></span><span class="marker" id="mapping-1705"></span><span class="token add" data-title="function_definition/,">,</span> <span class="marker" id="mapping-1706"></span><span class="token add" data-title="function_definition/parameter">uint256 amount</span>) <span class="marker" id="mapping-1707"></span><span class="token mv" id="move-dst-254" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-1708"></span><span class="token add" data-title="function_definition/virtual">virtual</span> {
        <span class="marker" id="mapping-1709"></span><span class="token mv" id="move-dst-255" data-title="function_body/expression_statement">require(<span class="marker" id="mapping-1710"></span><span class="token add" data-title="binary_expression/identifier">account</span> <span class="marker" id="mapping-1711"></span><span class="token add" data-title="binary_expression/!=">!=</span> <span class="marker" id="mapping-1712"></span><span class="token mv" id="move-dst-258" data-title="binary_expression/type_cast_expression">address(0)</span>, "ERC20: burn from the zero address");</span>

        <span class="marker" id="mapping-1713"></span><span class="token add" data-title="function_body/expression_statement"><span class="marker" id="mapping-1714"></span><span class="token add" data-title="expression_statement/call_expression">_beforeTokenTransfer(<span class="marker" id="mapping-1715"></span><span class="token mv" id="move-dst-276" data-title="call_expression/call_argument">account</span>, <span class="marker" id="mapping-1716"></span><span class="token mv" id="move-dst-215" data-title="call_expression/call_argument">address(0)</span>, <span class="marker" id="mapping-1717"></span><span class="token add" data-title="call_expression/call_argument">amount</span>)</span>;</span>

        <span class="marker" id="mapping-1718"></span><span class="token mv" id="move-dst-41" data-title="function_body/expression_statement"><span class="marker" id="mapping-1719"></span><span class="token upd" id="move-dst-43" data-title="array_access/identifier"><span class="cupd">_</span>b<span class="cupd">a</span>lances</span><span class="marker" id="mapping-1720"></span><span class="token mv" id="move-dst-42" data-title="array_access/[">[</span><span class="marker" id="mapping-1721"></span><span class="token add" data-title="array_access/identifier">account</span>] = <span class="marker" id="mapping-1722"></span><span class="token add" data-title="call_expression/member_expression">_balances[account].sub</span>(<span class="marker" id="mapping-1723"></span><span class="token upd" id="move-dst-44" data-title="call_argument/identifier"><span class="cupd">a</span>mount</span>, "ERC20: burn amount exceeds balance");</span>
        <span class="marker" id="mapping-1724"></span><span class="token upd" id="move-dst-227" data-title="assignment_expression/identifier">_<span class="cupd">totalSupply</span></span> = <span class="marker" id="mapping-1725"></span><span class="token upd" id="move-dst-228" data-title="member_expression/identifier">_<span class="cupd">totalSupply</span></span>.sub(<span class="marker" id="mapping-1726"></span><span class="token upd" id="move-dst-229" data-title="call_argument/identifier">am<span class="cupd">o</span>unt</span>);
        emit Transfer(<span class="marker" id="mapping-1727"></span><span class="token upd" id="move-dst-230" data-title="call_argument/identifier"><span class="cupd">account</span></span>, address(0), <span class="marker" id="mapping-1728"></span><span class="token upd" id="move-dst-231" data-title="call_argument/identifier">am<span class="cupd">o</span>unt</span>);
    }</span>

    /**
     * @dev Sets `amount` as the allowance of `spender` over the `owner`s tokens.
     *
     * This is internal function is equivalent to `approve`, and can be used to
     * e.g. set automatic allowances for certain subsystems, etc.
     *
     * Emits an {Approval} event.
     *
     * Requirements:
     *
     * - `owner` cannot be the zero address.
     * - `spender` cannot be the zero address.
     */
    <span class="marker" id="mapping-1729"></span><span class="token add" data-title="contract_body/function_definition">function _approve(<span class="marker" id="mapping-1730"></span><span class="token add" data-title="function_definition/parameter">address owner</span>, <span class="marker" id="mapping-1731"></span><span class="token add" data-title="function_definition/parameter">address spender</span>, <span class="marker" id="mapping-1732"></span><span class="token add" data-title="function_definition/parameter">uint256 amount</span>) <span class="marker" id="mapping-1733"></span><span class="token mv" id="move-dst-346" data-title="function_definition/visibility">internal</span> virtual <span class="marker" id="mapping-1734"></span><span class="token add" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-1735"></span><span class="token mv" id="move-dst-252" data-title="function_body/expression_statement">require(<span class="marker" id="mapping-1736"></span><span class="token add" data-title="binary_expression/identifier">owner</span> <span class="marker" id="mapping-1737"></span><span class="token add" data-title="binary_expression/!=">!=</span> <span class="marker" id="mapping-1738"></span><span class="token add" data-title="binary_expression/type_cast_expression">address(0)</span>, "ERC20: approve from the zero address");</span>
        <span class="marker" id="mapping-1739"></span><span class="token add" data-title="function_body/expression_statement"><span class="marker" id="mapping-1740"></span><span class="token add" data-title="expression_statement/call_expression">require(<span class="marker" id="mapping-1741"></span><span class="token add" data-title="call_expression/call_argument"><span class="marker" id="mapping-1742"></span><span class="token mv" id="move-dst-347" data-title="call_argument/binary_expression"><span class="marker" id="mapping-1743"></span><span class="token add" data-title="binary_expression/identifier">spender</span> <span class="marker" id="mapping-1744"></span><span class="token add" data-title="binary_expression/!=">!=</span> address(0)</span></span>, <span class="marker" id="mapping-1745"></span><span class="token mv" id="move-dst-256" data-title="call_expression/call_argument">"ERC20: approve to the zero address"</span>)</span>;</span>

        <span class="marker" id="mapping-1746"></span><span class="token add" data-title="function_body/expression_statement">_allowances[owner][spender] = amount;</span>
        <span class="marker" id="mapping-1747"></span><span class="token add" data-title="function_body/emit_statement">emit Approval(<span class="marker" id="mapping-1748"></span><span class="token mv" id="move-dst-63" data-title="emit_statement/call_argument">owner</span>, <span class="marker" id="mapping-1749"></span><span class="token add" data-title="emit_statement/call_argument">spender</span>, <span class="marker" id="mapping-1750"></span><span class="token add" data-title="emit_statement/call_argument">amount</span>);</span>
    }</span></span>

    /**
     * @dev Hook that is called before any transfer of tokens. This includes
     * minting and burning.
     *
     * Calling conditions:
     *
     * - when `from` and `to` are both non-zero, `amount` of ``from``'s tokens
     * will be to transferred to `to`.
     * - when `from` is zero, `amount` tokens will be minted for `to`.
     * - when `to` is zero, `amount` of ``from``'s tokens will be burned.
     * - `from` and `to` are never both zero.
     *
     * To learn more about hooks, head to xref:ROOT:extending-contracts.adoc#using-hooks[Using Hooks].
     */
    // solhint-disable-next-line no-empty-blocks
    <span class="marker" id="mapping-1751"></span><span class="token add" data-title="contract_body/function_definition">function _beforeTokenTransfer(<span class="marker" id="mapping-1752"></span><span class="token mv" id="move-dst-3" data-title="function_definition/parameter">address from</span>, <span class="marker" id="mapping-1753"></span><span class="token mv" id="move-dst-302" data-title="function_definition/parameter">address to</span>, <span class="marker" id="mapping-1754"></span><span class="token add" data-title="function_definition/parameter">uint256 amount</span>) <span class="marker" id="mapping-1755"></span><span class="token mv" id="move-dst-171" data-title="function_definition/visibility">internal</span> virtual <span class="marker" id="mapping-1756"></span><span class="token add" data-title="function_definition/function_body">{ }</span></span>
}</span></span>

pragma solidity<span class="marker" id="mapping-1757"></span><span class="token upd" id="move-dst-64" data-title="solidity_pragma_token/solidity_version"><span class="cupd"> 0.</span>6<span class="cupd">.1</span>0</span>;

<span class="marker" id="mapping-1758"></span><span class="token upd" id="move-dst-65" data-title="source_file/comment"><span class="cupd">/**
 * @title</span> Re<span class="cupd">clai</span><span class="cupd">m</span>erToke<span class="cupd">n
 * @dev</span> ERC2<span class="cupd">0</span> t<span class="cupd">ok</span><span class="cupd">e</span>n<span class="cupd"> </span>whi<span class="cupd">c</span><span class="cupd">h</span><span class="cupd"> </span><span class="cupd">a</span><span class="cupd">l</span><span class="cupd">l</span>o<span class="cupd">w</span><span class="cupd">s own</span><span class="cupd">e</span><span class="cupd">r t</span>o<span class="cupd"> </span><span class="cupd">recla</span>im ERC20 t<span class="cupd">o</span>ke<span class="cupd">ns
</span><span class="cupd"> </span>*<span class="cupd"> </span>o<span class="cupd">r e</span>t<span class="cupd">h</span>e<span class="cupd">r</span><span class="cupd"> </span>s<span class="cupd">ent </span><span class="cupd">t</span><span class="cupd">o</span> t<span class="cupd">h</span>is <span class="cupd">con</span>tr<span class="cupd">act</span>
 */</span>
<span class="marker" id="mapping-1759"></span><span class="token mv" id="move-dst-134" data-title="source_file/contract_declaration"><span class="marker" id="mapping-1760"></span><span class="token add" data-title="contract_declaration/abstract">abstract</span> contract ReclaimerToken is <span class="marker" id="mapping-1761"></span><span class="token upd" id="move-dst-135" data-title="user_defined_type/identifier">ERC20</span> {
    <span class="marker" id="mapping-1762"></span><span class="token upd" id="move-dst-136" data-title="contract_body/comment"><span class="cupd">/**
   </span> <span class="cupd"> </span>*<span class="cupd"> @dev send all eth balance in the contract to another address
  </span> <span class="cupd"> </span> * @param _to address to send eth balance to
     */</span>
    function reclaimEther(address payable _to) external onlyOwner {
        _to.transfer(address(this).balance);
    }

    <span class="marker" id="mapping-1763"></span><span class="token upd" id="move-dst-137" data-title="contract_body/comment"><span class="cupd">/**
   </span> <span class="cupd"> </span>*<span class="cupd"> @dev send all token balance of an arbi</span>t<span class="cupd">rary erc20 token
  </span>   <span class="cupd">* in the contract to another address
 </span> <span class="cupd"> </span>  * @param token token to reclaim
     * @param _to address to send eth balance to
     */</span>
    function reclaimToken(IERC20 token, address _to) external onlyOwner {
        uint256 balance = token.balanceOf(address(this));
        token.transfer(_to, balance);
    }
}</span>

pragma solidity<span class="marker" id="mapping-1764"></span><span class="token upd" id="move-dst-79" data-title="solidity_pragma_token/solidity_version"><span class="cupd"> 0.</span>6<span class="cupd">.1</span>0</span>;

<span class="marker" id="mapping-1765"></span><span class="token upd" id="move-dst-80" data-title="source_file/comment"><span class="cupd">/</span>**<span class="cupd"></span><span class="cupd">
</span> * @title B<span class="cupd">u</span>r<span class="cupd">n</span>ab<span class="cupd">l</span>eTokenWithBounds
 * @dev <span class="cupd">B</span>urni<span class="cupd">n</span>g function<span class="cupd">s</span> a<span class="cupd">s</span> redeeming<span class="cupd"> </span>money from the system.
 * The platform will keep track of wh<span class="cupd">o</span> <span class="cupd">b</span>urns coins,
 <span class="cupd">* </span>and will s<span class="cupd">end</span> <span class="cupd">the</span>m back the eq<span class="cupd">u</span>ival<span class="cupd">e</span>nt <span class="cupd">a</span>mou<span class="cupd">nt </span>of money (rounded down to th<span class="cupd">e</span> neares<span class="cupd">t</span> cent).
 */</span>
<span class="marker" id="mapping-1766"></span><span class="token mv" id="move-dst-186" data-title="source_file/contract_declaration"><span class="marker" id="mapping-1767"></span><span class="token add" data-title="contract_declaration/abstract">abstract</span> contract BurnableTokenWithBounds is <span class="marker" id="mapping-1768"></span><span class="token mv" id="move-dst-197" data-title="contract_declaration/inheritance_specifier">ReclaimerToken</span> {
    <span class="marker" id="mapping-1769"></span><span class="token upd" id="move-dst-190" data-title="contract_body/comment"><span class="cupd">/</span>**
     * @<span class="cupd">d</span>e<span class="cupd">v</span> Em<span class="cupd">i</span>tted <span class="cupd">wh</span>e<span class="cupd">n</span> `va<span class="cupd">l</span>ue<span class="cupd">`</span> tok<span class="cupd">e</span>n<span class="cupd">s</span><span class="cupd"> </span>are <span class="cupd">b</span>urnt fr<span class="cupd">om</span> one<span class="cupd"> </span>ac<span class="cupd">count</span> (`burner`<span class="cupd">)</span>
     * <span class="cupd">@</span>par<span class="cupd">am</span> bu<span class="cupd">r</span>n<span class="cupd">e</span>r address whic<span class="cupd">h burne</span>d tokens
     *<span class="cupd"> </span>@param value am<span class="cupd">oun</span>t of t<span class="cupd">o</span>k<span class="cupd">e</span>n<span class="cupd">s b</span>urned
     */</span>
    <span class="marker" id="mapping-1770"></span><span class="token mv" id="move-dst-172" data-title="contract_body/event_definition">event Burn(address indexed burner, uint256 value);</span>

    <span class="marker" id="mapping-1771"></span><span class="token upd" id="move-dst-191" data-title="contract_body/comment"><span class="cupd">/</span>**<span class="cupd"></span>
     * @<span class="cupd">d</span>e<span class="cupd">v</span> E<span class="cupd">m</span>it<span class="cupd">ted</span> when new<span class="cupd"> </span>bur<span class="cupd">n</span> boun<span class="cupd">d</span>s <span class="cupd">w</span>ere s<span class="cupd">e</span>t
     * @param ne<span class="cupd">wM</span><span class="cupd">i</span>n new minimu<span class="cupd">m</span> burn <span class="cupd">a</span>mo<span class="cupd">u</span><span class="cupd">n</span><span class="cupd">t</span><span class="cupd"></span><span class="cupd">
</span>     * @param<span class="cupd"> </span>newMax new <span class="cupd">m</span>axi<span class="cupd">m</span>um <span class="cupd">b</span>urn<span class="cupd"> </span>am<span class="cupd">ou</span>nt
     * @n<span class="cupd">ot</span>i<span class="cupd">ce</span> `new<span class="cupd">M</span>in`<span class="cupd"> </span>sho<span class="cupd">u</span><span class="cupd">l</span>d <span class="cupd">ne</span>ver <span class="cupd">b</span>e greater than `newMax`
     */</span>
    <span class="marker" id="mapping-1772"></span><span class="token mv" id="move-dst-187" data-title="contract_body/event_definition">event SetBurnBounds(uint256 newMin, uint256 newMax);</span>

    <span class="marker" id="mapping-1773"></span><span class="token upd" id="move-dst-192" data-title="contract_body/comment"><span class="cupd">/</span>**
     * @<span class="cupd">d</span>ev Des<span class="cupd">t</span>roys <span class="cupd">`</span>amou<span class="cupd">n</span>t` <span class="cupd">t</span>ok<span class="cupd">e</span>ns from `msg.sender<span class="cupd">`,</span> re<span class="cupd">d</span>ucing<span class="cupd"> </span>t<span class="cupd">he</span>
     * t<span class="cupd">o</span>tal supply.
     * @param a<span class="cupd">m</span><span class="cupd">oun</span>t amo<span class="cupd">u</span>nt of <span class="cupd">t</span>o<span class="cupd">kens </span>to burn
     *
    <span class="cupd"> </span>*<span class="cupd"> </span>E<span class="cupd">m</span>its a {Transfer} e<span class="cupd">v</span>ent<span class="cupd"> </span>with `to` set to the zero address.
   <span class="cupd">  </span>*<span class="cupd"> </span>Emits a {Burn} <span class="cupd">even</span>t w<span class="cupd">i</span>th `burn<span class="cupd">er</span>`<span class="cupd"> </span>set<span class="cupd"> </span>to `msg.sender`
     *
   <span class="cupd"> </span> * R<span class="cupd">e</span>quirements
     *
  <span class="cupd"> </span>  * - `m<span class="cupd">s</span>g.send<span class="cupd">e</span>r`<span class="cupd"> </span>mus<span class="cupd">t</span> have at<span class="cupd"> </span>le<span class="cupd">a</span>s<span class="cupd">t</span> `amount` tokens.
     *
     */</span>
    <span class="marker" id="mapping-1774"></span><span class="token mv" id="move-dst-155" data-title="contract_body/function_definition">function <span class="marker" id="mapping-1775"></span><span class="token upd" id="move-dst-156" data-title="function_definition/identifier">burn</span>(<span class="marker" id="mapping-1776"></span><span class="token mv" id="move-dst-298" data-title="function_definition/parameter">uint256 amount</span>) <span class="marker" id="mapping-1777"></span><span class="token mv" id="move-dst-5" data-title="function_definition/visibility">external</span> {
        <span class="marker" id="mapping-1778"></span><span class="token upd" id="move-dst-159" data-title="call_expression/identifier"><span class="cupd">_</span>burn</span>(msg.sender<span class="marker" id="mapping-1779"></span><span class="token mv" id="move-dst-160" data-title="call_expression/,">,</span> <span class="marker" id="mapping-1780"></span><span class="token mv" id="move-dst-308" data-title="call_expression/call_argument">amount</span>);
    }</span>

    <span class="marker" id="mapping-1781"></span><span class="token upd" id="move-dst-193" data-title="contract_body/comment"><span class="cupd">/</span>**
     * @dev Change the minimum and maximum amount that can be burned at once.
     * Burning may be disabled by setting both to 0 (this will not be done
     * under normal operation, but we can't add checks to disallow it without
     * losing a l<span class="cupd">o</span>t <span class="cupd">of flexibility since burning could also be as good as disa</span>bled
     * by setting the minimum extremely high, and we don't want to lock
     * in any particular cap for the minimum)
     * @param _min minimum amount that can be burned at once
     * @param _max maximum amount that can be burned at once
     */</span>
    function setBurnBounds(uint256 _min, uint256 _max) external onlyOwner {
        require(_min &lt;= _max, "BurnableTokenWithBounds: min &gt; max");
        burnMin = _min;
        burnMax = _max;
        emit SetBurnBounds(_min, _max);
    }

    <span class="marker" id="mapping-1782"></span><span class="token mv" id="move-dst-195" data-title="contract_body/comment"><span class="marker" id="mapping-1783"></span><span class="token upd" id="move-dst-195" data-title="contract_body/comment"><span class="cupd">/</span>**<span class="cupd"></span>
     * @dev Chec<span class="cupd">k</span>s if amou<span class="cupd">n</span>t is w<span class="cupd">i</span>t<span class="cupd">hi</span><span class="cupd">n</span> allo<span class="cupd">w</span>e<span class="cupd">d</span> bu<span class="cupd">r</span>n b<span class="cupd">o</span>und<span class="cupd">s</span> and
     *<span class="cupd"> </span>d<span class="cupd">es</span>troys `amount` t<span class="cupd">o</span>kens f<span class="cupd">r</span>om `account`,<span class="cupd"> </span>red<span class="cupd">u</span>c<span class="cupd">i</span>ng<span class="cupd"> </span>t<span class="cupd">h</span>e
     * <span class="cupd">t</span>otal supply.
     * @param a<span class="cupd">c</span>c<span class="cupd">o</span>unt account to burn<span class="cupd"> </span>to<span class="cupd">k</span>e<span class="cupd">n</span>s for
     * @param<span class="cupd"> </span><span class="cupd">am</span><span class="cupd">o</span>unt<span class="cupd"> am</span>oun<span class="cupd">t </span>of t<span class="cupd">o</span>kens to burn
     *
     * Emits a {Burn} event
     */</span></span>
    <span class="marker" id="mapping-1784"></span><span class="token mv" id="move-dst-234" data-title="contract_body/function_definition">function <span class="marker" id="mapping-1785"></span><span class="token upd" id="move-dst-235" data-title="function_definition/identifier"><span class="cupd">_</span>b<span class="cupd">u</span><span class="cupd">r</span>n</span>(<span class="marker" id="mapping-1786"></span><span class="token mv" id="move-dst-282" data-title="function_definition/parameter">address account</span>, <span class="marker" id="mapping-1787"></span><span class="token mv" id="move-dst-283" data-title="function_definition/parameter">uint256 amount</span>) <span class="marker" id="mapping-1788"></span><span class="token mv" id="move-dst-284" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-1789"></span><span class="token add" data-title="function_definition/virtual">virtual</span> <span class="marker" id="mapping-1790"></span><span class="token add" data-title="function_definition/override_specifier">override</span> {
        require(<span class="marker" id="mapping-1791"></span><span class="token add" data-title="binary_expression/identifier">amount</span> <span class="marker" id="mapping-1792"></span><span class="token add" data-title="binary_expression/>=">&gt;=</span> <span class="marker" id="mapping-1793"></span><span class="token add" data-title="binary_expression/identifier">burnMin</span>, "BurnableTokenWithBounds: below min burn bound");
        <span class="marker" id="mapping-1794"></span><span class="token mv" id="move-dst-238" data-title="function_body/expression_statement">require(<span class="marker" id="mapping-1795"></span><span class="token add" data-title="binary_expression/identifier">amount</span> <span class="marker" id="mapping-1796"></span><span class="token add" data-title="binary_expression/<=">&lt;=</span> <span class="marker" id="mapping-1797"></span><span class="token add" data-title="binary_expression/identifier">burnMax</span>, "BurnableTokenWithBounds: exceeds max burn bound");</span>

        <span class="marker" id="mapping-1798"></span><span class="token add" data-title="function_body/expression_statement"><span class="marker" id="mapping-1799"></span><span class="token add" data-title="expression_statement/call_expression"><span class="marker" id="mapping-1800"></span><span class="token add" data-title="call_expression/member_expression">super._burn</span>(<span class="marker" id="mapping-1801"></span><span class="token mv" id="move-dst-265" data-title="call_expression/call_argument">account</span>, <span class="marker" id="mapping-1802"></span><span class="token mv" id="move-dst-306" data-title="call_expression/call_argument">amount</span>)</span>;</span>
        <span class="marker" id="mapping-1803"></span><span class="token mv" id="move-dst-289" data-title="function_body/emit_statement">emit <span class="marker" id="mapping-1804"></span><span class="token upd" id="move-dst-290" data-title="emit_statement/identifier"><span class="cupd">Burn</span></span>(account, amount);</span>
    }</span>
}</span>

pragma solidity<span class="marker" id="mapping-1805"></span><span class="token upd" id="move-dst-93" data-title="solidity_pragma_token/solidity_version"><span class="cupd"> 0.</span>6<span class="cupd">.1</span>0</span>;

<span class="marker" id="mapping-1806"></span><span class="token upd" id="move-dst-94" data-title="source_file/comment"><span class="cupd">/</span>**<span class="cupd"></span><span class="cupd">
</span> * @title TrueCurrency
 * @dev TrueCurrency is an ERC2<span class="cupd">0</span> with blacklist <span class="cupd">&amp;</span> redemptio<span class="cupd">n</span> addresses
 *
 * TrueCurrency is a<span class="cupd"> </span>compliant s<span class="cupd">t</span>ablecoin with blacklist <span class="cupd">a</span>nd redemp<span class="cupd">t</span>ion<span class="cupd"></span>
 <span class="cupd">*</span> addresses. Only<span class="cupd"> </span>the owner can blacklist<span class="cupd"> a</span>ccount<span class="cupd">s</span>. Redem<span class="cupd">p</span>tion addresses
 * are assig<span class="cupd">n</span>ed automaticall<span class="cupd">y t</span>o the first 0x1<span class="cupd">0</span>0000 addresses. Sending
 * tokens to the redemption add<span class="cupd">re</span>ss will trigger <span class="cupd">a</span> burn operation. Only
<span class="cupd"> </span>* the<span class="cupd"> o</span>wner can min<span class="cupd">t</span> or blacklist accounts.
 *
 * This contr<span class="cupd">a</span>ct is owned by the TokenController, which manages token
 * minti<span class="cupd">n</span>g &amp; admin fun<span class="cupd">c</span>tionality. See TokenController.sol
 *
 * See also: BurnableTokenWithBounds.sol
 *
 * ~~~~ Features <span class="cupd">~</span>~~~
 *
 * Redemption Addresses
 * - T<span class="cupd">h</span>e first 0x100000 a<span class="cupd">d</span>dresses are redemption addresses
 * - T<span class="cupd">o</span>k<span class="cupd">e</span>n<span class="cupd">s</span> sent to redemption addresses are burned
 * - Redemptions are tracked off-chain
 * - Cannot mint tokens to redemption addresses
 *
 * Blacklist
 * - Owner can blacklist accounts in accordance with local regulatory bodies
 * - Only a court order will merit a blacklist; blacklisting is extremely rare
 *
 * Burn Bounds &amp; CanBurn
 * - Owner can set min &amp; max burn amounts
 * - Only accounts flagged in canBurn are allowed to burn tokens
 * - canBurn prevents tokens from being sent to the incorrect address
 *
 * Reclaimer Token
 * - ERC20 Tokens and Ether sent to this contract can be reclaimed by the owner
 */</span>
<span class="marker" id="mapping-1807"></span><span class="token add" data-title="source_file/contract_declaration">abstract contract TrueCurrency is <span class="marker" id="mapping-1808"></span><span class="token mv" id="move-dst-198" data-title="contract_declaration/inheritance_specifier">BurnableTokenWithBounds</span> <span class="marker" id="mapping-1809"></span><span class="token add" data-title="contract_declaration/contract_body">{
    <span class="marker" id="mapping-1810"></span><span class="token mv" id="move-dst-174" data-title="contract_body/state_variable_declaration">uint256 constant CENT = 10**16;</span>
    <span class="marker" id="mapping-1811"></span><span class="token mv" id="move-dst-199" data-title="contract_body/state_variable_declaration">uint256 constant REDEMPTION_ADDRESS_COUNT = 0x100000;</span>

    /**
     * @dev Emitted when account blacklist status changes
     */
    <span class="marker" id="mapping-1812"></span><span class="token mv" id="move-dst-217" data-title="contract_body/event_definition">event <span class="marker" id="mapping-1813"></span><span class="token upd" id="move-dst-218" data-title="event_definition/identifier"><span class="cupd">Blacklisted</span></span>(address indexed account, <span class="marker" id="mapping-1814"></span><span class="token mv" id="move-dst-249" data-title="event_paramater/type_name">bool</span> <span class="marker" id="mapping-1815"></span><span class="token upd" id="move-dst-219" data-title="event_paramater/identifier">isB<span class="cupd">la</span><span class="cupd">c</span>klisted</span>);</span>

    /**
     * @dev Emitted when `value` tokens are minted for `to`
     * @param to address to mint tokens for
     * @param value amount of tokens to be minted
     */
    <span class="marker" id="mapping-1816"></span><span class="token mv" id="move-dst-173" data-title="contract_body/event_definition">event Mint(address indexed to, uint256 value);</span>

    /**
     * @dev Creates `amount` tokens and assigns them to `account`, increasing
     * the total supply.
     * @param account address to mint tokens for
     * @param amount amount of tokens to be minted
     *
     * Emits a {Mint} event
     *
     * Requirements
     *
     * - `account` cannot be the zero address.
     * - `account` cannot be blacklisted.
     * - `account` cannot be a redemption address.
     */
    <span class="marker" id="mapping-1817"></span><span class="token mv" id="move-dst-188" data-title="contract_body/function_definition">function <span class="marker" id="mapping-1818"></span><span class="token upd" id="move-dst-189" data-title="function_definition/identifier">mint</span>(<span class="marker" id="mapping-1819"></span><span class="token mv" id="move-dst-272" data-title="function_definition/parameter">address account</span>, <span class="marker" id="mapping-1820"></span><span class="token mv" id="move-dst-273" data-title="function_definition/parameter">uint256 amount</span>) <span class="marker" id="mapping-1821"></span><span class="token mv" id="move-dst-138" data-title="function_definition/visibility">external</span> <span class="marker" id="mapping-1822"></span><span class="token mv" id="move-dst-92" data-title="function_definition/modifier_invocation">onlyOwner</span> {
        require(<span class="marker" id="mapping-1823"></span><span class="token add" data-title="call_argument/array_access">!isBlacklisted[account]</span>, "TrueCurrency: account is blacklisted");
        require(<span class="marker" id="mapping-1824"></span><span class="token add" data-title="call_argument/unary_expression">!<span class="marker" id="mapping-1825"></span><span class="token add" data-title="unary_expression/call_expression">isRedemptionAddress(<span class="marker" id="mapping-1826"></span><span class="token mv" id="move-dst-274" data-title="call_expression/call_argument">account</span>)</span></span>, "TrueCurrency: account is a redemption address");
        <span class="marker" id="mapping-1827"></span><span class="token add" data-title="call_expression/identifier">_mint</span>(<span class="marker" id="mapping-1828"></span><span class="token mv" id="move-dst-279" data-title="call_expression/call_argument">account</span>, <span class="marker" id="mapping-1829"></span><span class="token mv" id="move-dst-280" data-title="call_expression/call_argument">amount</span>);
        <span class="marker" id="mapping-1830"></span><span class="token mv" id="move-dst-270" data-title="function_body/emit_statement">emit <span class="marker" id="mapping-1831"></span><span class="token upd" id="move-dst-271" data-title="emit_statement/identifier"><span class="cupd">Mint</span></span>(account, amount);</span>
    }</span>

    /**
     * @dev Set blacklisted status for the account.
     * @param account address to set blacklist flag for
     * @param _isBlacklisted blacklist flag value
     *
     * Requirements:
     *
     * - `msg.sender` should be owner.
     */
    <span class="marker" id="mapping-1832"></span><span class="token add" data-title="contract_body/function_definition">function setBlacklisted(<span class="marker" id="mapping-1833"></span><span class="token mv" id="move-dst-260" data-title="function_definition/parameter">address account</span>, <span class="marker" id="mapping-1834"></span><span class="token mv" id="move-dst-232" data-title="function_definition/parameter">bool <span class="marker" id="mapping-1835"></span><span class="token upd" id="move-dst-233" data-title="parameter/identifier">_isB<span class="cupd">lacklisted</span></span></span>) <span class="marker" id="mapping-1836"></span><span class="token mv" id="move-dst-38" data-title="function_definition/visibility">external</span> <span class="marker" id="mapping-1837"></span><span class="token mv" id="move-dst-88" data-title="function_definition/modifier_invocation">onlyOwner</span> <span class="marker" id="mapping-1838"></span><span class="token add" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-1839"></span><span class="token mv" id="move-dst-205" data-title="function_body/expression_statement">require(<span class="marker" id="mapping-1840"></span><span class="token mv" id="move-dst-237" data-title="binary_expression/type_cast_expression">uint256(<span class="marker" id="mapping-1841"></span><span class="token mv" id="move-dst-263" data-title="type_cast_expression/call_argument">account</span>)</span> &gt;= <span class="marker" id="mapping-1842"></span><span class="token mv" id="move-dst-207" data-title="binary_expression/identifier"><span class="marker" id="mapping-1843"></span><span class="token upd" id="move-dst-207" data-title="binary_expression/identifier">REDEMPTION_ADDRESS_COUNT</span></span>, "TrueCurrency: blacklisting of redemption address is not allowed");</span>
        <span class="marker" id="mapping-1844"></span><span class="token add" data-title="function_body/expression_statement">isBlacklisted[account] = _isBlacklisted;</span>
        <span class="marker" id="mapping-1845"></span><span class="token add" data-title="function_body/emit_statement">emit Blacklisted(<span class="marker" id="mapping-1846"></span><span class="token mv" id="move-dst-281" data-title="emit_statement/call_argument">account</span>, <span class="marker" id="mapping-1847"></span><span class="token add" data-title="emit_statement/call_argument">_isBlacklisted</span>);</span>
    }</span></span>

    /**
     * @dev Set canBurn status for the account.
     * @param account address to set canBurn flag for
     * @param _canBurn canBurn flag value
     *
     * Requirements:
     *
     * - `msg.sender` should be owner.
     */
    <span class="marker" id="mapping-1848"></span><span class="token add" data-title="contract_body/function_definition">function setCanBurn(<span class="marker" id="mapping-1849"></span><span class="token mv" id="move-dst-261" data-title="function_definition/parameter">address account</span>, <span class="marker" id="mapping-1850"></span><span class="token mv" id="move-dst-236" data-title="function_definition/parameter">bool <span class="marker" id="mapping-1851"></span><span class="token add" data-title="parameter/identifier">_canBurn</span></span>) <span class="marker" id="mapping-1852"></span><span class="token mv" id="move-dst-35" data-title="function_definition/visibility">external</span> <span class="marker" id="mapping-1853"></span><span class="token mv" id="move-dst-107" data-title="function_definition/modifier_invocation">onlyOwner</span> <span class="marker" id="mapping-1854"></span><span class="token add" data-title="function_definition/function_body">{
        canBurn[account] = _canBurn;
    }</span></span>

    /**
     * @dev Check if neither account is blacklisted before performing transfer
     * If transfer recipient is a redemption address, burns tokens
     * @notice Transfer to redemption address will burn tokens with a 1 cent precision
     * @param sender address of sender
     * @param recipient address of recipient
     * @param amount amount of tokens to transfer
     */
    <span class="marker" id="mapping-1855"></span><span class="token add" data-title="contract_body/function_definition">function _transfer(
        <span class="marker" id="mapping-1856"></span><span class="token mv" id="move-dst-323" data-title="function_definition/parameter">address sender</span>,
        <span class="marker" id="mapping-1857"></span><span class="token mv" id="move-dst-89" data-title="function_definition/parameter">address <span class="marker" id="mapping-1858"></span><span class="token upd" id="move-dst-90" data-title="parameter/identifier">recipient</span></span>,
        <span class="marker" id="mapping-1859"></span><span class="token mv" id="move-dst-262" data-title="function_definition/parameter">uint256 amount</span>
    ) <span class="marker" id="mapping-1860"></span><span class="token mv" id="move-dst-324" data-title="function_definition/visibility">internal</span> virtual <span class="marker" id="mapping-1861"></span><span class="token add" data-title="function_definition/override_specifier">override</span> <span class="marker" id="mapping-1862"></span><span class="token add" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-1863"></span><span class="token mv" id="move-dst-208" data-title="function_body/expression_statement">require(<span class="marker" id="mapping-1864"></span><span class="token add" data-title="call_argument/array_access">!isBlacklisted[sender]</span>, "TrueCurrency: sender is blacklisted");</span>
        <span class="marker" id="mapping-1865"></span><span class="token mv" id="move-dst-203" data-title="function_body/expression_statement">require(<span class="marker" id="mapping-1866"></span><span class="token add" data-title="call_argument/array_access">!isBlacklisted[recipient]</span>, "TrueCurrency: recipient is blacklisted");</span>

        <span class="marker" id="mapping-1867"></span><span class="token add" data-title="function_body/if_statement">if (<span class="marker" id="mapping-1868"></span><span class="token add" data-title="if_statement/call_expression">isRedemptionAddress(recipient)</span>) <span class="marker" id="mapping-1869"></span><span class="token add" data-title="if_statement/block_statement">{
            super._transfer(sender, recipient, amount.sub(amount.mod(CENT)));
            _burn(recipient, amount.sub(amount.mod(CENT)));
        }</span> else <span class="marker" id="mapping-1870"></span><span class="token add" data-title="if_statement/block_statement">{
            <span class="marker" id="mapping-1871"></span><span class="token add" data-title="block_statement/expression_statement"><span class="marker" id="mapping-1872"></span><span class="token add" data-title="expression_statement/call_expression"><span class="marker" id="mapping-1873"></span><span class="token add" data-title="call_expression/member_expression">super._transfer</span>(<span class="marker" id="mapping-1874"></span><span class="token mv" id="move-dst-329" data-title="call_expression/call_argument">sender</span>, <span class="marker" id="mapping-1875"></span><span class="token add" data-title="call_expression/call_argument">recipient</span>, <span class="marker" id="mapping-1876"></span><span class="token add" data-title="call_expression/call_argument">amount</span>)</span>;</span>
        }</span></span>
    }</span></span>

    /**
     * @dev Requere neither accounts to be blacklisted before approval
     * @param owner address of owner giving approval
     * @param spender address of spender to approve for
     * @param amount amount of tokens to approve
     */
    <span class="marker" id="mapping-1877"></span><span class="token add" data-title="contract_body/function_definition">function _approve(
        <span class="marker" id="mapping-1878"></span><span class="token add" data-title="function_definition/parameter">address owner</span>,
        <span class="marker" id="mapping-1879"></span><span class="token mv" id="move-dst-364" data-title="function_definition/parameter">address spender</span>,
        <span class="marker" id="mapping-1880"></span><span class="token mv" id="move-dst-295" data-title="function_definition/parameter">uint256 amount</span>
    ) <span class="marker" id="mapping-1881"></span><span class="token mv" id="move-dst-202" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-1882"></span><span class="token add" data-title="function_definition/override_specifier">override</span> <span class="marker" id="mapping-1883"></span><span class="token add" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-1884"></span><span class="token add" data-title="function_body/expression_statement"><span class="marker" id="mapping-1885"></span><span class="token add" data-title="expression_statement/call_expression">require(<span class="marker" id="mapping-1886"></span><span class="token add" data-title="call_expression/call_argument">!isBlacklisted[owner]</span>, <span class="marker" id="mapping-1887"></span><span class="token mv" id="move-dst-214" data-title="call_expression/call_argument">"TrueCurrency: tokens owner is blacklisted"</span>)</span>;</span>
        <span class="marker" id="mapping-1888"></span><span class="token mv" id="move-dst-204" data-title="function_body/expression_statement">require(<span class="marker" id="mapping-1889"></span><span class="token add" data-title="binary_expression/array_access">!isBlacklisted[spender]</span> <span class="marker" id="mapping-1890"></span><span class="token add" data-title="binary_expression/||">||</span> <span class="marker" id="mapping-1891"></span><span class="token add" data-title="binary_expression/binary_expression">amount == 0</span>, "TrueCurrency: tokens spender is blacklisted");</span>

        <span class="marker" id="mapping-1892"></span><span class="token add" data-title="function_body/expression_statement"><span class="marker" id="mapping-1893"></span><span class="token add" data-title="expression_statement/call_expression"><span class="marker" id="mapping-1894"></span><span class="token add" data-title="call_expression/member_expression">super._approve</span>(<span class="marker" id="mapping-1895"></span><span class="token mv" id="move-dst-139" data-title="call_expression/call_argument">owner</span>, <span class="marker" id="mapping-1896"></span><span class="token mv" id="move-dst-365" data-title="call_expression/call_argument">spender</span>, <span class="marker" id="mapping-1897"></span><span class="token mv" id="move-dst-287" data-title="call_expression/call_argument">amount</span>)</span>;</span>
    }</span></span>

    /**
     * @dev Check if tokens can be burned at address before burning
     * @param account account to burn tokens from
     * @param amount amount of tokens to burn
     */
    <span class="marker" id="mapping-1898"></span><span class="token mv" id="move-dst-291" data-title="contract_body/function_definition">function <span class="marker" id="mapping-1899"></span><span class="token upd" id="move-dst-292" data-title="function_definition/identifier"><span class="cupd">_</span>bu<span class="cupd">r</span>n</span>(address account, uint256 amount) internal <span class="marker" id="mapping-1900"></span><span class="token add" data-title="function_definition/override_specifier">override</span> {
        <span class="marker" id="mapping-1901"></span><span class="token mv" id="move-dst-225" data-title="function_body/expression_statement">require(<span class="marker" id="mapping-1902"></span><span class="token add" data-title="call_argument/array_access">canBurn[account]</span>, "TrueCurrency: cannot burn from this address");</span>
        <span class="marker" id="mapping-1903"></span><span class="token add" data-title="expression_statement/call_expression"><span class="marker" id="mapping-1904"></span><span class="token add" data-title="call_expression/member_expression">super._burn</span>(<span class="marker" id="mapping-1905"></span><span class="token mv" id="move-dst-286" data-title="call_expression/call_argument">account</span>, <span class="marker" id="mapping-1906"></span><span class="token mv" id="move-dst-288" data-title="call_expression/call_argument">amount</span>)</span>;
    }</span>

    /**
     * @dev First 0x100000-1 addresses (0x0000000000000000000000000000000000000001 
     * to 0x00000000000000000000000000000000000fffff) are redemption addresses.
     * @param account address to check is a redemption address
     *
     * All transfers to redemption address will trigger token burn.
     *
     * @notice For transfer to succeed, canBurn must be true for redemption address
     *
     * @return is `account` a redemption address
     */
    <span class="marker" id="mapping-1907"></span><span class="token add" data-title="contract_body/function_definition">function isRedemptionAddress(<span class="marker" id="mapping-1908"></span><span class="token mv" id="move-dst-294" data-title="function_definition/parameter">address account</span>) <span class="marker" id="mapping-1909"></span><span class="token mv" id="move-dst-296" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-1910"></span><span class="token mv" id="move-dst-257" data-title="function_definition/state_mutability">pure</span> <span class="marker" id="mapping-1911"></span><span class="token mv" id="move-dst-168" data-title="function_definition/return_type_definition">returns (bool)</span> <span class="marker" id="mapping-1912"></span><span class="token add" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-1913"></span><span class="token add" data-title="function_body/return_statement">return <span class="marker" id="mapping-1914"></span><span class="token add" data-title="return_statement/binary_expression"><span class="marker" id="mapping-1915"></span><span class="token mv" id="move-dst-209" data-title="binary_expression/binary_expression">uint256(<span class="marker" id="mapping-1916"></span><span class="token mv" id="move-dst-285" data-title="type_cast_expression/call_argument">account</span>) &lt; REDEMPTION_ADDRESS_COUNT</span> &amp;&amp; <span class="marker" id="mapping-1917"></span><span class="token mv" id="move-dst-210" data-title="binary_expression/binary_expression">uint256(<span class="marker" id="mapping-1918"></span><span class="token upd" id="move-dst-211" data-title="call_argument/identifier">account</span>) <span class="marker" id="mapping-1919"></span><span class="token add" data-title="binary_expression/!=">!=</span> <span class="marker" id="mapping-1920"></span><span class="token add" data-title="binary_expression/number_literal">0</span></span></span>;</span>
    }</span></span>
}</span></span>

pragma solidity<span class="marker" id="mapping-1921"></span><span class="token upd" id="move-dst-108" data-title="solidity_pragma_token/solidity_version"><span class="cupd"> 0.</span>6<span class="cupd">.1</span>0</span>;

<span class="marker" id="mapping-1922"></span><span class="token upd" id="move-dst-109" data-title="source_file/comment"><span class="cupd">/*</span>*<span class="cupd"></span>
 * @<span class="cupd">d</span>ev C<span class="cupd">o</span>ntract that p<span class="cupd">r</span>even<span class="cupd">ts</span> addresses<span class="cupd"> t</span>hat <span class="cupd">w</span>er<span class="cupd">e</span> previo<span class="cupd">u</span>sly using a<span class="cupd">ut</span>osweep ad<span class="cupd">d</span>resses from
 *<span class="cupd"> </span>mak<span class="cupd">i</span>ng tran<span class="cupd">s</span>fe<span class="cupd">r</span><span class="cupd">s</span> o<span class="cupd">n</span> the<span class="cupd">m</span>.
 *
 *<span class="cupd"> </span>In o<span class="cupd">l</span>der versions TrueCurrenc<span class="cupd">i</span>es had<span class="cupd"> </span>a fea<span class="cupd">t</span>ure calle<span class="cupd">d </span>Au<span class="cupd">t</span>osweep.
 *<span class="cupd"> G</span>ive<span class="cupd">n</span> a<span class="cupd"> s</span>in<span class="cupd">g</span>le d<span class="cupd">e</span>p<span class="cupd">o</span>sit addre<span class="cupd">s</span>s, it was<span class="cupd"> </span>possi<span class="cupd">b</span><span class="cupd">l</span>e <span class="cupd">t</span>o<span class="cupd"> g</span><span class="cupd">e</span>nerate 16^5-1 autosweep addr<span class="cupd">es</span>ses.
 * E.g<span class="cupd">.</span> <span class="cupd">h</span>a<span class="cupd">v</span>ing d<span class="cupd">e</span>p<span class="cupd">o</span>si<span class="cupd">t</span> addr<span class="cupd">e</span>ss 0xc257<span class="cupd">2</span>7<span class="cupd">4</span>276a4e539741ca11b590b9447b26a8051, yo<span class="cupd">u </span>could<span class="cupd"> gen</span>erate
 * - 0xc25<span class="cupd">7</span>274276a4e<span class="cupd">5</span>39<span class="cupd">7</span>41ca11b590b9447b2600000
 * - 0xc257<span class="cupd">2</span>74276a4e539741ca11b590b9447<span class="cupd">b</span><span class="cupd">2</span>600001
 * - ...
 * - 0xc257274276a4e539741ca11b5<span class="cupd">9</span>0b9447b26fffff<span class="cupd"></span><span class="cupd">
</span> * E<span class="cupd">v</span>e<span class="cupd">r</span>y trans<span class="cupd">f</span>er to <span class="cupd">a</span>n<span class="cupd"> a</span>ut<span class="cupd">os</span>w<span class="cupd">e</span>ep<span class="cupd"> </span><span class="cupd">ad</span>dr<span class="cupd">es</span>s <span class="cupd">re</span>sulted <span class="cupd">a</span>s a t<span class="cupd">ra</span>nsfer t<span class="cupd">o</span> depos<span class="cupd">i</span>t address.<span class="cupd">
</span> * Th<span class="cupd">i</span>s<span class="cupd"> </span>feature<span class="cupd"> </span><span class="cupd">g</span>ot<span class="cupd"> d</span>e<span class="cupd">p</span>r<span class="cupd">e</span>cate<span class="cupd">d</span>,<span class="cupd"> </span>b<span class="cupd">u</span><span class="cupd">t</span> ther<span class="cupd">e </span>we<span class="cupd">r</span>e<span class="cupd"> </span>4 add<span class="cupd">re</span>sses<span class="cupd"> </span>t<span class="cupd">h</span>at<span class="cupd"> </span>st<span class="cupd">i</span>ll actively <span class="cupd">u</span>si<span class="cupd">n</span>g the featu<span class="cupd">r</span>e.
 *<span class="cupd">
</span> * Th<span class="cupd">i</span>s c<span class="cupd">o</span>ntract will<span class="cupd"> </span><span class="cupd">r</span>e<span class="cupd">j</span>ec<span class="cupd">t</span><span class="cupd"> a </span>t<span class="cupd">r</span>a<span class="cupd">n</span>sfer to these 4*<span class="cupd">(</span>16^5<span class="cupd">-</span>1<span class="cupd">)</span> addres<span class="cupd">s</span>es to prevent accidental t<span class="cupd">ok</span>en freeze.
 */</span>
<span class="marker" id="mapping-1923"></span><span class="token add" data-title="source_file/contract_declaration">abstract contract TrueCurrencyWithLegacyAutosweep is <span class="marker" id="mapping-1924"></span><span class="token add" data-title="contract_declaration/inheritance_specifier">TrueCurrency</span> <span class="marker" id="mapping-1925"></span><span class="token add" data-title="contract_declaration/contract_body">{
    <span class="marker" id="mapping-1926"></span><span class="token add" data-title="contract_body/function_definition">function _transfer(
        <span class="marker" id="mapping-1927"></span><span class="token mv" id="move-dst-309" data-title="function_definition/parameter">address sender</span>,
        <span class="marker" id="mapping-1928"></span><span class="token mv" id="move-dst-101" data-title="function_definition/parameter">address <span class="marker" id="mapping-1929"></span><span class="token upd" id="move-dst-102" data-title="parameter/identifier">reci<span class="cupd">p</span>i<span class="cupd">en</span>t</span></span>,
        <span class="marker" id="mapping-1930"></span><span class="token mv" id="move-dst-310" data-title="function_definition/parameter">uint256 amount</span>
    ) <span class="marker" id="mapping-1931"></span><span class="token mv" id="move-dst-311" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-1932"></span><span class="token add" data-title="function_definition/override_specifier">override</span> <span class="marker" id="mapping-1933"></span><span class="token add" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-1934"></span><span class="token add" data-title="function_body/expression_statement">requireNotAutosweepAddress(recipient, 0x33091DE8341533468D13A80C5A670f4f47cC649f);</span>
        <span class="marker" id="mapping-1935"></span><span class="token add" data-title="function_body/expression_statement">requireNotAutosweepAddress(recipient, 0x50E2719208914764087e68C32bC5AaC321f5B04d);</span>
        <span class="marker" id="mapping-1936"></span><span class="token add" data-title="function_body/expression_statement">requireNotAutosweepAddress(recipient, 0x71d69e5481A9B7Be515E20B38a3f62Dab7170D78);</span>
        <span class="marker" id="mapping-1937"></span><span class="token add" data-title="function_body/expression_statement">requireNotAutosweepAddress(recipient, 0x90fdaA85D52dB6065D466B86f16bF840D514a488);</span>

        <span class="marker" id="mapping-1938"></span><span class="token add" data-title="function_body/expression_statement"><span class="marker" id="mapping-1939"></span><span class="token add" data-title="expression_statement/call_expression"><span class="marker" id="mapping-1940"></span><span class="token add" data-title="call_expression/member_expression">super._transfer</span>(<span class="marker" id="mapping-1941"></span><span class="token mv" id="move-dst-317" data-title="call_expression/call_argument">sender</span>, <span class="marker" id="mapping-1942"></span><span class="token add" data-title="call_expression/call_argument">recipient</span>, <span class="marker" id="mapping-1943"></span><span class="token mv" id="move-dst-266" data-title="call_expression/call_argument">amount</span>)</span>;</span>
    }</span></span>

    /**
     * @dev return false if address is autosweep address
     * @param recipient transfer recipient
     * @param depositAddress address to deposit to
     */
    <span class="marker" id="mapping-1944"></span><span class="token add" data-title="contract_body/function_definition">function requireNotAutosweepAddress(<span class="marker" id="mapping-1945"></span><span class="token mv" id="move-dst-97" data-title="function_definition/parameter">address <span class="marker" id="mapping-1946"></span><span class="token upd" id="move-dst-98" data-title="parameter/identifier">r<span class="cupd">e</span>cipient</span></span>, <span class="marker" id="mapping-1947"></span><span class="token mv" id="move-dst-99" data-title="function_definition/parameter">address <span class="marker" id="mapping-1948"></span><span class="token upd" id="move-dst-100" data-title="parameter/identifier">depo<span class="cupd">s</span>itA<span class="cupd">d</span>dress</span></span>) <span class="marker" id="mapping-1949"></span><span class="token mv" id="move-dst-248" data-title="function_definition/visibility">internal</span> <span class="marker" id="mapping-1950"></span><span class="token mv" id="move-dst-200" data-title="function_definition/state_mutability">pure</span> <span class="marker" id="mapping-1951"></span><span class="token add" data-title="function_definition/function_body">{
        <span class="marker" id="mapping-1952"></span><span class="token add" data-title="function_body/return_statement">return
            <span class="marker" id="mapping-1953"></span><span class="token add" data-title="return_statement/call_expression">require(<span class="marker" id="mapping-1954"></span><span class="token mv" id="move-dst-242" data-title="call_expression/call_argument"><span class="marker" id="mapping-1955"></span><span class="token add" data-title="call_argument/binary_expression"><span class="marker" id="mapping-1956"></span><span class="token add" data-title="binary_expression/binary_expression"><span class="marker" id="mapping-1957"></span><span class="token mv" id="move-dst-250" data-title="binary_expression/binary_expression">uint256(<span class="marker" id="mapping-1958"></span><span class="token upd" id="move-dst-251" data-title="call_argument/identifier">recipient</span>) &gt;&gt; 20</span> != <span class="marker" id="mapping-1959"></span><span class="token mv" id="move-dst-243" data-title="binary_expression/binary_expression">uint256(<span class="marker" id="mapping-1960"></span><span class="token upd" id="move-dst-244" data-title="call_argument/identifier">depositAddress</span>) &gt;&gt; 20</span></span> || <span class="marker" id="mapping-1961"></span><span class="token add" data-title="binary_expression/binary_expression">recipient == depositAddress</span></span></span>, <span class="marker" id="mapping-1962"></span><span class="token mv" id="move-dst-313" data-title="call_expression/call_argument">"Autosweep is disabled"</span>)</span>;</span>
    }</span></span>
}</span></span>

pragma solidity<span class="marker" id="mapping-1963"></span><span class="token upd" id="move-dst-121" data-title="solidity_pragma_token/solidity_version"><span class="cupd"> 0.</span>6<span class="cupd">.1</span>0</span>;

<span class="marker" id="mapping-1964"></span><span class="token upd" id="move-dst-122" data-title="source_file/comment"><span class="cupd">/**
 * @title</span> Tr<span class="cupd">u</span>eUS<span class="cupd">D
 * @dev </span>T<span class="cupd">h</span><span class="cupd">i</span><span class="cupd">s i</span>s t<span class="cupd">h</span>e<span class="cupd"> t</span>o<span class="cupd">p</span>-le<span class="cupd">v</span><span class="cupd">e</span>l <span class="cupd">E</span>RC20<span class="cupd"> contra</span>c<span class="cupd">t,</span> b<span class="cupd">u</span>t<span class="cupd"> </span><span class="cupd">m</span>o<span class="cupd">s</span>t <span class="cupd">o</span><span class="cupd">f </span>th<span class="cupd">e</span> <span class="cupd">i</span>ntere<span class="cupd">s</span><span class="cupd">t</span>i<span class="cupd">n</span><span class="cupd">g functi</span>onality<span class="cupd"> </span><span class="cupd">i</span>s
 <span class="cupd">* inhe</span>rited<span class="cupd"> </span>- <span class="cupd">s</span><span class="cupd">e</span>e<span class="cupd"> t</span>h<span class="cupd">e</span> <span class="cupd">d</span>ocu<span class="cupd">m</span>entat<span class="cupd">io</span>n<span class="cupd"> </span>on <span class="cupd">t</span>he<span class="cupd"> </span>corr<span class="cupd">e</span>sponding <span class="cupd">c</span><span class="cupd">on</span>tra<span class="cupd">cts.</span>
 */</span>
contract TrueUSD is <span class="marker" id="mapping-1965"></span><span class="token upd" id="move-dst-377" data-title="user_defined_type/identifier"><span class="cupd">True</span>Curr<span class="cupd">e</span>ncyWithLeg<span class="cupd">a</span><span class="cupd">c</span>yAut<span class="cupd">o</span>sweep</span> {
    uint8 constant DECIMALS = 18;
    uint8 constant ROUNDING = 2;

    function decimals() public <span class="marker" id="mapping-1966"></span><span class="token add" data-title="function_definition/override_specifier">override</span> pure returns (uint8) {
        return DECIMALS;
    }

    function rounding() public pure returns (uint8) {
        return ROUNDING;
    }

    function name() public <span class="marker" id="mapping-1967"></span><span class="token add" data-title="function_definition/override_specifier">override</span> pure returns (string memory) {
        return "TrueUSD";
    }

    function symbol() public <span class="marker" id="mapping-1968"></span><span class="token add" data-title="function_definition/override_specifier">override</span> pure returns (string memory) {
        return "TUSD";
    }
}</pre></div></div></div></body></html>